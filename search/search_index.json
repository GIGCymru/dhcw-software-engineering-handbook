{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Software development handbook","text":"<p>This site shares Digital Health and Care Wales' (DHCW) software development standards. Until now, these have only been available to internal staff.</p>"},{"location":"#why-have-a-handbook","title":"Why have a handbook?","text":"<p>When you're building software, especially in healthcare, good guidance really matters. It helps everyone work in a consistent way, so the code is easier to understand, safer, and more reliable.</p> <p>A handbook brings together all the important know-how: how to write clear, secure code; how to manage changes properly; how to work well across teams; and how to meet the expectations of modern software development.</p> <p>It's there to help you make good decisions, avoid mistakes, and deliver software that others can trust and build on.</p> <p>Terminology and Requirements</p> <p>To be clear about what\u2019s expected, we use specific words with defined meanings.</p> <p>The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this handbook are to be interpreted as described in RFC 2119.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Thanks for your interest in contributing! We're still working out how we\u2019d like to manage contributions. In the meantime, we\u2019d love to hear your ideas\u2014please feel free to open an issue with any suggestions. We'll share proper contribution guidelines soon.</p>"},{"location":"azure-devops-handbook/adding-users-and-teams/","title":"Adding users and Teams","text":""},{"location":"azure-devops-handbook/adding-users-and-teams/#add-users","title":"Add users","text":"<p>When adding users, you MUST grant only the minimum access level necessary. Use built-in security groups for easier management, avoiding broad groups unless essential.</p> <p>Further reading and information</p> <p>Add users or groups to a team or project - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/adding-users-and-teams/#add-additional-teams","title":"Add additional Teams","text":"<p>Each project has a default team, \"&lt;Project Name&gt; Team\". You can add teams for specific areas or products, each with its own backlogs, sprints, and dashboards.</p> <p>Practical tips</p> <p>When creating a team, use a clear, descriptive name that reflects its focus (e.g. feature or product), Avoid generic terms like \"Developers\".</p> <p>Examples of good practice</p> <p>Phoenix Portal Team: Front-end UI and integration with back-end APIs.</p> <p>Titan Mobile Team: Mobile app and integration with back-end APIs.</p> <p>Atlas Immunisations API Team: Backend Immunisation APIs.</p> <p>Helios Appointments Team: Immunisations appointment scheduler microservice.</p> <p>Developers</p> <p>Further reading and information</p> <p>Create or add a team - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/adding-users-and-teams/#configure-area-paths-for-teams","title":"Configure area paths for Teams","text":"<p>Create a new area path for each new Azure DevOps team. This keeps backlogs, boards, and queries specific to each team while allowing access to the shared backlog.</p> <p>Further reading and information</p> <p>Define area paths and assign to a team - Azure Boards | Microsoft Learn</p>"},{"location":"azure-devops-handbook/automating-builds-and-deployments-with-azure-pipelines/","title":"Automating builds and deployments with Azure pipelines","text":"<p>You SHOULD use Azure Pipelines to automate build, test, and deployment processes, enabling Continuous Integration (CI) &amp; Continuous Deployment (CD).</p>"},{"location":"azure-devops-handbook/automating-builds-and-deployments-with-azure-pipelines/#how-do-you-organise-your-code","title":"How do you organise your code?","text":"<p>Follow How to Organise Your Software Solution to maintain a clean, modular codebase and keep build and deployment scripts separate to reduce clutter.</p> <p>Practical tips</p> <p>Place pipeline YAML files in the build/scripts/ folder unless operational needs require a different location.</p> <p>Further reading and information</p> <p>How to Organise Your Software Solution</p>"},{"location":"azure-devops-handbook/automating-builds-and-deployments-with-azure-pipelines/#core-pipeline-characteristics","title":"Core pipeline characteristics","text":"<p>Follow Microsoft's baseline architecture to build repeatable, scalable Azure pipelines.</p> <p>Key considerations:</p> <ul> <li> <p>Use YAML: Prefer YAML pipelines for version control and sharing     configurations.</p> </li> <li> <p>Modular Design: Create reusable templates &amp; separate stages     (e.g. Build, Test, Deploy).</p> </li> <li> <p>Gradual Deployment: Use progressive strategies (e.g. DevTest &gt;     UAT &gt; Prod).</p> </li> <li> <p>Integrate Security: Include code analysis and vulnerability     scanning.</p> </li> <li> <p>Automated Testing: Run automated tests with coverage reporting.</p> </li> <li> <p>Approvals</p> </li> <li> <p>Pre-approval checks are RECOMMENDED for DevTest and UAT.</p> </li> <li> <p>Pre-approval checks SHOULD be in place before deploying to         Prod.</p> </li> <li> <p>Secure Secrets: Use tools like Azure Key Vault to manage     secrets.</p> </li> <li> <p>Store Artifacts: Retain build outputs for traceability.</p> </li> </ul> <p>Practical tips</p> <p>Not all pipelines need every feature; apply those relevant to the pipeline's purpose.</p> <p>Further reading and information</p> <p>Azure Pipelines baseline architecture - Azure Pipelines | Microsoft Learn</p> <p>Azure Pipelines documentation - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/automating-builds-and-deployments-with-azure-pipelines/#prefer-yaml-over-classic-release-pipelines","title":"Prefer YAML over classic release pipelines","text":"<p>Use YAML pipelines for improved version control, tracking, and auditing.</p> <p>While Classic Release pipelines can still be useful, YAML deployment jobs and Azure DevOps Environments are preferred for greater flexibility and scalability.</p> <p>Deployment groups may suit VM-based deployments but offer less control than YAML.</p>"},{"location":"azure-devops-handbook/automating-builds-and-deployments-with-azure-pipelines/#naming-conventions","title":"Naming conventions","text":"COMPONENT NAMING CONVENTION example pipeline &lt;repository-name&gt;-&lt;purpose&gt; (purpose = pr, ci, cd) wis-api-pr welshpas-web-ci wcp -integration-services-cd Pipeline Run (YAML name) \\$ (Build.DefinitionName)_ \\$(SourceBranchName)_ \\$( Date:yyyyMMdd).\\$(Rev:r) welshpas-web-ci_main_20241203.1 STAGE PascalCase, descriptive Build, Test, DeployToProd JOB PascalCase, descriptive RunUnitTests, BuildDockerImage, DeployToProd ENVIRONMENT &lt;DevTest | UAT | PROD&gt; DevTest, UAT, Prod DEPLOYMENT DeployTo&lt;Environment&gt; DeployToDevTest, DeployToUAT, DeployToProd VARIABLES PascalCase, descriptive KeyVaultName LIBRARY VARIABLES Lib-&lt;name&gt; Lib-ApiEndpoint LIBRARY VARIABLES (LINKED TO KEY VAULT) Kv-&lt;name&gt; Kv-APIKey <p>Practical tips</p> <p>Use clear, descriptive displayName values to clarify purpose and enhance readability.</p> <p>When building Nuget packages, using version numbers as pipeline run names is RECOMMENDED.  See Versioning conventions.</p>"},{"location":"azure-devops-handbook/automating-builds-and-deployments-with-azure-pipelines/#link-work-items-to-builds","title":"Link work items to builds","text":"<p>Automatically link work items included: In Pipeline settings choose to connect work items with each build result.</p>"},{"location":"azure-devops-handbook/azure-devops-basics/","title":"Azure DevOps basics","text":""},{"location":"azure-devops-handbook/azure-devops-basics/#core-concepts-and-terminology","title":"Core concepts and terminology","text":"Concept Description Organisation The top-level container, representing a server instance. Each organisation has its own configuration and owner. Project A unit within an organisation that includes repositories, planning tools, and Continuous Integration (CI) &amp; Continuous Delivery (CD) capabilities. Team A subset of a project, enabling smaller groups to work on specific features or components. Access Levels These define the available features to a user, There are three access levels: Stakeholder, Basic and Basic + Test Plans. Access Permissions These control specific actions (e.g. read, write, delete) on resources within projects. Security Groups These group users to manage permissions and apply policies consistently."},{"location":"azure-devops-handbook/azure-devops-basics/#key-features","title":"Key features","text":"Concept FUNCTION Boards Track and prioritise work using tasks, sprints, and backlogs. Repos Manage and store source code in Git repositories. Pipelines Automate code build, test and deployment processes. Artifacts Store build outputs, like compiled binaries and packages. Test Plans Define and execute test cases to ensure code quality."},{"location":"azure-devops-handbook/azure-devops-basics/#common-security-groups","title":"Common security groups","text":"<p>Azure DevOps organises user permissions into roles. Use the table below to determine which role best suits your needs.</p> Role Description Contributor Daily users of Azure DevOps. Key tasks: - Cloning, pushing, and pulling code in repositories. - Creating and managing work items, tasks, and bugs. - Participating in sprints and board activities. - Triggering and monitoring CI/CD pipelines. Project Administrator Administers specific projects. Key responsibilities: - Assigning user permissions and configuring project settings. - Setting up repositories, boards, and sprint iterations. - Creating and maintaining CI/CD pipelines and housekeeping tasks. Project Collection Administrator Oversees multiple projects. Key tasks: - Managing shared resources like package feeds and deployment agents. - Setting up pipelines that span projects. Organisation Owner Global administrator for the organisation. Responsibilities include: - Creating projects and configuring global policies. - Managing billing, subscriptions and user accounts."},{"location":"azure-devops-handbook/configuring-agents-for-azure-pipelines/","title":"Configuring agents for Azure pipelines","text":"<p>Agents execute tasks in an Azure Pipeline and are available in two types:</p> <ul> <li> <p>Self-Hosted Agents: Managed on your infrastructure.</p> </li> <li> <p>Microsoft-Hosted Agents: Fully managed by Microsoft and     available on demand.</p> </li> </ul>"},{"location":"azure-devops-handbook/configuring-agents-for-azure-pipelines/#choose-an-agent-type","title":"Choose an agent type","text":"<p>Choosing the right agent type depends on your needs -- see below.</p> COMPONENT SELF-HOSTED MICROSOFT-HOSTED COST Pay for VMs; build minutes/parallel jobs covered by Visual Studio Enterprise subscriptions. Pay per minute beyond free-tier usage. MANAGEMENT Manual setup and maintenance required. Fully managed; no setup needed. FLEXIBILITY Full control over tools and network configuration. Preconfigured environments; limited customisation. SCALABILITY Limited by VM capacity and no. of available Visual Studio Enterprise subscriptions. Scales on demand; no infrastructure limits. AVAILABILITY Restricted to DevTest VM uptime: Mon--Fri: 7 PM--7 AM. Sat &amp; Sun: Unavailable. Available without downtime."},{"location":"azure-devops-handbook/configuring-agents-for-azure-pipelines/#our-recommendation","title":"Our recommendation","text":"<p>Use Self-Hosted Agents for cost-effective scaling with multiple parallel jobs under our Visual Studio agreement.</p> <p>Use Microsoft-Hosted Agents for occasional tasks or to avoid management overheads and VM costs.</p> <p>Further reading and information</p> <p>Azure Pipelines Agents - Azure Pipelines | Microsoft Learn</p>"},{"location":"azure-devops-handbook/configuring-agents-for-azure-pipelines/#setting-up-a-self-hosted-agent","title":"Setting up a self-hosted agent","text":"<p>To configure a self-hosted agent:</p> <ul> <li> <p>Provision an Azure Virtual Machine.</p> </li> <li> <p>Add the agent to an existing pool (create a new pool if needed).</p> </li> <li> <p>Install and configure the agent software from Azure DevOps.</p> </li> <li> <p>Run the agent as a service for automatic restarts.</p> </li> </ul>"},{"location":"azure-devops-handbook/configuring-agents-for-azure-pipelines/#securing-a-self-hosted-agent","title":"Securing a self-hosted agent","text":"<p>To ensure agent security:</p> <ul> <li> <p>Use separate pools for different projects to reduce risk.</p> </li> <li> <p>Assign a dedicated pool for production deployments.</p> </li> <li> <p>Restrict access to the agent folder to authorised personnel.</p> </li> <li> <p>Clean temporary files in the agent's build folder regularly.</p> </li> <li> <p>Keep the agent software updated.</p> </li> <li> <p>Run the agent under a service account (e.g., Network Service or     Local Service).</p> </li> <li> <p>Avoid using admin or high-privilege accounts.</p> </li> </ul>"},{"location":"azure-devops-handbook/configuring-agents-for-azure-pipelines/#recommended-naming-conventions","title":"Recommended naming conventions","text":"<p>Use clear, descriptive names for agents and pools to improve readability.</p> COMPONENT NAMING CONVENTION example AGENT &lt;team or project name&gt;-&lt;agent type&gt; wis-api-self-hosted, welshpas-web-ms-hosted AGENT POOL &lt;team or project name&gt;-&lt;purpose&gt; wis-api-build, welshpas-web-deploy <p>Practical tips</p> <p>When using GitHub Advanced Security allow additional URLs for the self-hosted agent to access data for Dependency Scanning.</p> <p>Further reading and information</p> <p>Deploy an Azure Pipelines agent on Windows - Azure Pipelines | Microsoft Learn</p> <p>Enable TLS 1.2 on clients -- Configuration Manager | Microsoft Learn</p> <p>Allowed address lists and network connections - Azure DevOps | Microsoft Le arn</p> <p>Configure GitHub Advanced Security for Azure DevOps -- Azure Repos | Microsoft Learn</p>"},{"location":"azure-devops-handbook/connecting-defender-for-cloud-devops/","title":"Connecting defender for cloud DevOps","text":"<p>Connecting Azure DevOps to Microsoft Defender for Cloud helps identify and fix security issues. Check with your Organisation Owner and Cyber Security team about potential costs first.</p> <p>The following practices are RECOMMENDED:</p> <ul> <li> <p>Connect to Defender for Cloud: Organisation Owners MAY link       Azure DevOps to Defender for Cloud for security insights. This       will also install the Defender for DevOps Container Mapping       extension to protect containerized applications.</p> </li> <li> <p>Enable Pull Request Annotations: Turn on annotations to       highlight security issues in pull requests, so they can be fixed       before merging.</p> </li> <li> <p>Review Alerts and Recommendations: Regularly review Defender for     Cloud alerts and follow recommendations to reduce risks.</p> </li> </ul> <p>Further reading and information</p> <p>Microsoft Defender for Cloud DevOps Security Benefits | Microsoft Learn</p> <p>Connect Azure DevOps to Defender for Cloud | Microsoft Learn</p> <p>Configure the Security DevOps Extension | Microsoft Learn</p> <p>Microsoft Security DevOps Extension for Azure DevOps | GitHub</p> <p>Enable Pull Request Annotations | Microsoft Learn</p>"},{"location":"azure-devops-handbook/creating-a-new-project/","title":"Creating a new project","text":""},{"location":"azure-devops-handbook/creating-a-new-project/#request-a-new-project","title":"Request a new project","text":"<p>Sometimes you may need to create a new project. Do so by making a request to the Organisation Owner. When creating a new project the following project property settings are RECOMMENDED:</p> PROPERTY VALUE project name: Use the project acronym for shorter URLs. Avoid spaces. description: Provide a clear, searchable project description. visibility: Private version control: Git work item process: Agile <p>Further reading and information</p> <p>Find or look up the organisation owner - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/creating-a-new-project/#assign-project-admins","title":"Assign project admins","text":"<p>Every project SHOULD have two project administrators. A project administrator manages access, configures project settings and customises boards for teams and workflows.</p> <p>Practical tips</p> <p>Project Collection Administrator</p> <p>Depending on your requirements, it might be more suitable to also assign Project Collection Administrators. Speak to the Organisation Owner for more help.</p> <p>Further reading and information</p> <p>Find a project administrator - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/creating-a-new-project/#remove-unused-features","title":"Remove unused features","text":"<p>The Project Administrator SHOULD disable any features or services that are not required.</p> <p>Further reading and information</p> <p>Turn a service on or off - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/creating-a-new-project/#choose-a-project-profile-image","title":"Choose a project profile image","text":"<p>Use a suitable DHCW sub brand logo If you intend to change the Project Profile Image.</p>"},{"location":"azure-devops-handbook/creating-a-new-project/#disable-telemetry-and-data-access","title":"Disable telemetry and data access","text":"<p>You SHOULD disable extensions that send telemetry or access repositories automatically in project settings before using the project.</p>"},{"location":"azure-devops-handbook/creating-and-managing-dashboards/","title":"Creating and managing dashboards","text":"<p>Use dashboards to monitor key metrics like test results, build quality, code coverage and burn-down rates. The following layout is RECOMMENDED:</p> <ul> <li> <p>Top row: Display build metrics for quick visibility of build     status.</p> </li> <li> <p>Middle row: Show test results and code quality metrics to track     code health.</p> </li> <li> <p>Bottom row: Reserve for sprint and team performance metrics.</p> </li> </ul> <p>{IMAGE PLACEHOLDER}</p> <p>Further reading and information</p> <p>Understand dashboards, charts, reports, and widgets - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/data-privacy-and-availability/","title":"Data privacy and availability","text":"<p>Azure DevOps Services includes strong data protection, availability and features:</p> <ul> <li> <p>Data Availability: Continuous access through data redundancy,     even during failures.</p> </li> <li> <p>Service Availability: High uptime with built-in availability     mechanisms.</p> </li> <li> <p>Service Security: Protection against threats and     vulnerabilities.</p> </li> <li> <p>Data Privacy: Compliance with privacy laws and best practices</p> </li> </ul> <p>Further reading and information</p> <p>Data protection overview - Azure DevOps Services | Microsoft Learn</p> <p>Practical tips</p> <p>YOU MUST NOT store Personal Identifiable information (PII) in Azure DevOps!</p>"},{"location":"azure-devops-handbook/defining-and-running-test-cases-with-azure-test-plans/","title":"Defining and running test cases with Azure test plans","text":"<p>You SHOULD follow these practices when defining and running test cases in Azure DevOps:</p> <ul> <li> <p>Create test plans to organise and manage test cases.</p> </li> <li> <p>Link test cases to work items for better tracking.</p> </li> <li> <p>Automate testing to improve consistency and efficiency.</p> </li> <li> <p>Use charts to visualise test results and include them in Test     Summary reports.</p> </li> <li> <p>Regularly review and update test cases to maintain proper coverage.</p> </li> </ul> <p>Practical tips</p> <p>A Visual Studio Test Professional or Azure DevOps Basic + Test Plans subscription is needed to use Azure Test Plans.</p> <p>Further reading and information</p> <p>What are Azure Test Plans? - Azure Test Plans | Microsoft Learn</p> <p>Azure Test Plans documentation - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/enabling-github-advanced-security/","title":"Enabling GitHub advanced security","text":"<p>Enabling GitHub Advanced Security helps you find &amp; fix security issues in your code but does incur extra costs. So, check with your line manager or Organisation Owner before enabling it.</p> <p>The following practices are RECOMMENDED:</p> <ul> <li> <p>Block Secrets on Push: Enable the \"Block secrets on push\"     setting to prevent accidental exposure of secrets in your code.</p> </li> <li> <p>Review and Resolve Flagged Secrets: Address other secrets     flagged by Azure DevOps (even if not blocked). E.g. by moving them     to secure storage like Azure Key Vault.</p> </li> <li> <p>Conducting Dependency Scanning: Add the Dependency Scanning task     to your Azure Pipelines to identify vulnerabilities in third-party     libraries.</p> </li> <li> <p>Code Scanning with CodeQL: Add the CodeQL scanning task to your     pipelines to identify security vulnerabilities and code quality     issues.</p> </li> <li> <p>Microsoft Security DevOps Extension: Install this to use static     analysis tools like ESLint, Checkov, and Terrascan to scan for     vulnerabilities in Azure Pipelines.</p> </li> </ul> <p>Practical tips</p> <p>Security tools may flag valid code (false positives) or miss vulnerabilities (false negatives).</p> <p>Further reading and information</p> <p>Configure GitHub Advanced Security for Azure DevOps features - Azure Repos | Microsoft Learn</p> <p>Implementing GitHub Advanced Security for Azure DevOps (youtube.com)</p>"},{"location":"azure-devops-handbook/essential-good-practice-checklist/","title":"Essential good practice checklist","text":"No. Checklist Item Guide or standard Exceptions 1 You grant only the minimum access level necessary and follow the principle of lease privilege. \u2610 Add Users &amp; Securing your projects 2 You do NOT store Personal Identifiable Information (PII) in Azure DevOps. \u2610 Data privacy and availability 3 You do NOT store controlled document information in a wiki. \u2610 Using Wikis 4 You do NOT publish packages with pre-release tags to organisation feeds. Publishing to shared organisation feeds 5 Projects have at least two Project Administrators \u2610 Assign project admins 6 You disable extensions that send telemetry or access repositories. \u2610 Disable telemetry and data access 7 You remove unused features \u2610 Remove unused features 8 You follow our conventions and naming standards \u2610 All 9 You tag releases and generate automatic release notes \u2610 Package naming conventions 10 You use Semantic Versioning (SemVer 2.0.0). \u2610 How do you version your code? 11 You follow a branching and release strategy \u2610 How do you branch and release? 12 You link work items to git commits. \u2610 Configure repository settings for commit linking 13 You use Azure Pipelines to automate build, test, &amp; deployments \u2610 Automating builds and deployments 14 Deployment to production requires a pre-approval check. \u2610 Core pipeline characteristics 15 You share code using Azure Artifacts \u2610 Sharing code No. Checklist Item Guide or standard Exceptions 16 You use Azure Test Plans to store and manage manual tests \u2610 Defining and Running Test Cases 17 You control and manage costs \u2610 Managing costs"},{"location":"azure-devops-handbook/introduction/","title":"Introduction","text":""},{"location":"azure-devops-handbook/introduction/#purpose","title":"Purpose","text":"<p>This opinionated guide explains how to use Azure DevOps to manage software projects. If you're new to Azure DevOps or DevOps in general, start by reading the Ebook -- 'What is DevOps?'</p> <p>Further reading and information</p> <p>What Is DevOps? - Azure DevOps Succinctly Ebook | Syncfusion</p> <p>And for in-depth training use:</p> <p>Further reading and information</p> <p>Get started with Azure DevOps learning path - Training | Microsoft Learn</p> <p>Build applications with Azure DevOps learning path - Training | Microsoft Learn</p> <p>Deploy applications with Azure DevOps learning path - Training | Microsoft Learn</p> <p>Define and implement continuous integration - Training | Microsoft Learn</p> <p>AZ-400: Design and implement a dependency management strategy - Training | Microsoft Learn</p> <p>AZ-400: Design and implement a release strategy - Training | Microsoft Learn</p> <p>AZ-400: Implement CI with Azure Pipelines and GitHub Actions - Training | Microsoft Learn</p> <p>How Microsoft develops with DevOps - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/introduction/#scope","title":"Scope","text":""},{"location":"azure-devops-handbook/introduction/#in-scope","title":"In-scope","text":"<ul> <li> <p>Good practices for using Azure DevOps core and advanced features.</p> </li> <li> <p>Recommended conventions and naming standards.</p> </li> <li> <p>Good practice checklist.</p> </li> </ul>"},{"location":"azure-devops-handbook/introduction/#out-of-scope","title":"Out-of-scope","text":"<ul> <li> <p>Creating and configuring a new Azure DevOps organisation.</p> </li> <li> <p>Adding external users to Azure DevOps projects and teams.</p> </li> <li> <p>Integrating third-party software.</p> </li> <li> <p>Foundational DevOps topics, such as branching strategies, continuous     integration (CI) and continuous delivery (CD).</p> </li> <li> <p>This guide offers links to detailed resources on Microsoft Learn     rather than provide step-by-step instructions.</p> </li> </ul>"},{"location":"azure-devops-handbook/introduction/#references","title":"References","text":"<ol> <li> <p>Software development handbook</p> </li> <li> <p>How to request and manage software subscriptions </p> </li> <li> <p>Using Source Control</p> </li> <li> <p>RESTful API Design and Build Standards</p> </li> <li> <p>How to Organise Your Software Solution</p> </li> <li> <p>General Coding Standards</p> </li> </ol>"},{"location":"azure-devops-handbook/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions. If a hyperlink is missing, search for the document in our Document Management System.</p>"},{"location":"azure-devops-handbook/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>We use Azure DevOps to manage thousands of tasks, performed daily by hundreds of staff. Following good practice is essential to ensure consistent use across the organisation.</p> <p>This standard is designed to help you plan, build and release software in a way that enables seamless coordination across teams and boundaries.</p>"},{"location":"azure-devops-handbook/joining-an-existing-project/","title":"Joining an existing project","text":"<p>Whether you're new to Azure DevOps or arranging access for others, start with these steps:</p>"},{"location":"azure-devops-handbook/joining-an-existing-project/#find-your-project","title":"Find your project","text":"<p>First, obtain your project URL. If needed, ask a colleague for help. Here are some common URLs:</p> PROJECT URL Description https://dev.azure.com/NHS-Wales-Digital/WCP Welsh Clinical Portal https://dev.azure.com/DHCW-DSPP/ NHS App https://dev.azure.com/NHS-Wales/DMTP Digital Medicines Transformation Portfolio https://dev.azure.com/NHS-Wales-CoE/ M365 Centre of Excellence <p>Practical tips</p> <p>If you need to begin a project, see Creating a Project.</p> <p>Further reading and information</p> <p>Connect to your organisation - Azure DevOps Services | Microsoft Learn</p>"},{"location":"azure-devops-handbook/joining-an-existing-project/#check-you-have-the-right-access-level","title":"Check you have the right access level","text":"<p>Next, check your Access level. Access levels control which Azure DevOps features you can use. If you don't have the right level you may be blocked from using Repos, Pipelines or Test Plans. Contact the Organisation Owner for more help.</p> ACCESS LEVEL FEATURES Stakeholder Limited features for non-dev roles: create and view work items, basic project management; no access to Repos or Pipelines. Basic Full access to Repos, Pipelines and Artifacts. Basic + Test Plans All Basic features plus Azure Test Plans (Test planning, execution and reporting). <p>Practical tips</p> <p>Subscriptions that grant access automatically</p> <p>Visual Studio Professional with GitHub Enterprise \u2192 Basic.</p> <p>GitHub Enterprise Cloud \u2192 Basic.</p> <p>Visual Studio Test Professional \u2192 Basic + Test Plans.</p> <p>Further reading and information</p> <p>How to request and manage software subscriptions</p> <p>Find or look up the organisation owner - Azure DevOps | Microsoft Learn</p> <p>About access levels - Azure DevOps | Microsoft Learn</p> <p>Azure DevOps Basic usage included with GitHub Enterprise - Azure DevOps Blog</p>"},{"location":"azure-devops-handbook/joining-an-existing-project/#verify-access","title":"Verify access","text":"<p>Finally, make sure you have the correct Access permissions. Access permissions control what you can do in a project. Ask a Project Administrator to update your access if needed.</p> <p>Practical tips</p> <p>If you click the project URL without the right access, you may be prompted to request access. Your request will be sent to the project administrator.</p> <p>Further reading and information</p> <p>Find a project administrator - Azure DevOps | Microsoft Learn</p> <p>About permissions and security groups - Azure DevOps | Microsoft Learn</p> <p>Troubleshoot access, permission issues - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/joining-an-existing-project/#additional-steps","title":"Additional steps","text":"<p>If you're committing code to Azure Repos you may need to take some extra steps. See Support &amp; Troubleshooting for more details.</p>"},{"location":"azure-devops-handbook/managing-costs/","title":"Managing costs","text":"<p>To control and optimise costs Organisation Owners SHOULD:</p> <ul> <li> <p>Monitor Azure DevOps costs: Review consumption costs against     your Azure subscription weekly to spot unexpected charges early.</p> </li> <li> <p>Downgrade or remove inactive users: Downgrade inactive users to     Stakeholder after 8 weeks. Remove users who haven't used Azure     DevOps for 6 months.</p> </li> <li> <p>Set a monthly cost threshold: Set alerts for when costs exceed a     threshold and review cost breakdowns in the \\\"Cost Management +     Billing\\\" section of the Azure portal.</p> </li> </ul> <p>Further reading and information</p> <p>Manage paid access for users - Azure DevOps | Microsoft Learn</p> <p>Billing FAQs (Frequently Asked Questions) - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/managing-source-code-with-azure-repos/","title":"Managing source code with Azure repos","text":"<p>Following the practices in this section aligns with Using Source Control, improving traceability, linking work items to code changes, and enhancing code quality.</p> <p>Further reading and information</p> <p>Using Source Control</p>"},{"location":"azure-devops-handbook/managing-source-code-with-azure-repos/#how-do-you-branch-and-release","title":"How do you branch and release?","text":"<p>You have freedom to choose your branching and release strategies, but you SHOULD follow these key practices to maintain simplicity and consistency:</p> <ul> <li> <p>Use feature branches: Develop new features and fix bugs in dedicated branches.</p> </li> <li> <p>Merge through pull requests (PRs): Integrate changes into the main branch using PRs.</p> </li> <li> <p>Keep the main branch clean: Ensure the main branch is functional &amp; up to date.</p> </li> <li> <p>Git Tagging: Tag the release commit to ensure traceability and version identification.</p> </li> </ul>"},{"location":"azure-devops-handbook/managing-source-code-with-azure-repos/#recommended-naming-conventions","title":"Recommended naming conventions","text":"<p>Name Git repositories in lowercase with hyphens. Prefixing with the Azure DevOps project or team name is RECOMMENDED but not required.</p> COMPONENT NAMING CONVENTION examples REPOSITORY Lowercase, hyphens-separated\\ &lt;project-name&gt;:&lt;purpose&gt; wis-api welshpas-web wcp-integration-services TAG &lt;Major&gt;.&lt;Minor&gt;.&lt;Patch&gt; 2.0.0 <p>Use this convention for branch names. You may not need them all, it depends on your strategy.</p> BRANCH TYPE NAMING CONVENTION examples MAIN 'main' main DEVELOP 'develop' develop FEATURE feature/&lt;work-item-number&gt;-&lt;feature-name&gt; feature/450447-add-cors-policy RELEASE release/&lt;version-number&gt; release/2.0.0 BUGFIX bugfix/&lt;issue-number&gt;-&lt;description&gt; bugfix/46627-fix-SMS-Input-Error HOTFIX hotfix/&lt;issue-number&gt;-&lt;description&gt; hotfix/67891-critical-patch <p>Practical tips</p> <ul> <li> <p>Always link branches to corresponding work items,</p> </li> <li> <p>Delete redundant feature branches.</p> </li> </ul>"},{"location":"azure-devops-handbook/managing-source-code-with-azure-repos/#configure-repository-settings-for-commit-linking","title":"Configure repository settings for commit linking","text":"<p>You SHOULD ensure these settings are applied across all branches:</p> <ul> <li> <p>Enable Commit Mention Linking: Automatically link commits to     work items by including the work item ID (e.g., #123) in the commit     message.</p> </li> <li> <p>Ensure Work Item Resolution: Automatically update work item     status based on commit actions.</p> </li> </ul>"},{"location":"azure-devops-handbook/managing-source-code-with-azure-repos/#configure-repository-policies-for-email-validation","title":"Configure repository policies for email validation","text":"<ul> <li>Commit author email validation: Block pushes from emails not     matching .*@wales\\.nhs\\.uk\\$</li> </ul>"},{"location":"azure-devops-handbook/managing-source-code-with-azure-repos/#configure-branch-policies","title":"Configure branch policies","text":"<p>Enable these settings on main and release branches to support effective branching and release:</p> <ul> <li> <p>Require a minimum number of reviewers: Ensure pull requests are     subject to code review.</p> </li> <li> <p>Require linked work items: Ensure pull requests are linked to     work items.</p> </li> <li> <p>Require comments resolution: Address comments before merging     pull requests.</p> </li> <li> <p>Enable Build Validation: Trigger a build pipeline on pull     requests to validate code quality.</p> </li> <li> <p>Add a Code Coverage Status Check: Ensure coverage targets are     met before merging.</p> </li> <li> <p>Set Coverage Thresholds: Define differential (diff) thresholds     in azurepipelines-coverage.yml or .runsettings to match your     Definition of Done.</p> </li> <li> <p>Address Insufficient Coverage: Use the \"Require comments     resolution\" policy to address any insufficient coverage before     merging.</p> </li> <li> <p>Review Coverage Thresholds: Regularly review thresholds to meet     quality standards.</p> </li> </ul> <p>Practical tips</p> <p>Don't obsess over Code Coverage!</p> <p>Use it as a guide but focus on meaningful tests that ensure your code works as expected.</p> <p>Practical tips</p> <p>Set Up Pipelines for Validation and Coverage</p> <p>Configure a build pipeline for validation and code coverage checks, In the next section, we'll show you how to set up pipelines for testing &amp; deployment.</p> <p>Further reading and information</p> <p>Set Git repository settings - Azure Repos | Microsoft Learn</p>"},{"location":"azure-devops-handbook/managing-user-settings/","title":"Managing user settings","text":"<p>Update your profile and interface preferences via the User settings icon in the top right corner. You can also access preview features to stay up to date.</p> <p>Practical tips</p> <p>Set your time zone to (UTC+00:00) Dublin, Edinburgh, Lisbon, London in User Settings &gt; Time and Locale to ensure consistency.</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/","title":"Planning and tracking work with Azure boards","text":"<p>Following the practices described in this section aligns with Software development handbook, helping you deliver incremental changes in time-boxed sprints.</p> <p>Further reading and information</p> <p>Software development handbook</p> <p>Agile Plan and Portfolio Management with Azure Boards - Training | Microsoft Learn</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#backlog-naming-conventions","title":"Backlog naming conventions","text":"<p>The backlog is a list of work to complete. Prioritise work items based on business value, using parent-child relationships to maintain a clear hierarchy.</p> <p>Name items consistently to minimise misunderstandings and support automatic release notes generation. The following conventions are RECOMMENDED:</p> WORK ITEM TITLE CONVENTION examples Epic Use action-oriented verbs to describe a high-level business initiative. Redesign the Authentication Flow for the NHS Wales Patient Portal. FEATURE Use outcome-driven language to describe smaller, deliverable functionality. Implement Multi-Factor Authentication for the NHS Wales Patient Portal login. USER STORY \"As a [persona], I want [something] so that [some reason]\\\" As a user, I want to enter the SMS code I received so I can complete the authentication. TASK Use action-oriented verbs to describe work needed for a user story. Design UI for SMS code entry. BUG Focus on user impact and expected behaviour. Username field doesn't accept input after clicking, preventing login. ISSUE Clearly describe a problem or blocker. Need approval for UI colours. TEST PLAN High-level testing objectives, scope and activities. Validate Multi-Factor Authentication functionality, including SMS code input and error handling. TEST CASE A specific scenario to test. Verify SMS code input field. <p>Further reading and information</p> <p>Use backlogs to manage projects - Azure Boards | Microsoft Learn</p> <p>Create your product backlog in Azure Boards - Azure Boards | Microsoft Learn </p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#refine-user-stories","title":"Refine user stories","text":"<p>Capture requirements in User Stories. When doing so:</p> <ul> <li> <p>Provide a concise description from the user's perspective.</p> </li> <li> <p>Include clear acceptance criteria using Gherkin syntax to define 'done.'</p> </li> </ul> <p>{IMAGE PLACEHOLDER}</p> <p>Further reading and information</p> <p>Manage requirements, Agile - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#link-service-requests","title":"Link service requests","text":"<p>For operational service requests, prefix a work item's title with the request ID and add a link to the request in the 'All Links' tab.</p> <p>Alternatively consider using a custom process template with a Change Reference field. Contact your Organisation Owner for details.</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#match-work-to-the-right-azure-board","title":"Match work to the right Azure board","text":"<p>Use Kanban Boards (Boards &gt; Boards) for continuous or unplanned work and Task Boards (Boards &gt; Sprints) for sprint tracking.</p> <p>Use tags, custom fields or queries to simplify navigation and reduce backlog clutter.</p> <p>Further reading and information</p> <p>Plan and track work in Azure Boards - Azure Boards | Microsoft Lear n</p> <p>Manage columns on your board - Azure Boards | Microsoft Learn</p> <p>Use your board - Azure Boards | Microsoft Learn</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#boards-naming-style-conventions","title":"Boards naming &amp; style conventions","text":"<p>Use these conventions to maintain consistency in how work items are represented:</p> COMPONENT CONVENTION / STYLE examples TAGS Use colours to indicate meaning. Blocked (Red), External Dependency (Blue), Discovery (Yellow) CARD STYLE Priority = 1: Highlight high-priority items in Orange. Priority=1 (Orange) COLUMN NAMING Standardise naming across boards. New, Active, Closed, Test <p>Further reading and information</p> <p>Customize cards on a board - Azure Boards | Microsoft Learn</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#implement-your-definition-of-done","title":"Implement your definition of done","text":"<p>Define shared criteria for each Board column and record it in the 'Definition of Done' field.</p> <p>{IMAGE PLACEHOLDER}</p> <p>Further reading and information</p> <p>Add Definition of Done to a column - Azure Boards | Microsoft Learn</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#set-up-delivery-plans-optional","title":"Set-up delivery plans (optional)","text":"<p>Delivery Plans track work across projects but are NOT RECOMMENDED if using tools like Float.</p> <p>Further reading and information</p> <p>Review team delivery plans in Azure Boards - Azure Boards | Microsoft Learn</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#drive-development-from-work-items","title":"Drive development from work items","text":"<p>Link work items to commits, branches, builds, and releases for better traceability and alignment between code and tasks. See Link Work items to Builds for more details.</p>"},{"location":"azure-devops-handbook/planning-and-tracking-work-with-azure-boards/#track-progress-of-builds-and-releases","title":"Track progress of builds and releases","text":"<p>Add status badges to a repos' README file to indicate code stability.</p>"},{"location":"azure-devops-handbook/project-housekeeping-tasks/","title":"Project housekeeping tasks","text":"<p>Follow these RECOMMENDED practices to keep projects clean and well-organised:</p> <ul> <li> <p>Set artifact retention policies Keep only the latest,     previous and active releases versions to minimise storage     costs.</p> </li> <li> <p>Pipeline run retention: Retain only recent, relevant runs for     debugging. Set retention policies to delete pipeline runs after     30 days.</p> </li> <li> <p>Delete obsolete branches. Remove inactive or redundant branches     to remove clutter.</p> </li> <li> <p>Clean agent pools: Clean stale directories and repositories on     self-hosted agents weekly to avoid disk space issues.</p> </li> <li> <p>Keep agents updated: Enable automatic updates for minor version     changes and manually upgrade for major updates.</p> </li> </ul>"},{"location":"azure-devops-handbook/securing-your-projects/","title":"Securing your projects","text":"<p>You MUST follow these essential practices to ensure robust security:</p> <ul> <li> <p>Review permissions monthly, ensuring access follows the     least-privilege principle.</p> </li> <li> <p>Remove permissions as soon as users no longer need access.</p> </li> <li> <p>Use fine-grained permissions to restrict access to what's necessary.</p> </li> <li> <p>Prefer Federated Identity over Service Connections when     possible.</p> </li> <li> <p>Avoid Personal Access Tokens (PATs) but if used, recycle them     every 90 days.</p> </li> <li> <p>Limit access to the minimum required for each user.</p> </li> </ul> <p>Further reading and information</p> <p>Security best practices - Azure DevOps | Microsoft Learn</p> <p>Other security considerations for Azure Pipelines - Azure Pipelines | Microsoft Learn</p> <p>Delete, remove users from team, project, organisation - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/sharing-code-with-azure-artifacts/","title":"Sharing code with Azure artifacts","text":"<p>Azure Artifacts provide a reliable way to store, version and distribute packages, like Nuget, across the organisation. You SHOULD follow these practices when using Artifacts in your Azure DevOps workflows.</p> <p>Further reading and information</p> <p>What is NuGet and what does it do? | Microsoft Learn</p> <p>Azure Artifacts documentation | Microsoft Learn</p> <p>Omit NuGet Packages in Source Control Systems| Microsoft Learn</p> <p>Project-scoped vs Organisation-scoped feeds - Azure Artifacts | Microsoft Learn</p> <p>Migrate from file shares - Azure Artifacts | Microsoft Learn</p> <p>Configure pipeline permissions - Azure Artifacts | Microsoft Learn </p>"},{"location":"azure-devops-handbook/sharing-code-with-azure-artifacts/#consuming-packages","title":"Consuming packages","text":"<ul> <li> <p>Avoid Public Feeds: Do not pull packages from public sources     like nuget.org. Use a secondary feed, DHCW_Global_Dependencies,     for shared or third-party dependencies.</p> </li> <li> <p>Minimise Duplication: If a package is already in the     organisation feed, do not duplicate it in your local feed. This     saves storage costs and reduces redundancy.</p> </li> <li> <p>Keep Dependencies Updated: Regularly check the     DHCW_Global_Dependencies feed for updates to keep your     dependencies current.</p> </li> <li> <p>Request Access Permissions: If you need access to the     organisation feed, ask the organisation owner to grant the Build     Service User 'Contributor' permissions. The Build Service User is     the account running your Azure pipeline.</p> </li> </ul> <p>Practical tips</p> <p>Granting access to an organisation feed is easier than a project feed, as it doesn't require first granting access to the project.</p> <p>DHCW_Global_Dependencies is hosted in the NHS-Wales-Digital Azure DevOps Organisation but can be used by other Organisations in the same NHS Wales Entra tenant,</p> <p>Further reading and information</p> <p>Restore NuGet packages in Azure Pipelines - Azure Pipelines | Microsoft Learn</p> <p>Find or lookup the organisation owner - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/sharing-code-with-azure-artifacts/#publishing-packages","title":"Publishing packages","text":"<p>Publishing packages to Azure Artifacts helps in:</p> <ul> <li> <p>Sharing secure, maintainable libraries (such as UI components).</p> </li> <li> <p>Distributing validated third-party libraries without pulling from public feeds.</p> </li> </ul> <p>Further reading and information</p> <p>Publish NuGet packages with Azure Pipelines - Azure Pipelines | Microsoft Learn</p>"},{"location":"azure-devops-handbook/sharing-code-with-azure-artifacts/#how-do-you-version-your-code","title":"How do you version your code?","text":"<p>You MUST use Semantic Versioning (SemVer 2.0.0). See the following for more details:</p> <p>Further reading and information</p> <p>Using Source Control</p> <p>RESTful API Design and Build Standards</p> <p>Semantic Versioning 2.0.0 | Semantic Versioning</p>"},{"location":"azure-devops-handbook/sharing-code-with-azure-artifacts/#versioning-conventions","title":"Versioning conventions","text":"COMPONENT NAMING CONVENTION example VERSION FORMAT &lt;Major&gt; .&lt;Minor&gt;.&lt;Patch&gt;[-&lt;prerelease tag&gt;][+&lt;Git commit &gt;] 1.0.0 MAJOR For breaking changes 2.0.0 MINOR Backward-compatible changes. 2.1.0 PATCH Bug Fixes 1.0.1 PRE-RELEASE TAG Optional [-&lt;alpha | beta \\ rc&gt;] 1.0.0-alpha ALPHA Indicates unstable builds. 1.0.0-alpha BETA Feature complete but may contain known bugs. 2.0.0-beta RC Release candidate 2.1.0-rc Git Commit Short Git hash added after +. Identifies the build's source commit. 1.0.0-alp ha+26be44c37e 2.0.0- beta+d8164225 <p>Practical tips</p> <p>Use the Nerdbank.GitVersioning dotnet tool to auto-generate SemVer compliant versions in Azure Pipelines.</p> <p>Use extensions like Generate Release Notes in YAML Pipeline features to auto-generate package release notes.</p> <p>Further reading and information</p> <p>https://github.com/dotnet/Nerdbank.GitVersioning</p>"},{"location":"azure-devops-handbook/sharing-code-with-azure-artifacts/#package-naming-conventions","title":"Package naming conventions","text":"<p>Follow these naming conventions when publishing a package. Publish reusable components the organisation shared feed.</p> COMPONENT NAMING CONVENTION example Organisation feed DHCW_Global_Dependencies DHCW_Global_Dependencies project feed &lt;Project Name&gt; NHS Wales Patient Portal package ID [&lt;DHCW.&gt;]&lt;ProjectName&gt;.&lt;ComponentName&gt; DHCW.PortalUI.Validation Package Version See Publishing Packages: Versioning 1.1.0 AUTHORS Team or developer name Phoenix Portal Team DESCRIPTION A short description for UI display. Validation library for UI components in the NHS Wales Patient Portal. This library..... COPYright Copyright (c) DHCW &lt;Year&gt; Copyright (c) DHCW 2024 Project URL Link to the Azure DevOps project {base}/_git/patient-portal README Include a README markdown file (overview of what the package does) REPOSITORY URL A link to the source repository, including a 'type' attribute (e.g., git). {base}/_git/patient-portal TAGS Comma-separated list of keywords. UI, validation, Portal, .Net RELEASE NOTES Description of changes in this release. New release with added validation for SMS text input."},{"location":"azure-devops-handbook/sharing-code-with-azure-artifacts/#publishing-to-shared-organisation-feeds","title":"Publishing to shared organisation feeds","text":"<p>DHCW_Global_Dependencies (found in the NHS-Wales-Digital) uses only the \\@local feed as the shared repository for stable packages. This simplifies package management.</p> <p>Follow these rules When publishing to a shared feed:</p> <ol> <li> <p>No Pre-releases: Packages with pre-release tags (e.g., -alpha,     -beta, -rc) MUST NOT be published to a shared feed. Use     separate feeds for testing.</p> </li> <li> <p>Stable Versions Only: Ensure packages are fully tested,     reviewed, and stable before publishing.</p> </li> <li> <p>Follow Conventions: Adhere to semantic versioning (e.g., 1.0.0     for stable releases).</p> </li> </ol> <p>Practical tips</p> <p>Automate checks in pipelines to block unstable versions from being published to the shared feed.</p>"},{"location":"azure-devops-handbook/support-and-troubleshooting/","title":"Support and troubleshooting","text":"<p>Azure DevOps requires minimal support, but issues can still arise. Follow these steps to get help:</p>"},{"location":"azure-devops-handbook/support-and-troubleshooting/#general-support","title":"General support","text":"<ul> <li> <p>Check Service Notifications: For updates about issues or     disruptions.</p> </li> <li> <p>Check Microsoft Service Status: Visit Azure DevOps - Status for service updates.</p> </li> <li> <p>Monitor the Developer Channel: Check the Visual Studio Developer Azure DevOps Channel to     upvote relevant issues.</p> </li> <li> <p>Ask a Project Admin: Contact your Project Administrator if you     need further help.</p> </li> <li> <p>Contact the Organisation Owner: For help with unresolved issues,     speak to the Organisation Owner who can raise a support request with     Microsoft.</p> </li> <li> <p>Log a Service Request: If the Organisation Owner is unavailable     or your query is urgent, raise a service request (addressed to the     Corporate Application team). This option is only available to     users of the NHS-Wales-Digital Organisation.</p> </li> </ul> <p>Further reading and information</p> <p>Find or lookup the organisation owner - Azure DevOps | Microsoft Learn</p> <p>Look up a project collection administrator - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/support-and-troubleshooting/#unable-to-clone-large-git-repos","title":"Unable to clone large Git repos","text":"<p>Raise a service request to join the NWI_Zscaler_Allow_AzureDevops Entra group If you need to clone large repos. On approval, choose Update Policy in your zscaler desktop application.</p> <p>In the meantime, work around the issue using these commands:</p> <pre><code>    mkdir *&lt;Repo Name&gt;*\n\n    cd *&lt;Repo Name&gt;*\n\n    git init\n\n    git remote add origin *&lt;Your repo URL&gt;*\n\n    git pull # results in curl 56 failure.\n\n    git pull # succeeds.\n</code></pre>"},{"location":"azure-devops-handbook/support-and-troubleshooting/#fixing-issues-with-ssl-certificates","title":"Fixing issues with SSL certificates","text":"<p>Errors may occur if Git isn't configured to use the Windows Certificate Store for SSL verification:</p> <p>fatal: unable to access 'https://&lt;your-repo-url&gt;': SSL certificate problem: unable to get local issuer certificate</p> <p>fatal: unable to access 'https://&lt;your-repo-url&gt;': schannel CertGetCertificateChain trust error CERT_TRUST_IS_PARTIAL_CHAIN</p> <p>To fix them, run the following command in Git Bash. Alternatively, if you're using Visual Studio set the cryptographic network provider to schannel in the Git settings:</p> <p><code>git config --global http.sslBackend schannel</code></p>"},{"location":"azure-devops-handbook/using-azure-devops-extensions/","title":"Using Azure DevOps extensions","text":"<p>Extensions add extra capabilities but require careful management. Follow these practices to manage them safely:</p> <ul> <li> <p>Evaluate First: Before requesting an extension, evaluate it     using Microsoft's criteria as extensions impact all users once     installed.</p> </li> <li> <p>Request Approval: Consult the Organisation Owner before     requesting a new extension.</p> </li> <li> <p>Avoid Dependency: Do not build critical workflows around     extensions. They are unsupported and may be removed at any time,     even if from Microsoft.</p> </li> <li> <p>Cybersecurity Approval: Obtain approval from Cyber Security for     extensions accessing code repos or exporting telemetry.</p> </li> <li> <p>Disable telemetry: Turn off telemetry and intrusive features.</p> </li> <li> <p>Audit Regularly: Periodically review extensions to ensure       compliance with privacy and security policies.</p> </li> </ul> <p>Practical tips</p> <p>The Organisation Owner may notify you of new extensions via banner notifications.</p> <p>Further reading and information</p> <p>Extensions overview - Azure DevOps | Microsoft Learn</p> <p>Extensions for Visual Studio family of products | Visual Studio Marketplace</p> <p>Find or look up the organisation owner - Azure DevOps | Microsoft Learn</p>"},{"location":"azure-devops-handbook/using-wikis/","title":"Using wikis","text":"<p>You MAY use Azure DevOps Wikis to record project information and decisions, but you MUST NOT use them for information that should be stored in a controlled document.</p> <p>Further reading and information</p> <p>Create a project wiki to share information - Azure DevOps | Microsoft Learn</p> <p>Share knowledge within teams - Training | Microsoft Learn</p>"},{"location":"coding-standard-template/exceptions-prove-the-rule/","title":"Exceptions prove the rule","text":"<p>As with most standards, there are occasions when it's unwise to follow \"hard and fast\" rules.</p> <p>Principal and Lead software developers have discretion to do so but this should be the exception rather than the rule.</p>"},{"location":"coding-standard-template/good-practice-checklists/","title":"Good practice checklists","text":"<p>&lt;ADD TEXT AS NECESSARY&gt;</p>"},{"location":"coding-standard-template/good-practice-checklists/#use-a-brief-header-to-describe-the-checklist","title":"&lt;use a brief header to describe the checklist&gt;","text":"Item Guide or Standard Exceptions 1 &lt;ADD AS MANY CHECKLIST ITEMS AS NEEDED. WRITE THESE IN THE AFFIRMATIVE, RATHER THAN POSING THEM AS A QUESTION&gt; \u2610 &lt;ADD A HYPERLINK TO THE STANDARD(S) YOU DESCRIBE IN SECTION 7) &lt;ADD AS NEEDED&gt;"},{"location":"coding-standard-template/introduction/","title":"Introduction","text":""},{"location":"coding-standard-template/introduction/#purpose","title":"Purpose","text":"<ul> <li>&lt;BRIEFLY DESCRIBE THE PURPOSE OF HAVING A STANDARD&gt;</li> </ul>"},{"location":"coding-standard-template/introduction/#scope","title":"Scope","text":"<ul> <li>&lt;OUTLINE THE SCOPE, WHAT'S INCLUDED, WHAT IS NOT&gt;</li> </ul>"},{"location":"coding-standard-template/introduction/#references","title":"References","text":"INDEX NUMBER DOCUMENT NAME &lt;ADD DOCUMENT REFERENCES AND VERSION NUMBERS AS REQUIRED&gt;"},{"location":"coding-standard-template/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions</p>"},{"location":"coding-standard-template/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>&lt;BRIEFLY DESCRIBE WHY THE STANDARD IS REQUIRED&gt;</p>"},{"location":"coding-standard-template/use-a-brief-heading-to-describe-the-standards/","title":"&lt;use a brief heading to describe the standard(s)&gt;","text":"<p>&lt;DESCRIBE THE STANDARD&gt;</p>"},{"location":"coding-standard-template/use-a-brief-heading-to-describe-the-standards/#add-subheadings-if-necessary","title":"&lt;add subheading(s) if necessary&gt;","text":"<p>&lt;ADD ANY ADDITIONAL TEXT AS NECESSARY&gt;</p> <p>&lt;USE THE BELOW TO PROVIDE ANY RELEVANT EXAMPLES&gt;</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Practical tips</p> <p>&lt;ADD ANY PRACTICAL TIPS YOU FEEL ARE PERTINENT&gt;</p> <p>Further reading and information</p> <p>&lt;ADD LINKS TO FURTHER INFROMATION AS REQUIRED. IF ADDING LINKS TO MICROSOFT DOCS, BE MINDFUL TO USE THE GB VERSION WHERE POSSIBLE.&gt;</p>"},{"location":"general-coding-standards/analyse-your-code/","title":"Analyse your code","text":""},{"location":"general-coding-standards/analyse-your-code/#create-a-plan","title":"Create a plan","text":"<p>You MUST conduct code analysis and address the issues you find. Doing this in both your IDE and build &amp; integration pipelines will improve your code, making it easier to maintain, faster, and more secure.</p> <p>Code analysis can be complex, but this section outlines the steps you SHOULD follow. Create a tailored plan for your team that you regularly review and improve.</p> <p>Practical tips</p> <p>Use Redgate SQL Prompt to evaluate T-SQL. See the T-SQL coding standard for help.</p> <p>Further reading and information</p> <p>T-SQL Coding Standard</p> <p>What is Static Analysis? An Explanation for Everyone - NDepend</p> <p>Enabling High-Quality Code in .NET | Milan Milanovi\u0107 (milanovic.org)</p>"},{"location":"general-coding-standards/analyse-your-code/#calculate-code-metrics-to-spot-problems","title":"Calculate code metrics to spot problems","text":"<p>Calculate code metrics for each project in your solution and address any that exceed acceptable limits. The table below shows RECOMMENDED levels for each metric.</p> Maintainability Index Cyclomatic Complexity Depth of Imheritance Class Coupling Lines of Executable code 20 - 100 &lt; 7 &lt; 5 &lt; 9 &lt; 40"},{"location":"general-coding-standards/analyse-your-code/#calculate-code-coverage","title":"Calculate code coverage","text":"<p>Calculate test coverage and use the results to identify areas for improvement.</p> <p>Generate and publish a code coverage report in your pipelines.</p> <p>Practical tips</p> <p>Aim to cover a large portion of your code with tests. But prioritise integration tests for areas prone to regressions. This may prove more effective than having unit tests for every method.</p> <p>Note: Visual Studio's code coverage feature is available only in the Enterprise edition.</p> <p>Further reading and information</p> <p>Calculate code metrics - Visual Studio (Windows) | Microsoft Learn</p> <p>Selective Unit Testing -- Costs and Benefits (stevensanderson.com)</p> <p>Use code coverage for unit testing - .NET | Microsoft Learn</p> <p>Code coverage testing - Visual Studio (Windows) | Microsoft Learn</p> <p>Publish Code Coverage Results task - Azure Pipelines | Microsoft Learn</p> <p>Exercise - Perform code coverage testing - Training | Microsoft Learn</p>"},{"location":"general-coding-standards/analyse-your-code/#check-code-for-style-and-quality","title":"Check code for style and quality","text":"<p>Ensure your code follows the style (naming, layout, language) and quality conventions described or referenced in this document.</p>"},{"location":"general-coding-standards/analyse-your-code/#code-style-options-and-analyser-rules","title":"Code Style Options and Analyser Rules","text":"<p>Visual Studio offers a code style options box and Roslyn analyser code style rules. With newer versions of Visual Studio and the .NET SDK, you can run these rules at build time.</p> <p>Use the dotnet format tool in your build and integration pipelines to check for code style. See later in this section for details.</p>"},{"location":"general-coding-standards/analyse-your-code/#use-roslyn-analysers-to-ensure-net-code-quality","title":"Use roslyn analysers to ensure .NET code quality","text":"<p>Use Roslyn compiler analysers to check .NET code for style, quality, maintainability and other issues. They are available from Microsoft and third-party providers.</p> <p>How Roslyn Analysers work:</p> <ul> <li> <p>Design-Time Analysis: Analysers run on open files in the IDE,     providing immediate feedback.</p> </li> <li> <p>Build-Time Analysis: Can be configured to run during builds to     enforce consistent standards.</p> </li> </ul> <p>Use NuGet packages to integrate analysers directly in your code. Avoid relying solely on IDE-specific tools like Visual Studio extensions, ReSharper and SonarQube.</p>"},{"location":"general-coding-standards/analyse-your-code/#default-analysers-in-net-sdks","title":"Default Analysers in .NET SDKs","text":"<p>The latest .NET SDKs include many Roslyn analysers pre-installed. The image below shows the analysers available when creating an ASP.NET project targeting .NET 8.0 in Visual Studio.</p> <p>If using older SDKs, add analysers like Microsoft.CodeAnalysis.NetAnalyzers NuGet package.</p> <p>Figure 1 Use Roslyn analysers to check your code</p> <p>{IMAGE PLACEHOLDER}</p>"},{"location":"general-coding-standards/analyse-your-code/#third-party-analysers","title":"Third-party Analysers","text":"<p>Include a security analyser, such as SonarAnalyzer.CSharp or SecurityCodeScan.VS2019. For assistance, ask the Software Development Manager or Cyber Security team.</p>"},{"location":"general-coding-standards/analyse-your-code/#enabling-rules","title":"Enabling Rules","text":"<p>Roslyn analysers allow you to configure specific rules. In a .NET 6.0+ project, created with Visual Studio, only a few rules are enabled by default. Enable all relevant rules, disabling only those that produce false positives or are not relevant.</p> <p>Practical tips</p> <p>Introducing Code Analysis: Enabling code analysis with all rules on a large codebase can be overwhelming. Start with a few rules and gradually add more until all are enabled.</p> <p>Important: Code analysis may slow down your development environment. Balance error detection with productivity. Consider running resource-intensive analysis in build or integration pipelines.</p> <p>Further reading and information</p> <p>Seven reasons that Roslyn-based Code Analysers are awesome | Tom Wrights Code (tdwright.co.uk)</p> <p>The .NET Compiler Platform SDK (Roslyn APIs) | Microsoft Learn</p> <p>Code analysis documentation - Visual Studio (Windows) | Microsoft Learn</p> <p>Code analysers for .NET Framework | Microsoft Learn</p> <p>Legacy analysis for managed code - Visual Studio (Windows) | Microsoft Learn</p> <p>Retrofitting code analysis to legacy projects -- (tdwright.co.uk)</p> <p>Understanding the impact of Roslyn Analysers on build time - Meziantou's blog</p> <p>Favourite code analysis tools for .NET Core devs on Azure (zimmergren.net)</p> <p>Roslyn Team analysers</p> <p>NuGet Gallery | Microsoft.CodeAnalysis.NetAnalyzers 9.0.0</p> <p>NuGet Gallery | Roslyn Team</p> <p>Roslynator</p> <p>NuGet Gallery | Roslynator.Analyzers 4 .12.10</p> <p>xUnit</p> <p>NuGet Gallery | xunit.analyzers 1.19.0</p> <p>Style Cop</p> <p>NuGet Gallery | StyleCop.Analyzers 1.1.118</p> <p>Security source code analysers</p> <p>NuGet Gallery | SonarAnalyzer.CSharp 10.5.0. 109200</p> <p>Static analysers - Training | Microsoft Learn</p> <p>NuGet Gallery | SecurityCodeScan.VS2019 5.6.7</p> <p>Source Code Security Analysers | NIST</p> <p>Source Code Analysis Tools | OWASP Foundation</p> <p>Code analysis | ReSharper (jetbrains.com) ASP.NET analysers</p> <p>Code analysis in ASP.NET Core apps | Microsoft Learn</p> <p>Analysers for ASP.NET Core in .NET 6 (andrewlock.net)</p> <p>ReSharper</p> <p>Code analysis | ReSharper (jetbrains.com)</p>"},{"location":"general-coding-standards/analyse-your-code/#configure-code-analysis-rules","title":"Configure code analysis rules","text":"<p>Follow these steps when configuring code analysis:</p> CONFIGURATION STEP Details ADD AN .editorconfig FILE Place in the root of your solution and commit to source control to ensure consistent settings across the team. SET-UP INITIAL RULES Generate settings using Visual Studio's code style options or a template (see further reading). Adjust rules to align with team or organisational conventions. DEFINE RULE SEVERITY Set critical rules to error to ensure violations fail the build. Configure the Directory.build.props or .csproj files (SDK-style projects) to enable style and quality checks during builds. ENFORCE CODE STYLE Enforce code style checks during builds where your .NET version supports it. APPLY GOOD PRACTICE Treat warnings as errors to promote higher code quality. <p>Practical tips</p> <p>Be mindful of the challenges with .editorconfig, including known Visual Studio UI limitations. Read this blog before you start! --</p> <p>C# code style by EditorConfig in .NET 5 SDK and beyond | Mews Developers</p> <p>You MAY develop team-specific styles if the provided conventions don't meet your needs.</p> <p>.editorconfig</p> <p>How to enforce a consistent coding style in your projects - Meziantou's blog</p> <p>EditorConfig</p> <p>Code style options and code cleanup - Visual Studio (Windows) | Microsoft Learn</p> <p>Enforce code style rules - Visual Studio (Windows) | Microsoft Learn</p> <p>.NET code style rule options - .NET | Microsoft Learn</p> <p>C# editor formatting options - Visual Studio (Windows) | Microsoft Learn</p> <p>.editorconfig templates</p> <p>EditorConfig settings - Visual Studio (Windows) | Microsoft Learn</p> <p>project-system/.editorconfig at main \u00b7 dotnet/project-system \u00b7 GitHub</p> <p>roslyn/.editorconfig at main \u00b7 dotnet/roslyn \u00b7 GitHub</p> <p>.csproj config</p> <p>Code Analysis: MSBuild properties for Microsoft.NET.Sdk - .NET | Microsoft Learn</p> <p>Enable NET Analyzers: MSBuild properties for Microsoft.NET.Sdk - .NET | Microsoft Learn</p> <p>C# Compiler Options - errors and warnings | Microsoft Learn</p>"},{"location":"general-coding-standards/analyse-your-code/#run-code-analysis-in-your-pipelines-as-well-as-the-ide","title":"Run code analysis in your pipelines as well as the IDE","text":"<p>Run code analysis during builds catch issues early, using tools like MSBuild &amp; dotnet format.</p> <p>Further reading and information</p> <p>Enforce .NET code style in CI with dotnet format - Meziantou's blog</p>"},{"location":"general-coding-standards/analyse-your-code/#check-third-party-packages","title":"Check third-party packages","text":"<p>Check for vulnerabilities and licence issues in third-party dependencies by integrating tools like GitHub Advanced Security for Azure DevOps.</p> <p>Further reading and information</p> <p>Azure DevOps handbook</p> <p>Software Composition Analysis - Training | Microsoft Learn</p>"},{"location":"general-coding-standards/analyse-your-code/#publish-and-review-metrics","title":"Publish and review metrics","text":"<p>Track code health by publishing metrics from analysis tasks to server dashboards.</p> <p>Regularly review these metrics and address problem areas to maintain quality.</p> <p>Further reading and information</p> <p>Azure DevOps handbook</p> <p>Generate code metrics from the IDE or command line - Visual Studio (Windows) | Microsoft Learn </p> <p>Publish Code Coverage Results task - Azure Pipelines | Microsoft Learn</p> <p>Exercise - Perform code coverage testing - Training | Microsoft Learn</p>"},{"location":"general-coding-standards/analyse-your-code/#recap","title":"Recap","text":"<p>Recap: Analyse your code</p> <ol> <li> <p>Create a plan.</p> </li> <li> <p>Calculate code metrics.</p> </li> <li> <p>Calculate code coverage.</p> </li> <li> <p>Check for code style and quality.</p> </li> <li> <p>Use Roslyn analysers.</p> </li> <li> <p>Configure code analysis rules.</p> </li> <li> <p>Run code analysis in your build pipelines.</p> </li> <li> <p>Check third party packages.</p> </li> <li> <p>Publish metrics.</p> </li> </ol>"},{"location":"general-coding-standards/essential-good-practice-checklist/","title":"Essential good practice checklist","text":"Item Guide or standard Exceptions 1 Your code is terse, expressive and underpinned with coded tests. \u2610 Write clean code - 2 Classes follow SOLID principles. \u2610 Follow SOLID principles - 3 You follow Microsoft's C# coding conventions and Framework Design Guidelines. \u2610 Follow Microsoft's coding conventions Unless you have agreed to follow a local coding standard. 4 You handle exceptions and use defensive coding techniques. \u2610 Exception handling and defensive coding - 5 You calculate code metrics. \u2610 Calculate code metrics 6 You calculate code coverage. \u2610 Calculate code coverage 7 You analyse code for style and quality. \u2610 Check code for style and quality 8 You analyse code for security vulnerabilities. \u2610 Analyse your code 9 You share your analysis rules in source control. \u2610 Analyse your code 10 You perform code analysis in build pipelines. \u2610 Run code analysis in your pipelines 11 You check third party dependencies for security vulnerabilities. \u2610 Check third-party packages 12 You publish metrics to your dashboards. \u2610 Publish and review ,metrics"},{"location":"general-coding-standards/examples/","title":"Examples","text":""},{"location":"general-coding-standards/examples/#unnecessary-using-statements","title":"Unnecessary using statements","text":"<p>Examples of practices to avoid</p> <pre><code>    namespace Example\n    {\n        using System;\n        using System.Collections.Generic;\n\n        internal class BadClass\n        {\n            static void Main(string[] args)\n            {\n                Console.WriteLine(\u201cI'm using statements unnecessarily!\u201d);\n                Console.WriteLine(\u201cI'm bad, shamone!\u201d);\n            }\n        }\n    }\n</code></pre> Rule ID Rule Title IDE0005 Using directive is unnecessary."},{"location":"general-coding-standards/examples/#use-our-namespace-conventions","title":"Use our namespace conventions","text":"<p>Examples of good practice</p> <p><code>NhsWales.Wcp.Portal</code></p> <p>Examples of practices to avoid</p> <p><code>DHCW.Wis.Reports</code></p>"},{"location":"general-coding-standards/examples/#consider-your-use-of-var","title":"Consider your use of var","text":"<p>Examples of good practice</p> <pre><code>    var patient = new Patient();\n\n    Patient myPatient = new Patient();\n</code></pre> <p>Examples of practices to avoid</p> <p><code>var patientCount = Ward.getPatientCount();</code></p> <p>Examples of good practice</p> <p><code>int patientCount = Ward.getPatientCount();</code></p> <p>Examples of practices to avoid</p> <p><code>var myPatient = Demographics.getPerson(NHSNumber);</code></p> <p>Examples of good practice</p> <p><code>Person myPatient = Demographics.getPerson(NHSNumber);</code></p>"},{"location":"general-coding-standards/examples/#name-parameters","title":"Name parameters","text":"<p>Examples of good practice</p> <p><code>var permissions = getUsersAccessPermissions(\"ge000001\", isLoggedIn: true);</code></p> <p>Examples of practices to avoid</p> <p><code>var permissions = getUsersAccessPermissions(\"ge000001\", true);</code></p> <p>Practical tips</p> <p>Enable Visual Studio's inline parameter hints to show argument names before function call arguments</p>"},{"location":"general-coding-standards/examples/#prioritise-readability-over-brevity","title":"Prioritise readability over brevity","text":"<p>Examples of practices to avoid</p> <p><code>SearchOnUserName(string id);</code> <code>SearchOnUsersFullName(string nadexID);</code></p> <p>Examples of good practice</p> <p><code>SearchOnUsersFullName(string activeDirectoryUserId);</code></p>"},{"location":"general-coding-standards/examples/#use-underscores-only-in-unit-test-names","title":"Use underscores only in unit test names","text":"<p>Examples of good practice</p> <p><code>SearchOnUsersFullName_ValidActiveDirectoryUserIdProvided\\_ReturnsUsersFullName()</code></p> <p>Examples of practices to avoid</p> <p><code>Search_On_UsersFullName(string activeDirectoryUserId);</code></p>"},{"location":"general-coding-standards/examples/#ensure-boolean-names-are-phrased-as-questions","title":"Ensure boolean names are phrased as questions","text":"<p>Examples of good practice</p> <p><code>bool IsTrue;</code></p> <p>Examples of practices to avoid</p> <p><code>bool condtionChecker;</code></p> <p>Examples of good practice</p> <p><code>bool IsOpen;</code></p> <p>Examples of practices to avoid</p> <p><code>bool open;</code></p> <p>Examples of good practice</p> <p><code>bool IsActive;</code></p> <p>Examples of practices to avoid</p> <p><code>bool status;</code></p>"},{"location":"general-coding-standards/examples/#use-prefixes-and-suffixes-only-when-specified-by-conventions","title":"Use prefixes and suffixes only when specified by conventions","text":"<p>Examples of practices to avoid</p> <pre><code>    string strActiveDirectoryUserId;\n\n    int iPatientCount;\n\n    var iPatientCount;\n\n    GetUsersFullName(string p_activeDirectoryUserId);\n</code></pre> <p>Examples of good practice</p> Prefix Usage Language I Interface definitions C# T Generic Type definitions. Simply use T if only one Type is defined. C# T Type definitions Delphi P Pointers to Type definitions Delphi A Use to distinguish parameters with the same name as private member variables. Delphi"},{"location":"general-coding-standards/examples/#using-braces","title":"Using braces","text":"<p>Examples of practices to avoid</p> <pre><code>    if (isLoggedIn)\n        DisplayHomePage();\n\n    if (isLoggedIn) DisplayHomePage();\n</code></pre> <p>Examples of good practice</p> <pre><code>    if (isLoggedIn)\n    {\n        DisplayHomePage();\n    }\n\n    if (isLoggedIn) { DisplayHomePage(); }\n</code></pre> Rule ID Rule Title IDE0011 Add braces to 'if' statement."},{"location":"general-coding-standards/examples/#code-comments","title":"Code comments","text":"<p>{IMAGE PLACEHOLDER}</p>"},{"location":"general-coding-standards/exceptions/","title":"Exceptions","text":"<p>While there may be reasons to deviate from this guide, exceptions should be rare and carefully considered.</p> <p>Practical tips</p> <p>Discuss with colleagues and hold code reviews to ensure a shared understanding of our standards.</p> <p>Further reading and information</p> <p>Giving code a good name - Kevlin Henney - YouTu be</p> <p>Clean Coders Hate What Happens to Your Code When You Use These Enterprise Programming Tricks - YouTu be</p> <p>Seven ineffective coding habits of many programmers - Kevlin Henney - YouTu be</p> <p>Uses and misuses of implicit typing | Microsoft Learn</p>"},{"location":"general-coding-standards/follow-microsofts-coding-conventions/","title":"Follow microsoft's coding conventions","text":"<p>Follow Microsoft's C# coding conventions and Framework Design Guidelines. There are a couple of exceptions, but we make these clear.</p> <p>Practical tips</p> <p>If the conventions described here do not meet your team's needs and you want to create your own, please speak to the Software Development Manager.</p>"},{"location":"general-coding-standards/follow-microsofts-coding-conventions/#naming","title":"Naming","text":"<p>You SHOULD:</p> <ul> <li> <p>Follow Microsoft's naming conventions, considering our additional     guidance.</p> </li> <li> <p>Use Attribute and Exception suffixes only when they clarify intent.</p> </li> <li> <p>Apply Roy Osherove's naming convention for tests, allowing     underscores. See our examples.</p> </li> <li> <p>Use NhsWales for the company name in namespaces. See examples.</p> </li> <li> <p>Name booleans to reflect true/false questions. See examples.</p> </li> </ul> <p>You SHOULD NOT:</p> <ul> <li> <p>Use \"And\", \"Or\" or generic terms like \"Util\" or \"Common\" in     class names.</p> </li> <li> <p>Add prefixes or suffixes except where standard conventions apply.       See our examples.</p> </li> </ul> <p>Further reading and information</p> <p>C# Naming Conventions | Microsoft Learn</p> <p>Naming Guidelines - Framework Design Guidelines | Microsoft Learn</p> <p>Capitalisation Conventions - Framework Design Guidelines | Microsoft Learn</p> <p>General Naming Conventions - Framework Design Guidelines | Microsoft Learn</p> <p>Names of Assemblies and DLLs - Framework Design Guidelines | Microsoft Learn</p> <p>Names of Namespaces - Framework Design Guidelines | Microsoft Learn</p> <p>Names of Classes, Structs, and Interfaces - Framework Design Guidelines | Microsoft Learn</p> <p>Names of Type Members - Framework Design Guidelines | Microsoft Learn</p> <p>Naming Parameters - Framework Design Guidelines | Microsoft Learn</p> <p>Naming Resources - Framework Design Guidelines | Microsoft Learn</p>"},{"location":"general-coding-standards/follow-microsofts-coding-conventions/#layout","title":"Layout","text":"<p>You SHOULD:</p> <ul> <li> <p>Follow Microsoft's layout conventions.</p> </li> <li> <p>Use continuation lines to avoid excessive scrolling and indent with     four spaces.</p> </li> <li> <p>Indent wrapped statements to keep logically related segments     aligned.</p> </li> <li> <p>Use whitespace effectively to enhance readability.</p> </li> <li> <p>Insert empty lines to separate code blocks.</p> </li> <li> <p>Align curly braces vertically.</p> </li> </ul> <p>For C#, place each curly brace on a new line, aligned with the start of the code block.</p> <p>For JavaScript and Razor, place the opening curly brace on the same line as the construct to prevent issues with automatic semicolon insertion. Exceptions apply in specific cases.</p> <p>You SHOULD NOT:</p> <ul> <li> <p>Use unnecessary vertical whitespace -- and so prevent extra     scrolling.</p> </li> <li> <p>Overuse indentation.</p> </li> <li> <p>Omit optional curly braces, as this increases error risk. Use them       judiciously when it improves readability. See examples.</p> </li> </ul> <p>Further reading and information</p> <p>C# Layout Conventions | Microsoft Learn</p>"},{"location":"general-coding-standards/follow-microsofts-coding-conventions/#comments","title":"Comments","text":"<p>You SHOULD:</p> <ul> <li> <p>Follow Microsoft's commenting conventions.</p> </li> <li> <p>Use comments to explain the problem your code solves, not the code       itself.</p> </li> <li> <p>Write expressive, readable code.</p> </li> <li> <p>Prefer automated tests rather than rely on code comments or       excessive documentation.</p> </li> <li> <p>Remove unused code instead of commenting it out. See       examples.</p> </li> <li> <p>Add comments to code commits, following the Conventional Commits       specification.</p> </li> <li> <p>Use well-named automated tests as part of your documentation (see       naming guidelines).</p> </li> <li> <p>Use enumerations to self-document code and make it searchable in       Visual Studio.</p> </li> <li> <p>Ensure comments are grammatically correct and properly punctuated.</p> </li> </ul> <p>You SHOULD NOT:</p> <ul> <li> <p>Comment to explain how C# or the .NET Class Library works.</p> </li> <li> <p>Add unnecessary or redundant comments. For example, at the top of       methods or classes. Provide a concise summary instead.</p> </li> </ul> <p>Further reading and information</p> <p>.NET Coding Conventions - C# - comment style | Microsoft Learn</p> <p>Conventional Commits</p>"},{"location":"general-coding-standards/follow-microsofts-coding-conventions/#variables-and-parameters","title":"Variables and parameters","text":"<p>You SHOULD:</p> <ul> <li> <p>Declare C# variables close to where they are used.</p> </li> <li> <p>Initialize variables at the point of declaration, when possible.</p> </li> <li> <p>Declare JavaScript variables at the top of their scope and consider       using 'strict mode' to prevent hoisting.</p> </li> <li> <p>Order parameters consistently.</p> </li> <li> <p>Use named parameters to improve code readability. See examples.</p> </li> <li> <p>Avoid methods with more than three parameters.</p> </li> </ul> <p>You SHOULD NOT:</p> <ul> <li>Declare all variables at the beginning of a class out of habit.</li> </ul> <p>Further reading and information</p> <p>Member Design Guidelines - Framework Design Guidelines | Microsoft Learn</p> <p>Understanding Hoisting in JavaScript | DigitalOcean</p>"},{"location":"general-coding-standards/follow-microsofts-coding-conventions/#conditionals-and-control-flow-statements","title":"Conditionals and control flow statements","text":"<p>You SHOULD:</p> <ul> <li> <p>Define conditionals in the positive (see examples).</p> </li> <li> <p>Prefer constants or enumerations over hard-coded numerical values     ('magic numbers'). Use named constants to improve readability.</p> </li> <li> <p>Order case/switch statements logically and always include a default     statement.</p> </li> <li> <p>Ensure conditionals are clear and easy to understand.</p> </li> <li> <p>Minimise nested conditionals where possible.</p> </li> </ul> <p>Practical tips</p> <p>Where practical, place enumerations in a namespace in their own code file.</p> <p>Further reading and information</p> <p>C# static code analysis- Magic numbers should not be used</p>"},{"location":"general-coding-standards/follow-microsofts-coding-conventions/#exception-handling-and-defensive-coding","title":"Exception handling and defensive coding","text":"<p>You SHOULD:</p> <ul> <li> <p>Implement a global exception handler.</p> </li> <li> <p>Move complex code out of try blocks into separate methods.</p> </li> <li> <p>Handle exceptions locally, when possible, but avoid catching     unresolvable exceptions -- let them bubble up to the global handler.</p> </li> <li> <p>Log exceptions with relevant details, including stack trace and     context.</p> </li> <li> <p>Use guard clauses to validate inputs early.</p> </li> <li> <p>Use multiple return statements to avoid deep indentation.</p> </li> <li> <p>Avoid silent exceptions -- always log or rethrow as needed.</p> </li> <li> <p>Catch specific, rather than generic, exceptions for precise     handling.</p> </li> <li> <p>Test exception handling to ensure proper behaviour, especially in edge cases.</p> </li> </ul> <p>Further reading and information</p> <p>Best Practices for exceptions - .NET | Microsoft Learn</p>"},{"location":"general-coding-standards/follow-solid-principles/","title":"Follow SOLID principles","text":"<p>Following SOLID principles decouples code from dependencies, improving testability and maintainability. You SHOULD:</p> <ul> <li> <p>Apply SOLID principles for object-oriented programming.</p> </li> <li> <p>Ensure classes and methods have a single responsibility.</p> </li> <li> <p>Code to interfaces where appropriate.</p> </li> <li> <p>Use Inversion of Control (IoC) and IoC containers to decouple implementations.</p> </li> </ul> <p>Further reading and information</p> <p>Class design guidelines for .NET - Framework Design Guidelines | Microsoft Learn</p>"},{"location":"general-coding-standards/introduction/","title":"Introduction","text":""},{"location":"general-coding-standards/introduction/#purpose","title":"Purpose","text":"<p>Describes the general coding standard for the Operations and Primary Care &amp; Mental Health directorates.</p>"},{"location":"general-coding-standards/introduction/#scope","title":"Scope","text":""},{"location":"general-coding-standards/introduction/#in-scope","title":"In-scope","text":"<ul> <li> <p>Software development within the Operations and Primary Care and     Mental Health directorates.</p> </li> <li> <p>Recommended conventions and naming standards.</p> </li> <li> <p>Good practice checklist.</p> </li> </ul>"},{"location":"general-coding-standards/introduction/#out-of-scope","title":"Out-of-scope","text":"<ul> <li>Developers not using C#.NET may need to adapt this guide or follow a     local coding standard.</li> </ul>"},{"location":"general-coding-standards/introduction/#references","title":"References","text":"<ol> <li>T-SQL Coding Standard</li> <li>Azure DevOps handbook</li> </ol>"},{"location":"general-coding-standards/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions. If a hyperlink is missing, search for the document in our Document Management System.</p>"},{"location":"general-coding-standards/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>Use this standard to:</p> <ul> <li> <p>Write consistent code, making it easier to understand.</p> </li> <li> <p>Create software that is maintainable, efficient, and secure.</p> </li> </ul>"},{"location":"general-coding-standards/write-clean-code/","title":"Write clean code","text":"<p>Your code SHOULD:</p> <ul> <li> <p>Be concise, expressive and focused on doing one thing well.</p> </li> <li> <p>Use short methods (20-40 lines) with a single purpose.</p> </li> <li> <p>Include written tests, be self-documenting and easy to read.</p> </li> <li> <p>Have classes with high cohesion, containing clearly related methods that share class properties.</p> </li> <li> <p>Prefer using or import statements instead of fully qualified type names.</p> </li> </ul> <p>Your code SHOULD NOT:</p> <ul> <li>Contain unused using (Java) or import (C#) statements.</li> </ul> <p>Practical tips</p> <p>Use the using static directive (C#6) to ensure method names are prefixed with their class for clarity.</p> <p>Consider global using directives and implicit usings to reduce clutter and improve readability.</p> <p>Further reading and information</p> <p>Create readable code with conventions, whitespace, and comments in C# - Training | Microsoft Learn</p> <p>Welcome to C# 10 - .Net Blog (Microsoft.com)</p>"},{"location":"organising-your-solution/create-a-editorconfig-file/","title":"Create a .editorconfig file","text":"<p>You SHOULD share your configuration by adding an. editorconfig file to the root of your solution, making sure to add it to source control. For more details, see our General coding standard (v4 or later).</p>"},{"location":"organising-your-solution/create-a-root-folder-for-your-solution/","title":"Create a root folder for your solution (./&lt;rootfoldername&gt;)","text":"<p>You SHOULD place your solution file in a root folder. Doing so makes it easy for others to clone a repo and open the file to get started. The rest of the software project lives within this root folder.</p> <p>Provide a sensible name, using the name of the git repo or the solution file.</p> <p>Practical tips</p> <p>If the RootFolderName does not describe the project, replace it with something more accurate and understandable.</p> <p>Do this before you commit to source control. In doing so you avoid the need for communicating a change and making source control work overtime after the initial commit.</p>"},{"location":"organising-your-solution/create-a-source-folder/","title":"Create a source folder (./&lt;rootfoldername&gt;/src)","text":"<p>You SHOULD store all projects that have a definable output release (for example, web, desktop, mobile or general library projects) in a source folder, named src.</p>"},{"location":"organising-your-solution/create-a-specification-folder/","title":"Create a specification folder (./&lt;rootfoldername&gt;/specs)","text":"<p>You SHOULD store test projects and any specifications you consider valuable in a specification ('specs') folder. Keeping them together helps link your documentation to tests.</p> <p>You SHOULD clearly indicate the expected behaviours, functionality and actual integration with consumers of the code. This may include data extracts from other systems or software.</p>"},{"location":"organising-your-solution/exceptions-prove-the-rule/","title":"Exceptions prove the rule","text":"<p>As with most standards, there are occasions when it's unwise to follow \"hard and fast\" rules.</p> <p>Principal and Lead software developers have discretion to do so but this should be the exception rather than the rule.</p>"},{"location":"organising-your-solution/good-practice-checklists/","title":"Good practice checklists","text":"<p>Use this checklist to demonstrate you follow our coding standards.</p> <p>We cross-reference each checklist item to a relevant section in our standards and guides; Exceptions are noted where they may apply.</p>"},{"location":"organising-your-solution/good-practice-checklists/#folder-structure-good-practice","title":"Folder structure good practice","text":"Item Guide or standard Exceptions 1 You use physical folders to separate logical areas of your software solution \u2610 Use physical folders 2 You include a README markdown file, instructing others on how to build and deploy your software solution \u2610 Provide a README file 3 You include a .editorconfig to allow your code style rules to be shared \u2610 Provide a .editorconfig file 4 You include a source folder \u2610 Include a source folder 5 You create subfolders to separate dependency layers \u2610 Use additional subfolders for dependency layers 6 You include a documents folder \u2610 Include a documents folder 7 You include folder for coded tests \u2610 Include a test folder 8 You include a builds folder \u2610 Include a build folder 9 You include a deploy folder \u2610 Include a deploy folder May only be required if deploying to cloud 10 You provide examples with your solution \u2610 Include an examples folder"},{"location":"organising-your-solution/introduction/","title":"Introduction","text":""},{"location":"organising-your-solution/introduction/#purpose","title":"Purpose","text":"<p>Describes the Application Development and Support Directorate's standard for organising your software solution.</p>"},{"location":"organising-your-solution/introduction/#scope","title":"Scope","text":"<p>Software Developers have a responsibility to follow this guide.</p> <p>Developers targeting frameworks other than .NET may need to make sensible adjustments where necessary.</p>"},{"location":"organising-your-solution/introduction/#references","title":"References","text":"<ul> <li>General Coding Standards</li> </ul>"},{"location":"organising-your-solution/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions</p> <p>Note that all links to Microsoft Learn\u00a9 may default to Azure DevOps Services. Use its version selector to tailor the website for Azure DevOps Server.</p>"},{"location":"organising-your-solution/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>Modern programming practices expect us to prove that our code meets functional requirements and can be reliably built and deployed.</p> <p>This requires a little forethought when creating a solution that others will use (often without the originating developer present.) So, it's critical we create software solutions that are:</p> <ul> <li> <p>Clear and explicit</p> </li> <li> <p>Understandable by developers of all abilities</p> </li> <li> <p>Safely extensible &amp; well documented</p> </li> </ul> <p>The following sections provide guidance on how we can achieve this.</p>"},{"location":"organising-your-solution/organise-your-solution-to-accord-with-our-conventions/","title":"Organise your solution to accord with our conventions","text":"<p>You SHOULD organise your solution according to our standards. They follow those used by many language ecosystems, including the .NET source code itself. Note that they differ from the typical Visual Studio File New defaults.</p> <p>There are two choices, as shown below. This document describes the first, which suits a Behavioural Driven Development [BDD] approach. But they are very similar and equally valid.</p> <p>Organizing your software solution - option #1 (suits a BDD approach):</p> <p>Examples of good practice</p> <pre><code>    \u2514\u2500\u2500{RootFolderName}/        # Root folder for your entire software solution\n        \u251c\u2500\u2500 deploy/             # Any infrastructure provisioning scripts\n        \u251c\u2500\u2500 build/              # Any published build outputs\n        \u2502   \u2514\u2500\u2500 scripts/        # Build scripts and CI scripts not required in the root\n        \u251c\u2500\u2500 examples/           # Samples and demos on how to build or consume your app\n        \u251c\u2500\u2500 specs/              # Container folder for tests and documentation\n        \u2502   \u251c\u2500\u2500 docs/           # Diagrams, specifications and documentation\n        \u2502   \u2514\u2500\u2500 test/           # Automated tests and feature files\n        \u251c\u2500\u2500 src/                # Source code separated by dependency layer subfolders\n        \u251c\u2500\u2500 README.md           # Starting point for anyone building or using your software\n        \u251c\u2500\u2500 .editorconfig       # Enforces a consistent coding style for your project\n        \u2514\u2500\u2500 {SolutionName}.sln  # Solution file\n</code></pre> <p>Organizing your software project - option #2:</p> <p>Examples of good practice</p> <pre><code>    \u2514\u2500\u2500{RootFolderName}/        # Root folder for your entire software solution\n        \u251c\u2500\u2500 deploy/             # Any infrastructure provisioning scripts\n        \u251c\u2500\u2500 build/              # Any published build outputs\n        \u2502   \u2514\u2500\u2500 scripts/        # Build scripts and CI scripts not required in the root\n        \u251c\u2500\u2500 docs/               # Diagrams, specifications and documentation\n        \u251c\u2500\u2500 examples/           # Samples and demos on how to build or consume your app\n        \u251c\u2500\u2500 src/                # Source code separated by dependency layer subfolders\n        \u251c\u2500\u2500 test/               # Automated tests\n        \u251c\u2500\u2500 README.md           # Starting point for anyone building or using your software\n        \u251c\u2500\u2500 .editorconfig       # Enforces a consistent coding style for your project\n        \u2514\u2500\u2500 {SolutionName}.sln  # Solution file\n</code></pre> <p>An Example .Net Solution which follows our conventions:</p> <p>{IMAGE PLACEHOLDER}</p> <p>Practical tips</p> <ul> <li> <p>Use the approach that best matches your needs</p> </li> <li> <p>In later versions of .NET use C:\\&gt; dotnet new gitignore to generate a .gitignore file</p> </li> <li> <p>Clone our example project structure from the Software Development Standards project in Azure DevOps.</p> </li> </ul> <p>Further reading and information</p> <p>An Opinionated Approach to ASP.NET Core - Scott Allen - YouT ube</p> <p>.NET Core Opinion #1 - Structuring a Repository (odetocode.com)</p> <p>.NET Core Opinion #2 - Managing a Repository Structure (odetocode .com)</p> <p>.NET Core Opinion #3 - Other Folders to Include in the Source Repository (od etocode.com)</p> <p>Create .NET Projects Using Standard Practices | Toptal</p> <p>Common web application architectures | Microsoft Learn</p> <p>Behaviour-Driven Development - Cucumber Documentation</p> <p>.NET project structure \u00b7 Gi tHub</p> <p>GitHub - github/gitignore: A collection of useful .gitignore templates</p>"},{"location":"organising-your-solution/provide-a-build-folder/","title":"Provide a build folder (./&lt;rootfoldername&gt;/build)","text":"<p>You SHOULD store the latest output from publish commands, though not necessarily each build event, in a build folder.</p> <p>Place your outputs in sub folders, named appropriately, with a suffix to indicate output type and a prefix for the solution name. And take care to indicate the last build date.</p>"},{"location":"organising-your-solution/provide-a-deploy-folder/","title":"Provide a deploy folder (./&lt;rootfoldername&gt;/deploy)","text":"<p>You SHOULD store any infrastructure provisioning scripts in a deploy folder. These could be Azure Resource Management (ARM) templates or Bicep scripts and associated parameter files, but it is RECOMMENDED that you use Terraform scripts.</p>"},{"location":"organising-your-solution/provide-a-documents-folder/","title":"Provide a documents folder (./&lt;rootfoldername&gt;/specs/docs)","text":"<p>You SHOULD keep documentation you consider valuable (including diagrams, specifications<sup>1</sup> and documents relevant to build output) in a documents ('docs') folder. This is particularly useful if there's no Solutions Architecture Design document (SAD) or Software Requirements Specification (SRS).</p> <p>While most documents MAY be stored in our document management system, not all will reflect the current state of the solution. For example, a SAD or SRS may include planned work or perhaps even obsolete design decisions. Maintaining a docs folder is an important step in addressing any drift between design and build.</p> <p>You SHOULD NOT let documentation become stale or out-of-step with the build output or use the docs folder as a replacement for the corporate document management system.</p> <p>Practical tips</p> <ul> <li> <p>Use automation. For example, generate .pdf files from the repo's markdown files and include OpenAPI documentation.</p> </li> <li> <p>Take care when linking to other documents. Links are only relevant while they are maintained and may be resolvable only from within our domain.</p> </li> <li> <p>Encourage testers and business analysts to use. feature files to record changes to requirements. Link your docs folder to those. feature files</p> </li> <li> <p>Use a tool like Grammarly: Free Online Writing Assistant to help you make your content clear</p> </li> </ul> <p>Writing good documentation is a skill. Use these links to help you write high quality documentation.</p> <p>Further reading and information</p> <p>Doing Visual Studio and .NET Code Documentation Right -- Visual Studio Magazine</p> <p>How to write plain English</p> <p>Writing checklist (sharepoint.com)</p> <ol> <li> <p>For example, if you are building on published specs -- such HL7 FHIR.\u00a0\u21a9</p> </li> </ol>"},{"location":"organising-your-solution/provide-a-readme-file/","title":"Provide a readme file (,/&lt;rootfoldername&gt;/readme.md)","text":"<p>You SHOULD provide a README file in the root folder as a common way of helping others learn about your software.</p> <p>As a minimum, it SHOULD instruct others on how to build and deploy your software. Typically, you SHOULD also include guidelines on how to contribute to your project -- how to fix bugs or correct typos, for example.</p> <p>Practical tips</p> <ul> <li> <p>Use Microsoft's Writing Style Guide to maintain a consistent and familiar style</p> </li> <li> <p>Using Markdown makes it easier to format text and include links &amp; images</p> </li> <li> <p>Describe your assurance processes (such as code reviews or gated check-ins) in a separate CONTRIBUTING.md file, saved to the root folder</p> </li> <li> <p>Consider your audience. What would others find useful?</p> </li> </ul> <p>Further reading and information</p> <p>Create a readme for your Git repo - Azure Repos | Microsoft Learn</p> <p>About READMEs - GitHub Docs</p> <p>Welcome - Microsoft Style Guide | Microsoft Learn</p>"},{"location":"organising-your-solution/provide-a-scripts-folder/","title":"Provide a scripts folder (./&lt;rootfoldername&gt;/build/scripts)","text":"<p>You SHOULD store any scripts needed to assist with the build<sup>1</sup>, by placing them in a 'scripts' subfolder. This offers a standard location for any others wishing to build your solution.</p> <p>As well as build scripts, use the folder to store artefacts related to your continuous integration (CI) processes. While some CI systems require you place build artefacts in the root, placing other supporting files in the scripts folder avoids excessive cluttering.</p> <p>When storing scripts, you SHOULD keep your scripts clean and with comments.</p> <p>You SHOULD prefer using scripted solutions over build events whenever possible.</p> <p>You SHOULD NOT break published conventions without considering how this impacts others.</p> <p>Examples of good practice</p> <p>{IMAGE PLACEHOLDER} Figure 3 An example.NET Solution with a build and scripts folder</p> <p>Further reading and information</p> <p>.NET Core Opinion #4 - Increase Productivity with Dev Scripts (odetocod e.com)</p> <p>.NET Core Opinion #5 - Deployment Scripts and Templates (odet ocode.com)</p> <ol> <li> <p>.exe, .ps1 .sql and .cmd files for example.\u00a0\u21a9</p> </li> </ol>"},{"location":"organising-your-solution/provide-a-test-folder/","title":"Provide a test folder (./&lt;rootfoldername&gt;/specs/test)","text":"<p>As the name suggests, this is where you SHOULD store your tests. As with the src folder, you SHOULD place test projects in sub folders, mapping the name of the sub folder to the name of the project.</p> <p>Names SHOULD correspond to those of your dependency layers, with the .Tests suffix added.</p> <p>When writing the tests, you SHOULD:-</p> <ul> <li> <p>Prioritise output testing over testing that assures modules.</p> </li> <li> <p>Adopt Behavioural Driven Development as your approach.</p> </li> <li> <p>Balance the benefits and drawbacks of adding extensive testing to     your solution.</p> </li> <li> <p>Consider You Aren't Gonna Need It (YAGNI) rules when deciding what     to test.</p> </li> <li> <p>Consider the testing requirements described in your Definition of     Done (DOD).</p> </li> </ul> <p>Consider wider assurance needs when deciding what tests to write. Integration and smoke tests often provide the greatest benefit Consider You Aren't Gonna Need It (YAGNI) and carefully balance the time and effort of an extensive testing approach with the benefit it provides</p> <p>Further reading and information</p> <p>Selective Unit Testing -- Costs and Benefits (stevensanderson.com)</p>"},{"location":"organising-your-solution/provide-an-examples-folder/","title":"Provide an examples folder (./&lt;rootfoldername&gt;/examples)","text":"<p>It is RECOMMENDED that you provide examples to show others how to use your published outputs. Developers will thank you for it!</p> <p>SQL outputs, scripted languages, or configurations such as yaml, will likely be single files. For complex outputs, store each demo project in its own sub-folder.</p> <p>When doing so you SHOULD:</p> <ul> <li> <p>Make sure examples work as expected.</p> </li> <li> <p>Demonstrate typical use cases, capabilities and support queries.</p> </li> <li> <p>Consider using automation for each example output.</p> </li> </ul> <p>You SHOULD NOT let examples become stale and out-of-date.</p> <p>Examples of good practice</p> <p>{IMAGE PLACEHOLDER} Figure 4 An example.NET Solution with example</p>"},{"location":"organising-your-solution/use-additional-sub-folders-for-dependency-layers/","title":"Use additional sub-folders for dependency layers (/src/&lt;dependencylayer&gt;)","text":"<p>You SHOULD create immediate sub-folders to separate the dependency layers of your solution, such as data access, user interface, domain logic or service layers. This reminds you that the layers exist and to test them.</p> <p>Including the parent's name in the sub folder name may appear repetitive, but it adds context. And it can prove useful when referencing it from another location or when searching for a file or folder.</p> <p>We leave naming the sub folders underneath src and test to your discretion but you SHOULD :-</p> <ul> <li> <p>use Pascal casing when naming folders.</p> </li> <li> <p>Follow Microsoft's naming advice     when developing for Windows systems.</p> </li> </ul> <p>You SHOULD NOT use special characters or abbreviations longer than two letters in folder names.</p> <p>Examples of good practice</p> <p>{IMAGE PLACEHOLDER} Figure 1 An example.NET Solution with dependency layers</p> <p>Further reading and information</p> <p>Naming Files, Paths, and Namespaces - Win32 apps | Microsoft Learn</p>"},{"location":"organising-your-solution/use-existing-conventions-for-project-types/","title":"Use existing conventions for project types","text":"<p>Some project types require you to work with a different convention. Typically, these include web projects, MVC, web forms, APIs, or razor pages. For example, MVC structures projects for path conventions, whereas razor pages use folder hierarchy.</p> <p>However, the project type determines this - not the software team. And you SHOULD follow the namespace convention described above for any additional folders you add to these project types.</p>"},{"location":"organising-your-solution/use-physical-folders/","title":"Use physical folders","text":"<p>Typically, a legacy .NET application relies on visual studio solution folders. These virtual folders don't represent the physical structure on disk.</p> <p>With no folders to look at, the reader is reliant on our understanding of the project names without opening the solution. To overcome this, you SHOULD follow our first convention and use physical folders and folder names.</p>"},{"location":"organising-your-solution/use-sub-folders-within-visual-studio-projects/","title":"Use sub-folders within visual studio projects","text":"<p>You SHOULD use sub-folders within each project to reflect namespacing and separate dependency layers. Doing so helps remind you that the solution is becoming more complex as this tree grows. And proves useful when refactoring or extending the project.</p> <p>You SHOULD use parent names in solution subfolder names.</p> <p>Practical tips</p> <p>Follow SOLID principles to refactor out exposed complexities. This helps to reduce each project to its simplest form.</p>"},{"location":"restful-api-standards/api-gateway-pattern/","title":"API gateway pattern","text":"<p>APIs SHOULD be deployed behind a gateway. This ensures that the security policies provided by the gateway are used rather than implementing them directly in your back-end API.</p> <p>Typically, deploy to Apigee or your own API gateway if building APIs exclusively for your app. Consult the API platform and Cyber Security teams for further advice.</p>"},{"location":"restful-api-standards/api-management/","title":"API management","text":""},{"location":"restful-api-standards/api-management/#generating-an-api-proxy","title":"Generating an API proxy","text":"<p>To publish an API, generate a proxy from your Open API specification early in the development process. Contact the platform team (see their process map below) for details.</p>"},{"location":"restful-api-standards/api-management/#ping-and-service-status","title":"Ping and service status","text":"<p>APIs SHOULD implement ping and status endpoints that return an HTTP 200 OK response. These endpoints allow the platform team to connect the API platform to them.</p>"},{"location":"restful-api-standards/api-management/#api-lifecycle","title":"API lifecycle","text":"<p>The stability of your API and the support you provide depend on its lifecycle status. You MUST classify your API using the lifecycle status definitions described in Appendix A.</p>"},{"location":"restful-api-standards/api-management/#deprecation-and-retirement","title":"Deprecation and retirement","text":"<p>You MAY deprecate and retire an API endpoint if it is:</p> <ul> <li> <p>Replaced by a new endpoint that provides equivalent or enhanced     capabilities.</p> </li> <li> <p>Not fit for purpose, for example it is insecure.</p> </li> <li> <p>Unused or of limited usage.</p> </li> </ul>"},{"location":"restful-api-standards/api-management/#retirement-timeline","title":"Retirement timeline","text":"<p>At the end of the deprecation period, the API endpoints reach end-of-life and are taken out of service. At this point, the API endpoint MUST no longer be available for use.</p>"},{"location":"restful-api-standards/api-management/#deprecation-policy","title":"Deprecation policy","text":"<p>To deprecate an API endpoint you MUST:</p> <ul> <li> <p>Add a deprecation notice to your documentation stating the     deprecation date.</p> </li> <li> <p>Add a deprecation header with the deprecation date.</p> </li> <li> <p>Email subscribed users with the deprecation date - as the date     approaches, emails SHOULD be sent more frequently.</p> </li> <li> <p>Keep the endpoint available for use and maintain normal service     levels.</p> </li> <li> <p>Permit no further integrations, although you MAY allow consumers     in the latter stages of onboarding to complete sign-up.</p> </li> </ul> <p>You SHOULD make no further updates unless necessary.</p>"},{"location":"restful-api-standards/api-management/#retirement-policy","title":"Retirement policy","text":"<p>To retire an API endpoint, you MUST:</p> <ul> <li> <p>Add a retirement notice to your documentation stating the retirement     date, giving no less than 6 months' notice.</p> </li> <li> <p>Add a sunset header with the retirement date.</p> </li> <li> <p>Provide a migration guide where applicable.</p> </li> <li> <p>Keep the endpoint available for use and maintain normal service     levels.</p> </li> <li> <p>Permit no further integrations.</p> </li> </ul> <p>You SHOULD make no further updates unless necessary.</p> <p>Further reading and information</p> <p>RFC 8594 - The Sunset HTTP Header Field</p>"},{"location":"restful-api-standards/api-management/#deployment","title":"Deployment","text":"<p>API deployment SHOULD follow DevOps best practices and use continuous integration and deployment (CI/CD). For more information see our coding standards.</p> <p>Further reading and information</p> <p>Software development handbook</p> <p>Using Source Control</p> <p>Practical tips</p> <p>API Platform Starter Project</p> <p>Developers can use the platform team's SDK --that comes with pre-set ping and status policies and ready-made pipelines. These pipelines automatically package your API proxy and deploy it to Apigee once approved.</p>"},{"location":"restful-api-standards/api-management/#versioning","title":"Versioning","text":""},{"location":"restful-api-standards/api-management/#semantic-versioning","title":"Semantic versioning","text":"<p>APIs MUST follow the Semantic Versioning Specification 2.0.0. It helps API consumers avoid using new versions with breaking changes. You SHOULD avoid breaking changes where possible.</p> <p>If you never apply a breaking change, simply use semantic versioning to differentiate minor releases (with added functionality) from patch releases.</p> <p>Further reading and information</p> <p>Semantic Versioning 2.0.0 | Semantic Versioning</p>"},{"location":"restful-api-standards/api-management/#versioning-urls-for-release-versions","title":"Versioning urls for release versions","text":"<p>You MUST indicate release versions with breaking changes by adding a higher major version number, preceded by a lowercase v to the URL. Exclude version 1.x.x. and minor and patch version numbers.</p> <p>Examples of good practice</p> <pre><code>    /{base}/patients\n\n    {*base}*/v2/patients\n\n    /{base}/v1/patients\n\n    /{base}/v2.1.3/patients\n</code></pre>"},{"location":"restful-api-standards/api-management/#versioning-urls-for-pre-release-versions-alpha-and-beta","title":"Versioning urls for pre-release versions (alpha and beta)","text":"<p>Follow the same method for pre-release versions but include versions 0 and 1 and add the pre-release type (i.e. alpha or beta), preceded by a dash.</p> <p>Semantic versioning states that major version 0 is always pre-release; therefore alpha/beta labels are not necessarily needed but they help clarify API status. Here are some examples:</p> <p>Version \"0.1.3-alpha\" published for pre-release testing to:</p> <p>Examples of good practice</p> <p><code>/{base}/v0-alpha/patients</code></p> <p>And then version \"1.0.0\" published to:</p> <p>Examples of good practice</p> <p><code>/{base}/patients</code></p> <p>Followed by version \"1.1.0-beta\" published for pre-release testing to:</p> <p>Examples of good practice</p> <p><code>/{base}/v1.1-beta/patients</code></p> <p>Finally, release version \"1.1.0\" (with no breaking changes) published to the original URL:</p> <p>Examples of good practice</p> <p><code>/{base}/patients</code></p> <p>Practical tips</p> <p>When deploying breaking changes to beta versions (i.e. versions used by early adopters), increment the minor version and notify users who might be affected.</p>"},{"location":"restful-api-standards/api-management/#cataloguing","title":"Cataloguing","text":"<p>You MUST publish any release version Open API to the NHS Wales API external product catalogue.</p> <p>You MAY publish an Open API, not yet marked as a release, version to the NHS Wales API external product catalogue.</p> <p>You SHOULD publish a release version inner API to DHCW's internal product catalogue.</p> <p>You MAY publish an inner API, not yet marked as a release version, to DHCW's internal product catalogue.</p> <p>The catalogue entry MUST include the lifecycle status. This makes it clear to consumers where each version of your API is in its lifecycle.</p> <p>Practical tips</p> <p>Uncatalogued APIs run the risk of being forgotten and not monitored or protected by security tools. See also the OWASP TOP 10 section.</p>"},{"location":"restful-api-standards/api-management/#auditing-tracing-and-monitoring","title":"Auditing, tracing and monitoring","text":"<p>If your API deals with confidential or sensitive data, you MUST maintain a log that records details about access.</p> <p>This log SHOULD be sent to our Security information and event management system (SIEM) and National Intelligent Integrated Audit Solution (NIIAS) via an API gateway.</p> <p>To ensure compliance and for guidance on the log format and the minimum standard fields, consult with the platform team or Cyber security team.</p> <p>Further reading and information</p> <p>National Intelligent Integrated Audit Solution (NIIAS) - Home</p>"},{"location":"restful-api-standards/api-management/#rate-limiting-and-throttling","title":"Rate limiting and throttling","text":"<p>All APIs SHOULD set client usage quotas and rate limits. For critical systems, this is a MUST. Speak to the platform team and Cyber Security team for help.</p>"},{"location":"restful-api-standards/api-management/#spike-arrests","title":"Spike arrests","text":"<p>The platform team will help you handle sudden traffic spikes and keep you API stable. Rate limiting, a key feature in Apigee, sets thresholds on the number of requests within a specific period.</p> <p>This ensures a controlled flow of traffic, preventing overloads and optimising performance. No manual configuration is required; the API platform team oversees Apigee, guaranteeing effective rate limiting for a reliable and responsive API experience.</p>"},{"location":"restful-api-standards/appendix-a-classifications/","title":"Appendix A: Classifications","text":""},{"location":"restful-api-standards/appendix-a-classifications/#api-type","title":"API type","text":"TYPE DEFINITION Open Open APIs are made available to both internal developers within DHCW and external consumers. They are exposed and managed on DHCW's API management platform, Apigee and published on an external catalogue. Examples include Medicines &amp; Allergies, PIX and PDQ APIs Internal Internal APIs are accessible only to internal developers within DHCW. They are, typically, exposed and managed on DHCW's API management platform, Apigee and published on an internal catalogue. They are not intended for external use. Client specific These APIs are restricted to a specific client or team within DHCW. They are usually managed independently through that team's own API management tool. They are not typically published on a central catalogue."},{"location":"restful-api-standards/appendix-a-classifications/#data-type","title":"Data type","text":"TYPE DEFINITION Public Access restrictions are not required for read-only access. Examples: NHS Wales Data Dictionary items, dummy data in a public test environment. Business confidential Access restrictions are set by organisational policy, contracts, or license agreements, but not by law. Examples: SNOMED CT, internal URLs, and connection strings. Sensitive Access restrictions are more stringent and set by laws (e.g. GDPR legislation) Examples: \"Personal\" data types, as defined in the Data Protection Impact Assessment Form Template. Highly sensitive Access restrictions are specific to the data items and higher than sensitive or business confidential. Examples: \"Special category\" and \"Higher sensitivity\" data types, as defined in the Data Protection Impact Assessment Form Template. Examples: database passwords, private encryption keys. <p>Further reading and information</p> <p>IG-TEM-1 Data Protection Impact Assessment Form Template</p>"},{"location":"restful-api-standards/appendix-a-classifications/#network-routing-type","title":"Network routing type","text":"TYPE DEFINITION Internal Data stays within NHS Wales Wide Area Network (WAN). Peered Data stays within Health and Social Care Network (HSCN), Public Sector Broadband Aggregation (PSBA), or another secured link (VPN or mTLS) to NHS Wales WAN. Internet Data travels across the public internet."},{"location":"restful-api-standards/appendix-a-classifications/#client-type","title":"Client type","text":"<p>Take care to apply these classifications in context. For example, a client may be pre-authorized to write patient prescription data but only licenced for use in reading patient test results.</p> TYPE DEFINITION Pre-authorised Authorised to process the data and apply appropriate access controls for end users. Typically, an application managed by an NHS Wales organisation or a contracted supplier. Authorisation requires formal assurance by an NHS Wales assurance group. Examples: Welsh Clinical Portal, GP Systems, Clinical Workstation. Licenced Licenced ('Trusted') to process the data if authorised end users supply or grant access to it. Typically, an application procured or under trial usage by an NHS Wales organisation. Licencing for use may require formal assurance by an NHS Wales assurance group. Open Has no formal NHS Wales approval or contract licencing its use to process the data. Typically, an application procured, developed, or otherwise obtained by the user. Examples: Postman, SOAP UI"},{"location":"restful-api-standards/appendix-a-classifications/#client-authentication-level","title":"Client authentication level","text":"LEVEL DEFINITION 0: No Authentication No authentication. 1: API Key API Key is provided with each request. Weak security as the key is both ID and the credential. 2: Credentials Basic client credentials (Client ID and Client Secret) are provided with each request. More secure as the secret can be omitted when the Client ID is written to audit logs. 3: : Access token (using Credentials) A time limited access token is first obtained in an initial request, then provided with each further request. To obtain the access token the client supplies basic credentials (Client ID and Client Secret). More secure as credentials are shared less frequently and only with the token endpoint. Licenced clients may use level 3."},{"location":"restful-api-standards/appendix-a-classifications/#service-level","title":"Service level","text":"LEVEL DEFINITION Critical As defined in DHCW-POL-5 Service Level Target Policy, extended downtime is highly disruptive. Standard As defined in DHCW-POL-5 Service Level Target Policy, e.g. reporting and analytical systems. <p>Further reading and information</p> <p>DHCW-POL-5 Service Level Target Policy</p>"},{"location":"restful-api-standards/appendix-a-classifications/#lifecycle-status","title":"Lifecycle status","text":"STATUS DEFINITION RELEASE VERSION Alpha Pre-release version and subject to breaking changes. Intended to be used only by those involved with the development. SHOULD not be available in a production environment. No Beta Pre-release version and subject to breaking changes. Stable enough for use by early adopters to help you identify bugs and potential improvements. MAY be available in a production environment. No Stable Release version. You MUST NOT introduce breaking changes. Breaking changes MUST result in a new major version. SHOULD be available in a production environment. Yes Legacy The same as stable, available for use but no new integrations given it's planned for deprecation. SHOULD be available in a production environment for existing users. Yes Deprecated The same as stable, but existing users should switch to a newer version or alternative API. Not intended for new users, given it's planned for retirement. SHOULD be available in a production environment until retirement. Yes Retired No longer supported. APIs move into this category when all users have moved to a newer version or no longer subscribe. MUST not be available in any environments. No"},{"location":"restful-api-standards/authentication-and-authorisation/","title":"Authentication and authorisation","text":"<p>The server SHOULD enforce authentication and authorisation using OAuth 2.0 and OIDC protocols as described below. Typically the API Platform team will provide this service.</p>"},{"location":"restful-api-standards/authentication-and-authorisation/#client-authentication","title":"Client authentication","text":"<p>Authentication is enforced at one of the following levels.</p> LEVEL DESCRIPTION 0 No Authentication 1 API Key 2 Credentials 3 Access token (using Credentials) 4 Access token (using Public Key Cryptography) <p>Authentication Levels</p> <p>The server MUST enforce the minimum required level as determined by the type of data accessed, client characteristics and network routing:</p> DATA TYPE CLIENT TYPE NETWORK ROUTING TYPE PUBLIC (READ) PUBLIC (WRITE) BUSINESS CONFIDENTIAL SENSITIVE HIGHLY SENSITIVE Pre-Authorised Internal 0 1 2 2 2 Peered 0 1 3 3 3 Internet 1 1 3 4 4 Licenced All 1 3 + End User Delegation 3 + End User Delegation 4 + End User Delegation 4 + End User Delegation Open All 1 3 + End User Delegation 3 + End User Delegation No access No access <p>Minimum Authentication Levels</p>"},{"location":"restful-api-standards/authentication-and-authorisation/#end-user-delegation","title":"End user delegation","text":"<p>Licenced and Open clients requesting any access beyond reading public data MUST require users to delegate permissions. Users MUST be authenticated by the NHS Wales Identity Provider.</p> <p>The server MUST implement role-based access controls to verify that end users are authorised to grant the requested permissions to the client application.</p>"},{"location":"restful-api-standards/authentication-and-authorisation/#role-based-access-control-scopes","title":"Role-based access control (scopes)","text":"<p>APIs SHOULD define access controls as scopes. Speak to the platform team for further help.</p> <p>Further reading and information</p> <p>App Launch: Scopes and Launch Context - SMART App Launch v2.2.0</p>"},{"location":"restful-api-standards/authentication-and-authorisation/#authorisation-grants","title":"Authorisation grants","text":"<p>For client authentication level 3 without End User Delegation, the RECOMMENDED method is to use the OAuth\u00a02.0 grant type client_credentials to obtain a bearer token, as described in RFC 6749, section 4.4.</p> <p>For client authentication level 3 with End User Delegation, the RECOMMENDED method is to use the OAuth\u00a02.0 grant type authorization_code to obtain a token. The client MUST use client_id and client_secret to authenticate with the token endpoint, as described in RFC 6749, sections 4.1 and 2.3.1.</p> <p>For level 4 client authentication without End User Delegation, the RECOMMENDED method is to use the OAuth\u00a02.0 grant type urn:ietf:params:oauth:grant-type:jwt-bearer, as described in RFC 7523, section 2.1.</p> <p>For level 4 client authentication with End User Delegation, the RECOMMENDED method is to use the OAuth\u00a02.0 grant type authorization_code to obtain a token. The client MUST use a client assertion to authenticate with the token endpoint, as described in RFC 7523, section 2.2.</p> <p>Further reading and information</p> <p>RFC 6749 - The OAuth 2.0 Authorization Framework</p> <p>RFC 7523 - JSON Web Token (JWT) Profile for OAuth 2.0 Client Authentication and Authorization Grants</p>"},{"location":"restful-api-standards/authentication-and-authorisation/#access-token-expiry","title":"Access token expiry","text":"<p>When using authentication level 3 or above, access tokens MUST expire within the following time frames:</p> <ul> <li> <p>For Business Confidential data: within 1 day.</p> </li> <li> <p>For Sensitive data: within 1 hour.</p> </li> <li> <p>For Highly Sensitive data: tokens SHOULD expire     within 5 minutes but MUST expire within 1 hour.</p> </li> </ul>"},{"location":"restful-api-standards/authentication-and-authorisation/#restrictions-on-data-use","title":"Restrictions on data use","text":"ENVIRONMENT RESTRICTIONS ON DATA SENT TO AND FROM AN API Development Data SHOULD be classified as \"Public\" (e.g., synthetic test data<sup>1</sup>) Data MUST NOT be classified as \"Sensitive\" or \"Highly Sensitive\" Data MUST NOT be written to systems in Production Sandbox Data MUST be classified as \"Public\" (e.g., synthetic test data) Systems Integration Testing Data SHOULD be classified as \"Public\" (e.g., synthetic test data) Data MUST NOT be classified as \"Sensitive\" or \"Highly Sensitive\" Data MUST NOT be written to systems in Production User Acceptance Testing Data MUST NOT be written to systems in Production Production No restrictions apply; however, please refer to the API Security standards."},{"location":"restful-api-standards/authentication-and-authorisation/#input-validation","title":"Input validation","text":"<p>The server MUST validate all inputs to prevent code injection, cross-site scripting (XSS) attacks and other malicious requests such as overposting and mass assignment.</p> <p>The server SHOULD restrict query parameter string filters to enumerated values or regular expressions.</p>"},{"location":"restful-api-standards/authentication-and-authorisation/#browser-based-access-and-cross-origin-resource-sharing-cors","title":"Browser-based access and Cross-Origin Resource Sharing (CORS)","text":"<p>APIs MUST NOT be accessed directly from code running in a browser unless they are limited to reading or writing public data.</p> <p>If the server permits direct browser access then:</p> <ul> <li> <p>The outbound HTTP header Access-Control-Allow-Origin MUST be set     to a specific value and MUST NOT be a wildcard.</p> </li> <li> <p>The inbound HTTP header Origin MUST be validated against a list     of permitted host names for authenticated applications.</p> </li> </ul> <ol> <li> <p>Note Synthetic data should be useful and reflect the use-case of the API\u00a0\u21a9</p> </li> </ol>"},{"location":"restful-api-standards/compound-collection-operations/","title":"Compound collection operations","text":"<p>When paging, filtering &amp; sorting operations are performed together, the evaluation order MUST be:</p> <ol> <li> <p>Filtering: All filtering expressions, including range queries,     MUST be applied using an AND operation.</p> </li> <li> <p>Sorting: The filtered list MUST be sorted according to the     specified sort criteria.</p> </li> <li> <p>Paging: The sorted, filtered list MUST then be paged. This     applies to both token-based and client-driven paging.</p> </li> </ol>"},{"location":"restful-api-standards/concurrency-control/","title":"Concurrency control","text":"<p>To prevent accidental overwrites of updates, design your concurrency control model carefully to handle transient faults appropriately.</p> <p>The server SHOULD ensure that clients include an If-Match header when making changes to resources that might be updated concurrently.</p> <p>When a client sends an If-Match header with a valid ETag value:</p> <ul> <li> <p>The server MUST check if the provided ETag matches the current     ETag of the resource.</p> </li> <li> <p>If they match, the server processes the request and returns a 2xx     HTTP status code (for example, 200 OK) indicating success.</p> </li> <li> <p>If they do not match, the server MUST return a 412 PRECONDITION     FAILED status code to indicate a conflict.</p> </li> </ul> <p>If a client does not include the If-Match header:</p> <ul> <li> <p>The server MUST respond with a 428 PRECONDITION REQUIRED HTTP     status code, indicating that the If-Match header is required.</p> </li> <li> <p>The response MUST include a clear message instructing clients to     include the If-Match header in future requests for the resource.</p> </li> </ul> <p>You MUST describe in your API documentation which resources require the use of the If-Match header.</p> <p>Further reading and information</p> <p>Testing for lost updates</p>"},{"location":"restful-api-standards/data-classification/","title":"Data classification","text":"<p>You MUST classify resource data types according to the platform team's data classification framework (see Appendix A).</p> <p>Based on the classification, you MUST apply the appropriate security controls.</p> <p>For detailed guidance on implementing security measures, refer to the Authentication and Authorisation section.</p>"},{"location":"restful-api-standards/definitions/","title":"Definitions","text":"TERM(S) DEFINITION API / Server / Resource server A server-side API, including API gateways acting as reverse proxies. Categorised as Open, internal or client specific. See Appendix A. API Consumer team / Consumer Individuals or teams integrating APIs into client applications. Typically developers or software professionals. API Platform team / Platform team Manages Apigee tools and standards, simplifying API implementation. API Producer team Develops backend APIs. Teams can be internal or third-party. Authorisation grant Credential representing the end user's authorisation of a client to access API resources. Breaking change An update that causes existing dependent code to fail or behave unexpectedly. Calling Application / Client / Client application A software application making API requests. Clients may be Public (e.g. Single Page Applications) or Confidential (e.g. server-side web applications). End User / Resource owner / User The user who controls access to specific API resources. End User Delegation / Delegation Allows users to grant clients permission to access API resources. Endpoint The URL or URI representing a unique API resource. FHIR Profile Defines constraints, extensions, and specific use cases for FHIR resources tailored for healthcare systems or domains. Namespace A group of related endpoints providing specific functionality or hierarchy, ensuring clarity and avoiding naming conflicts. NHS Wales Identity Provider Secure Token Service issuing OAuth and OpenID Connect tokens for authentication and authorisation. Proxy Middleware enhancing security, analytics, and API management, acting as a gateway to backend APIs. Resource(s) / resource model(s) Data fields representing objects, accessible via unique URLs or endpoints, forming the API's core. Service / System A system exposing one or more API endpoints. Sometimes used interchangeably with Namespace."},{"location":"restful-api-standards/documentation/","title":"Documentation","text":"<p>Good documentation makes our APIs easier to use. Even without a technical writer, this guide shows you how to create clear, well-structured API docs.</p> <p>Further reading and information</p> <p>Documenting APIs - GOV.UK</p> <p>Documenting APIs: A guide for technical writers and engineers</p>"},{"location":"restful-api-standards/documentation/#writing-style","title":"Writing style","text":"<p>You SHOULD follow DHCW's Writing checklist, ensuring that you:</p> <ul> <li> <p>Write short sentences.</p> </li> <li> <p>Talk directly to your user by using 'you' and active verbs.</p> </li> <li> <p>Use the active voice and plain language.</p> </li> <li> <p>Avoid using 'home-grown' terms that are not industry standard.</p> </li> </ul> <p>Further reading and information</p> <p>DHCW Writing checklist</p>"},{"location":"restful-api-standards/documentation/#openapi-specification","title":"OpenAPI specification","text":"<p>You SHOULD:</p> <ul> <li> <p>Describe your API using the OpenAPI (OAS) definition, version 3. OAS     is a global standard for describing RESTful APIs in a human and     machine-readable format.</p> </li> <li> <p>Provide OpenAPI definitions in YAML, as described in the next     section.</p> </li> <li> <p>Add a monitored email address to the info object of the OpenAPI     definition to allow consumers to contact you with issues or     comments.</p> </li> <li> <p>Include the full semantic version number in the info object of the     OpenAPI definition.\\     Store your OpenAPI specification in source control and keep it up to     date.</p> </li> </ul> <p>Further reading and information</p> <p>Semantic Versioning 2.0.0 | Semantic Versioning</p>"},{"location":"restful-api-standards/documentation/#document-structure","title":"Document structure","text":"<p>You SHOULD organise your API documentation. This section provides a RECOMMENDED structure:</p> <p>Examples of good practice</p> <pre><code>    \u251c\u2500\u2500 system.yml\n    \u251c\u2500\u2500 {api-id}/\n    \u2502   \u251c\u2500\u2500 api.yml\n    \u2502   \u251c\u2500\u2500 spec/\n    \u2502   \u2502   \u251c\u2500\u2500 open-api.yml or service.wsdl\n    \u2502   \u2502   \u2514\u2500\u2500 example-requests/\n    \u2502   \u2514\u2500\u2500 user-guide/\n    \u2502       \u2514\u2500\u2500 (see the user-guide section for more information)\n</code></pre>"},{"location":"restful-api-standards/documentation/#systemyml","title":"System.yml","text":"<p><code>system.yml</code> describes the underlying service that exposes the API endpoints. Information that might otherwise be repeated across related APIs can be added to the description. It contains the following fields:</p> FIELD MAX CHARACTERS DESCRIPTION <code>short-name</code> 10 Name or abbreviation to be used as a prefix when displayed in the API catalogue. <code>description</code> 150 What the service does."},{"location":"restful-api-standards/documentation/#apiyml","title":"Api.yml","text":"<p><code>api.yml</code> provides a brief overview of:</p> <ul> <li> <p>What your API does.</p> </li> <li> <p>Whether your API is in the alpha, beta or in production.</p> </li> <li> <p>Who can use your API, and any restrictions on using it or its data.</p> </li> </ul> FIELD MAX CHARACTERS DESCRIPTION <code>title</code> 80 Name or abbreviation to be used as a prefix when displayed in the API catalogue. <code>description</code> 150 What the service does. <code>overview</code> 800 Provide brief details for each of the following: - What the API does: A more detailed description with specifics about data sources and formats. - Who will use it and why: Provide examples of typical consumers and why they would use the API. - Where it's available: Mention any restrictions on use. <code>owner</code> 30 Email address for main point of contact for information about the API. <code>type</code> N/A <code>FHIR</code>, <code>REST</code> <code>SOAP</code>, <code>HL7v2</code>, <code>HL7v3</code> <code>Solr</code> or <code>GraphQL</code> <code>status</code> N/A <code>Alpha</code>, <code>Beta</code> <code>Stable</code>, <code>Legacy</code>, <code>Deprecated</code> or <code>Retired</code> <code>data type</code> N/A <code>Public</code>, <code>Business Confidential</code> <code>Sensitive</code> or <code>Highly Sensitive</code>"},{"location":"restful-api-standards/documentation/#specopen-apiyml","title":"Spec/open-api.yml","text":"<p>Include an <code>open-api.yml</code> file in the <code>spec</code> folder. You SHOULD format descriptions in markdown so that the platform team can generate HTML documentation in the API catalogue.</p> <p>You SHOULD NOT include the actual endpoint of your API server. Replace it with https://private.url.</p> <p>You MAY include examples in the <code>open-api.yml</code> file.</p>"},{"location":"restful-api-standards/documentation/#specservicewsdl","title":"Spec/service.wsdl","text":"<p>If you are publishing a legacy SOAP service, you SHOULD provide a service.wsdl document in the spec/example-requests folder. Contact the platform team for more information.</p>"},{"location":"restful-api-standards/documentation/#user-guide","title":"User-guide","text":"<p>Although documentation can be auto generated from the <code>open-api.yml</code> or <code>service.wsdl</code>, you MAY enhance it by adding a user guide as markdown files.</p> <p>Examples of good practice</p> <pre><code>    user-guide/\n    \u251c\u2500\u2500 overview.md\n    \u251c\u2500\u2500 quickstart.md\n    \u251c\u2500\u2500 how-to/\n    \u2502   \u251c\u2500\u2500 1-{description}.md\n    \u2502   \u2514\u2500\u2500 n-{description}.md\n    \u251c\u2500\u2500 concepts/\n    \u2502   \u251c\u2500\u2500 {concept}.md\n    \u2502   \u2514\u2500\u2500 {concept}.md\n</code></pre>"},{"location":"restful-api-standards/documentation/#overviewmd-introduce-your-api","title":"Overview.md -- introduce your API","text":"<p>You SHOULD start with a brief overview that explains what the API does and how it works. Focus on technical details suitable for developers and emphasise any prerequisites or essential concepts.</p> <p>Examples of good practice</p> <p>'A FHIR API that lets you retrieve ValueSets resources of SNOMED concepts.'</p> <p>//...how it works</p> <p>'A SOAP API that triggers a questionnaire to be sent.'</p> <p>//...how it works</p>"},{"location":"restful-api-standards/documentation/#quickstartmd-how-to-get-started","title":"Quickstart.md - how to get started","text":"<p>You SHOULD create a concise section that guides users through the quickest and simplest method of obtaining an example response from your API. Assume the reader is familiar with the necessary technology but highlight any advanced or unconventional steps, including potential pitfalls or important considerations.</p>"},{"location":"restful-api-standards/documentation/#how-to-task-based-guides-for-common-scenarios","title":"How-to -- task-based guides for common scenarios","text":"<p>You SHOULD provide task-based examples in a user-friendly style to help users with common integration tasks. Write them in the same style as the quickstart; however, these examples can be longer and more complex. Examples SHOULD have the following characteristics:</p> <ul> <li> <p>Begin with a front-loaded title that starts with a verb.</p> </li> <li> <p>Focus on helping users complete one task.</p> </li> <li> <p>Tell users what they need to do, not how the system works.</p> </li> <li> <p>Use numbered steps for clarity.</p> </li> <li> <p>Include example code and descriptions for request parameters and     response fields.</p> </li> <li> <p>Provide links to any subsequent tasks the user needs to complete.</p> </li> </ul> <p>Examples of good practice</p> <p>'Retrieve ValueSets resources of SNOMED concepts -- using a FHIR API'</p> <p>'Trigger the sending of a questionnaire -- using a SOAP API'</p> <p>Practical tips</p> <p>Avoid duplicating basic info about the API. Link to the Getting started section instead.</p>"},{"location":"restful-api-standards/documentation/#concepts","title":"Concepts","text":"<p>You SHOULD explain any essential concepts, such as document metadata standards. If a concept refers to an external source you SHOULD provide a link.</p>"},{"location":"restful-api-standards/documentation/#error-response-codes","title":"Error response codes","text":"<p>You SHOULD place error responses near the endpoint documentation or at the end of the API reference. Even if you anticipate only standard responses, such as 400 NOT FOUND or 200 OK, you MUST clarify how they relate to your API.</p> <p>Practical tips</p> <ul> <li> <p>Store the OpenAPI definition in the docs folder of your code repository.</p> </li> <li> <p>Create custom tasks in your CI/CD pipeline to publish API documentation to Apigee.</p> </li> </ul>"},{"location":"restful-api-standards/documentation/#developer-portal","title":"Developer portal","text":"<p>We provide two developer portals for managing and publishing APIs:</p> FEATURE DESCRIPTION URL Internal Developer Portal Allows developers to browse the internal API catalogue, obtain API keys, and test APIs before external publication. https://apim-apigee-test-nhswales.apigee.io/ External Developer Portal Central hub for publishing and managing API documentation. Provides a user-friendly interface for API consumers. Home - NHS Wales Digital Platform <p>When you are ready to publish your API documentation, contact the platform team for guidance.</p>"},{"location":"restful-api-standards/documentation/#software-development-kits-sdks","title":"Software development kits (sdks)","text":"<p>Creating a client-side SDK takes effort, but it can simplify integration for your users. If you provide an SDK with your API, you MUST test it thoroughly to ensure reliability.</p> <p>Practical tips</p> <p>Understand your users' needs. A .NET client might not be useful to a Java developer!</p>"},{"location":"restful-api-standards/documentation/#exceptions","title":"Exceptions","text":"<p>Standards provide valuable guidance, but there may be rare exceptions. Principal and Lead Software Developers have discretion in such cases.</p>"},{"location":"restful-api-standards/encryption/","title":"Encryption","text":"<p>The server MUST secure communications using at least TLS 1.2 (https).</p> <p>The server SHOULD:</p> <ul> <li> <p>Use one of the TLS cipher suites recommended in SOP-OSD-001     Encryption in Transit and SS-OSD-006 Application Programming     Interfaces (APIs)</p> </li> <li> <p>Use a TLS certificate signed by a chain ending with a trusted     Certificate Authority (CA)</p> </li> </ul> <p>Further reading and information</p> <p>SOP-OSD-001 Encryption in Transit</p> <p>SS-OSD-006 Application Programming Interfaces (APIs)</p>"},{"location":"restful-api-standards/error-reporting/","title":"Error reporting","text":"<p>HTTP status codes often provide sufficient error information. But sometimes the client needs additional details.</p> <p>If your APIs follow the FHIR standard, the server MUST return the OperationOutcome resource.</p> <p>For non-FHIR APIs, the server SHOULD follow RFC7807 or, where applicable, the JSON API specification.</p> <p>When returning error information, the server MUST NOT include unnecessary or sensitive data that attackers could exploit. See also the OWASP 10 &amp; Minimise Information Disclosure sections.</p> <p>The server MUST use HTTP status codes in the 5xx range to indicate server errors. For client errors, the server SHOULD return a 4xx status code.</p> <p>Practical tips</p> <p>ASP.NET Core's ProblemDetails formats errors according to RFC7807.</p> <p>Further reading and information</p> <p>OperationOutcome - FHIR v4.0.1</p> <p>RFC 7807 - Problem Details for HTTP APIs</p> <p>JSON:API --- A specification for building APIs in JSON</p>"},{"location":"restful-api-standards/essential-good-practice-checklist/","title":"Essential good practice checklist","text":"No. Checklist Item Section Heading Exceptions 1 APIs conform to FHIR R4. \u2610 FHIR (Fast Healthcare Interoperability Standards) Suitable FHIR R4 p rofiles may be unava ilable. 2 You have identified the resource data type. \u2610 Data Classification 3 You have an OpenAPI specification kept in source control. \u2610 OpenAPI Specification 4 You structure API endpoints for predictability. \u2610 URL Structure 5 You use HTTP verbs to define operations. \u2610 HTTP Implementation 6 APIs return correct HTTP status codes. \u2610 7 You follow FHIR or our JSON payload rules and structure. \u2610 Payload Rules JSON Response Payload Structure Unless following the FHIR specification 8 You apply Paging to collections with an unbounded number of items. \u2610 Paging 9 You return errors in a common format. \u2610 Error Reporting 1 0 You publish a transient fault contract.. \u2610 Handling Transient Faults 1 1 You follow naming conventions and use standard query parameters. \u2610 Naming 1 2 You define a maximum response time. \u2610 Performance and Response Times 1 3 You deploy APIs to an API gateway. \u2610 API Management 1 4 API clients authenticate using OAuth and OIDC. \u2610 Authentication and Authorisation 1 5 You apply the correct restrictions on data usage. \u2610 Restrictions on Data Use No. Checklist Item Guide or standard Exceptions 1 6 APIs implement ping and service status endpoints. \u2610 Ping and Service Status 1 7 You follow our deprecation and retirement policies. \u2610 Deployment 1 8 API use semantic versioning. \u2610 Versioning 1 9 You publish APIs to an API catalogue. \u2610 Cataloguing 2 0 You monitor APIs and apply rate limits where appropriate. \u2610 Auditing, Tracing and Monitoring 2 1 You deploy API using CI / CD pipelines to an API gateway. \u2610 Deployment 2 2 You write Test reports for every major, minor and patch version of your API. \u2610 Test Summary Report 2 3 Test reports include security testing and code coverage metrics. \u2610 2 4 You follow our documentation recommendations. \u2610 Documentation"},{"location":"restful-api-standards/fhir-fast-healthcare-interoperability-standards/","title":"FHIR (fast healthcare interoperability standards)","text":"<p>APIs MUST conform to the FHIR R4 specification when a relevant FHIR profile exists. Where no suitable profile is available, you may need to model custom resources following FHIR principles.</p> <p>FHIR R4 already addresses many fundamental aspects of RESTful API design. If your API implementation is based on FHIR, you can jump directly to the Security section.</p> <p>Further reading and information</p> <p>Wales FHIR Implementation Guide</p>"},{"location":"restful-api-standards/filtering/","title":"Filtering","text":""},{"location":"restful-api-standards/filtering/#field-selection","title":"Field selection","text":"<p>Endpoints SHOULD return a default set of fields, but the server MAY allow clients to customise the response, using the <code>fields</code> query parameter. This helps avoid retrieving unnecessary data.</p> <p>However the server MUST always return mandatory fields specified in the model schema, even if not requested. For example the <code>conditions</code> field is returned even if not specified in the query.</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients/9991234566?fields=NHSNumber,firstName,lastName\n    // 200 OK\n\n    Content-Type: application/json; charset=utf-8\n    {\n        \"patient\": {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\":  \"Appleby \",\n            \"conditions\": [\n                {\n                    \"id\": \"1\",\n                    \"name\": \"Hypertension\"\n                }\n            ]\n        }\n    }\n</code></pre>"},{"location":"restful-api-standards/filtering/#simple-filtering","title":"Simple filtering","text":"<p>The server MAY allow clients to search specific fields by specifying the field name in the query.</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients?lastName=Appleby&amp;fields=NHSNumber,firstName,lastName\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n        \"patients\": [\n        {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\": \"Appleby\",\n            \"conditions\": [\n                {\n                    \"id\": \"1\",\n                    \"name\": \"Hypertension\"\n                },\n                {\n                    \"id\": \"2\",\n                    \"name\": \"Diabetes\"\n                }\n            ]\n        },\n        {\n            \"NHSNumber\": \"9991234599\",\n            \"firstName\": \"Lady\",\n            \"lastName\": \"Appleby\",\n            \"conditions\": [\n                {\n                    \"id\": \"1\",\n                    \"name\": \"Hypertension\"\n                }\n            ]\n        }]\n    }\n</code></pre> <p>The server MAY allow clients to combine search parameters and filter by relational fields. This allows for advanced searches across related data.</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients?lastName=Appleby&amp; expand=conditions&amp;condition.name=diabetes\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n        \"patients\": [\n        {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\": \"Appleby\",\n            \"conditions\": [\n                {\n                    \"id\": \"1\",\n                    \"name\": \"Hypertension\"\n                },\n                {\n                    \"id\": \"2\",\n                    \"name\": \"Diabetes\"\n                }\n            ]\n        }\n    ]\n    }\n</code></pre>"},{"location":"restful-api-standards/filtering/#advanced-filtering","title":"Advanced filtering","text":"<p>To enable more advanced filtering logic, the server MAY support OData 4.0-compliant query parameters. These allow clients to specify filtering expressions that are evaluated for each resource in the collection, including only items where the expression evaluates to true.</p> <p>The following operators MUST be supported with the filter query:</p> OPERATOR GROUP OPERATOR DESCRIPTION COMPARISON <code>eq</code> Equal <code>ne</code> Not equal <code>gt</code> Greater than <code>ge</code> Greater than or equal <code>lt</code> Less than <code>le</code> Less than or equal LOGICAL <code>and</code> Logical and <code>or</code> Logical or <code>not</code> Logical negation GROUPING <code>()</code> Precedence grouping <p>Examples of good practice</p> <p>GET {base}/patients?filter=lastName eq Appleby and age ge 53</p>"},{"location":"restful-api-standards/filtering/#elasticsearch-and-lucene","title":"Elasticsearch and lucene","text":"<p>When using Elasticsearch, Lucene, or equivalent search products, the server SHOULD align with the syntax of the chosen product. Alternatively, consider using well-documented, standardised mechanisms such as OData filter syntax or a GraphQL service.</p>"},{"location":"restful-api-standards/general-principles/","title":"General principles","text":"<p>The following principles guide these standards:</p> <ul> <li> <p>Prioritise user needs.</p> </li> <li> <p>Treat APIs as products, with dedicated teams, lifecycles, and     roadmaps.</p> </li> <li> <p>Make APIs the primary interface for system interactions.</p> </li> <li> <p>Build APIs that are easy to learn, use, reuse, and integrate.</p> </li> <li> <p>Enable portability with container technologies like Docker.</p> </li> <li> <p>Adopt DevOps practices to deliver continuous value.</p> </li> <li> <p>Build APIs that conform to HL7 FHIR as a foundational interoperability standard.</p> </li> <li> <p>Use REST as the default design style, although you MAY choose alternatives when justified.</p> </li> </ul> <p>Practical tips</p> <p>Appoint a dedicated API Product Owner to prioritise user needs.</p> <p>Further reading and information</p> <p>The API Strategy &amp; Roadmap</p> <p>HL7 FHIR as a foundational standard in all NHS Wales Bodies | GOV.WALES</p> <p>Fielding Dissertation: CHAPTER 5: Representational State Transfer (REST) (uci.edu)</p> <p>The API Product Mindset (google.com)</p> <p>The principles --- Good Services </p>"},{"location":"restful-api-standards/handling-transient-faults/","title":"Handling transient faults","text":"<p>APIs MUST be designed to handle transient faults caused by temporary network issues, timeouts, or service disruptions. Clients SHOULD implement retry strategies to maintain reliability without overwhelming the system.</p>"},{"location":"restful-api-standards/handling-transient-faults/#identifying-transient-faults","title":"Identifying transient faults","text":"<p>The API MUST clearly define transient faults and distinguish them from permanent failures.</p> <p>The API MUST specify which HTTP status codes indicate transient faults that are safe to retry:</p> <ul> <li> <p>5xx errors (e.g. 500 Internal Server Error) indicate server-side     faults.</p> </li> <li> <p>Some 4xx errors MAY also be transient and safe to retry, such as:</p> </li> <li> <p>429 Too Many Requests (after respecting Retry-After).</p> </li> <li> <p>408 Request Timeout, if caused by temporary network issues.</p> </li> <li> <p>409 Conflict, if due to a temporary resource state.</p> </li> </ul>"},{"location":"restful-api-standards/handling-transient-faults/#retry-strategies","title":"Retry strategies","text":"<p>Clients MUST ensure retries do not introduce unintended side effects. APIs MUST be idempotent where possible.</p> <p>If an API returns Retry-After, clients MUST wait before retrying.</p> <p>Clients SHOULD use exponential backoff with jitter to avoid spikes in retry traffic.</p> <p>The API SHOULD document:</p> <ul> <li> <p>The maximum number of retry attempts before a failure is     considered permanent.</p> </li> <li> <p>Recommended wait times between retries.</p> </li> <li> <p>Rate limits to avoid excessive retries.</p> </li> </ul> <p>Additional RECOMMENDATIONS:</p> <ul> <li> <p>APIs SHOULD use circuit breakers to prevent repeated calls     when a service remains unavailable.</p> </li> <li> <p>Clients SHOULD randomise retries to prevent simultaneous retry bursts.</p> </li> <li> <p>If the API is deployed on Apigee, it MUST integrate with     Apigee's transient fault handling features.</p> </li> </ul>"},{"location":"restful-api-standards/http-implementation/","title":"HTTP implementation","text":"<p>APIs MUST follow standard HTTP semantics to ensure consistency, predictability and interoperability. This section outlines good practice, but refer to official specs when needed:</p> <p>Further reading and information</p> <p>RFC 9110: HTTP Semantics - Status Codes (rfc-editor.org)</p> <p>API design best practices - Conform to HTTP semantics | Microsoft Learn</p>"},{"location":"restful-api-standards/http-implementation/#hypermedia-hateos","title":"Hypermedia (hateos)","text":"<p>A RESTful API MUST implement Hypermedia as the Engine of Application State (HATEOAS) to be classified as Richardson Level 3. HATEOAS allows clients to navigate and manipulate resources dynamically without requiring prior knowledge of specific URIs.</p> <p>However, HATEOAS is NOT required for APIs in this organisation. But if implemented:</p> <ul> <li> <p>The API MUST provide hypermedia links to guide clients on     available actions.</p> </li> <li> <p>These links SHOULD use standard link relations where possible     (e.g. as defined in RFC 8288) and MUST be documented in the     API's OpenAPI definition.</p> </li> </ul> <p>Further reading and information</p> <p>RFC 8288: Web Linking</p>"},{"location":"restful-api-standards/http-implementation/#http-verbs-and-resource-operations","title":"HTTP verbs and resource operations","text":"<p>APIs MUST use standard HTTP methods correctly to ensure predictable behaviour.</p> <ul> <li> <p>APIs MUST only expose necessary HTTP methods and MUST     document them in the OpenAPI definition.</p> </li> <li> <p>APIs SHOULD return <code>405 Method Not Allowed</code> for unsupported HTTP     methods instead of silently ignoring them.</p> </li> <li> <p>APIs MUST adhere to the standard HTTP semantics defined in RFC 9110,     including idempotency rules.</p> </li> <li> <p>Non-standard HTTP verbs MUST NOT be used.</p> </li> </ul> <p>Further reading and information</p> <p>RFC 9110: HTTP Semantics - Status Codes (rfc-editor.org)</p>"},{"location":"restful-api-standards/http-implementation/#standard-http-methods-and-usage","title":"Standard HTTP methods and usage","text":"OPERATION HTTP VERB PATH REQUEST BODY RESPONSE BODY IDEMPOTENT LIST <code>GET</code> <code>/resources</code> None Collection Resource \u2705 Yes RETRIEVE <code>GET</code> <code>/resources/{id}</code> None Resource \u2705 Yes CREATE <code>POST</code> <code>/resources</code> Resource Resource \u274c No REPLACE <code>PUT</code> <code>/resources/{id}</code> Resource Resource \u2705 Yes MODIFY <code>PATCH</code> <code>/resources/{id}</code> Partial Resource Resource \u274c No DELETE <code>DELETE</code> <code>/resources/{id}</code> None None \u2705 Yes RETRIEVE HEADERS <code>HEAD</code> <code>/resources/{id}</code> None None \u2705 Yes QUERY CAPABILITIES <code>OPTIONS</code> <code>/resources</code> None Allowed Methods \u2705 Yes <ul> <li> <p><code>GET</code>, <code>HEAD</code>, <code>OPTIONS</code>, and <code>DELETE</code> MUST NOT modify resources.</p> </li> <li> <p><code>PUT</code> and <code>DELETE</code> MUST be idempotent to ensure safe retries.</p> </li> <li> <p><code>PATCH</code> is <code>NOT</code> idempotent unless explicitly designed to be.</p> </li> <li> <p><code>POST</code> MUST be used for non-idempotent operations such as resource     creation.</p> </li> </ul>"},{"location":"restful-api-standards/http-implementation/#http-request-headers","title":"HTTP request headers","text":"<p>PIs MUST support and handle the following request headers:</p> HEADER DESCRIPTION <code>Authorization</code> Used for authentication. APIs MUST validate this header and reject malformed requests. <code>Content-Type</code> MUST be included in requests with a body. Allowed values: <code>application/json</code>, <code>application/xml</code>, <code>multipart/form-data</code>, <code>application/x-www-form-urlencoded</code>. <code>Date</code> MUST be formatted as per RFC 5322, e.g. Tue, 11 Oct 2022 09:27:30 GMT. <p>Further reading and information</p> <p>RFC 5322 - Internet Message Format</p> <p>APIs SHOULD support the following request headers:</p> HEADER DESCRIPTION <code>Accept</code> Specifies the response format. Default: <code>application/json</code>. <code>Access-Control-Request-Method</code> Used in CORS preflight requests to indicate the intended HTTP method. <p>APIs MAY support additional request headers:</p> HEADER DESCRIPTION <code>x-api-key</code> A legacy authentication method. MAY be used only when legacy support is required. Prefer Authorization <code>X-Audit-Consent</code> JSON-encoded FHIR consent resource (base64, max 8KB). <code>X-Audit-Device</code> FHIR identifier for the client device (base64, max 8KB). <code>X-Au dit-Organisation</code> FHIR identifier for the client organisation (base64, max 8KB). <code>X-Audit-User</code> FHIR identifier for the authenticated user (base64, max 8KB). <code>X-Au thenticated_User</code> Identifies the client system for auditing. <code>Cache-Control</code> Controls caching (e.g. <code>no-store</code>). <code>Connection</code> Manages connection behaviour (e.g. <code>keep-alive</code>). <code>If-Match</code>, <code>If-None-Match</code> Used for optimistic concurrency control with resource updates. <code>Origin</code> If present, APIs MUST validate it against a list of allowed origins to ensure security. <code>X-Request-Id</code> A unique identifier for the API request. If not provided by the client, this identifier MAY be generated in the API Gateway."},{"location":"restful-api-standards/http-implementation/#http-response-headers","title":"HTTP response headers","text":"<p>APIs SHOULD return the following response headers:</p> HEADER DESCRIPTION <code>Cache-Control</code> Controls caching (e.g. <code>no-store</code> or <code>private, max-age=3600</code>). <code>Content-Security-Policy</code> Defines security policies to mitigate XSS and injection (e.g. <code>frame-ancestors 'none'</code>). <code>Content-Type</code> Specifies the response media type (e.g. <code>application/json</code> or <code>application/xml</code>). Used only if a message body is returned. <code>Location</code> On successful resource creation Post, the API MUST return a <code>201 CREATED</code> status and a Location header with the new resource's relative URL. <code>Request-Id</code> Echoes the unique request identifier provided by the client. <code>Strict-Transport-Security</code> Enforces HTTPS (e.g. <code>max-age=31536000; includeSubDomains</code>). <code>WWW-Authenticate</code> Specifies the required authentication method (e.g. <code>Bearer realm=\"nhswales365\", authorization_uri=\"...\"</code>). <code>X-Content-Type-Options</code> Prevents MIME sniffing (e.g. <code>nosniff</code>). <code>X-Frame-Options</code> Prevents clickjacking (e.g. <code>SAMEORIGIN</code> or <code>DENY</code>). <p>The following optional response headers MAY apply:</p> HEADER DESCRIPTION <code>Access-Control-Allow-Origin</code> Specifies allowed origins for web access. If used, the value MUST be non-wildcard (i.e., not *). <code>Content-Security-Policy</code> Restricts content sources (e.g. <code>default-src 'none'</code>). <code>Date</code> Response timestamp in RFC 5322 format (e.g. <code>Tue, 11 Oct 2022 09:27:31 GMT</code>). <code>ETag</code> Indicates the resource version. Used with <code>If-Match</code> / <code>If-None-Match</code> for optimistic concurrency control. <code>Expires</code> The date/time after which the response is considered stale (RFC 5322 format). <code>Feature-Policy</code> Defines permitted client-side features (e.g. <code>none</code>). <code>Referrer-Policy</code> Specifies the level of referrer information to include (e.g. <code>no-referrer</code>). <code>Retry-After</code> Indicates when a client should retry a failed request (expressed in seconds or as a date - RFC 5322 format. RFC 5322 is RECOMMENDED. <p>Practical tips</p> <p>Additional headers MAY be added or modified by the API gateway to deprecate or retire an API or apply rate limiting, for example. Speak to the platform team for more help.</p> <p>Further reading and information</p> <p>RFC 5322 - Internet Message Format</p>"},{"location":"restful-api-standards/http-implementation/#return-http-status-codes","title":"Return HTTP status codes","text":"<p>The server MUST return the correct HTTP status code for each API operation, as per RFC 9110. The table below lists common status codes, but others MAY be used if needed.</p> <ul> <li> <p>\"\u2705 Yes\" means the status code applies to that operation.</p> </li> <li> <p>An empty cell means the code is not usually used for that operation.</p> </li> </ul> HTTP STATUS CODE GET (COLLECTION) GET (RESOURCE) POST (COLLECTION) PUT (RESOURCE) PATCH (RESOURCE) DELETE (RESOURCE) <code>200 OK</code> \u2705 Yes \u2705 Yes \u2705 Yes See caveats below <code>201 CREATED</code> \u2705 Yes <code>202 ACCEPTED</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 <code>304 NOT MODIFIED</code> See caveats below <code>400 BAD REQUEST</code> \u2705 Yes \u2705 Yes <code>401 UNAUTHORIZED</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>403 FORBIDDEN</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>404 NOT FOUND</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>405 METHOD NOT ALLOWED</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>408 REQUEST TIMEOUT</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>409 CONFLICT</code> \u2705 Yes \u2705 Yes <code>412 PRECONDITION FAILED</code> \u2705 Yes \u2705 Yes \u2705 Yes See caveats below <code>415 UNSUPPORTED MEDIA TYPE</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>422 UNPROCESSABLE ENTITY</code> \u2705 Yes \u2705 Yes \u2705 Yes <code>428 PRECONDITIONS</code> REQUIRED \u2705 Yes \u2705 Yes \u2705 Yes See caveats below <code>429 TOO MANY REQUESTS</code> See caveats below <code>500 INTERNAL SERVER ERROR</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>501 NOT IMPLEMENTED</code> See caveats below \u2705 Yes \u2705 Yes <code>502 BAD GATEWAY</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>503 SERVICE UNAVAILABLE</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes <code>504 GATEWAY TIMEOUT</code> \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes \u2705 Yes"},{"location":"restful-api-standards/http-implementation/#caveats-and-edge-cases","title":"Caveats and edge cases","text":"<ul> <li> <p>While <code>PATCH</code> can return 200 <code>OK</code> with the updated resource, 202     <code>ACCEPTED</code> is preferred for asynchronous processing. But some     implementations MAY choose to return <code>200 OK</code> instead.</p> </li> <li> <p><code>304 NOT MODIFIED</code> applies only when the API supports caching with     conditional GET requests. The server MAY return <code>304 NOT MODIFIED</code>     if the client's cached version is still valid.</p> </li> <li> <p>Use <code>409 CONFLICT</code>when there's a conflict with the current state of     the target resource. Use <code>422 UNPROCESSABLE ENTITY</code> when the server     understands the request but can't process it due to semantic     errors.</p> </li> <li> <p>Use <code>409 CONFLICT</code>when there's a conflict with the current state of     the target resource. Use <code>422 UNPROCESSABLE ENTITY</code> when the server     understands the request but can't process it due to semantic     errors.</p> </li> <li> <p>While <code>415 UNSUPPORTED MEDIA TYPE</code> is typically used for <code>POST</code>, <code>PUT</code> and     <code>PATCH</code>, it MAY apply to <code>GET</code> if a body is sent with an unsupported     media type --- although this is rare.</p> </li> <li> <p><code>412 PRECONDITION FAILED</code> and <code>428 PRECONDITIONS</code> REQUIRED are typically     used for <code>POST</code>, <code>PUT</code> and <code>PATCH</code>. However, some designs MAY also     apply them to <code>DELETE</code> if preconditions are enforced.</p> </li> <li> <p>Use <code>428 PRECONDITIONS</code> REQUIRED when the server requires the request to     be conditional, typically to prevent the \"lost update\" problem. Use    <code>412 PRECONDITION FAILED</code> when a precondition specified in the request    isn't met.</p> </li> <li> <p>Typically our API platform will apply rate limiting and return     <code>429 TOO MANY REQUESTS</code> when appropriate.</p> </li> <li> <p>Some designs MAY extend the use of <code>501 NOT IMPLEMENTED</code> to other     methods if a particular method is not supported by the server.</p> </li> </ul> <p>Further reading and information</p> <p>RFC 9110: HTTP Semantics - Status Codes (rfc-editor.org)</p>"},{"location":"restful-api-standards/http-message-caching/","title":"HTTP message caching","text":"<p>Typically, you SHOULD NOT allow sensitive data, returned over an authenticated (HTTPS) connection, to be cached. But if you do, you MUST make sure there is no risk that network appliances cache data in clear text. Speak to the Cyber security team for help.</p>"},{"location":"restful-api-standards/introduction/","title":"Introduction","text":""},{"location":"restful-api-standards/introduction/#purpose","title":"Purpose","text":"<p>These standards:</p> <ul> <li> <p>Specify the requirements for designing and building RESTful APIs.</p> </li> <li> <p>Provide guidance for aligning with our API Strategy &amp; Roadmap.</p> </li> </ul> <p>They are intended for API producers but may also assist teams integrating APIs into client applications.</p> <p>Practical tips</p> <p>If you have production APIs, you need not introduce breaking changes solely to comply. Contact the author for support.</p> <p>Further reading and information</p> <p>The API Strategy &amp; Roadmap</p>"},{"location":"restful-api-standards/introduction/#scope","title":"Scope","text":""},{"location":"restful-api-standards/introduction/#in-scope","title":"In-scope","text":"<p>These standards apply to RESTful APIs designed and built for:</p> <ul> <li> <p>Internal use within the organisation.</p> </li> <li> <p>External use by clients, partners, or third parties.</p> </li> </ul> <p>A good practice checklist is also included to assist teams in achieving compliance.</p>"},{"location":"restful-api-standards/introduction/#out-of-scope","title":"Out-of-scope","text":"<p>These standards do not apply to:</p> <ul> <li> <p>Non-RESTful APIs, including GraphQL, gRPC, and event-driven APIs     (e.g. Azure Functions).</p> </li> <li> <p>APIs designed primarily to handle large binary data (e.g. image or     file delivery).</p> </li> <li> <p>Topics outside API design and implementation, such as Domain-driven     design or microservices architecture.</p> </li> <li> <p>Infrastructure, networking, or Web Application Firewalls (WAF).</p> </li> <li> <p>API publishing pipelines (e.g. via Apigee).</p> </li> <li> <p>Telemetry, monitoring, or general software development practices.</p> </li> </ul>"},{"location":"restful-api-standards/introduction/#references","title":"References","text":"<ol> <li>The API Strategy and Roadmap</li> <li>Software development handbook</li> <li>Testing for lost updates</li> <li>How to write a Test Summary Report</li> <li>SDS-TEM-5 - Test Summary Report template</li> <li>Using Source Control</li> <li>How to Organise Your Software Solution</li> <li>General Coding Standards</li> <li>IG-TEM-1 - Data Protection Impact Assessment Form Template</li> <li>DHCW-POL-5 - Service Level Target Policy</li> </ol>"},{"location":"restful-api-standards/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions. If a hyperlink is missing, search for the document in our Document Management System.</p>"},{"location":"restful-api-standards/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>Conforming to these standards helps you build APIs that are consistent, easy to use, safe and secure.</p> <p>Practical tips</p> <p>Integration as a 'war of attrition'</p> <p>Read about Mark Wardle's experience integrating applications with NHS Wales systems. Mark is a Consultant Neurologist and Chair of the Welsh Technical Standards Board.</p> <p>Further reading and information</p> <p>wardle/concierge: README &gt; Background</p>"},{"location":"restful-api-standards/json-response-payload-structure/","title":"JSON response payload structure","text":""},{"location":"restful-api-standards/json-response-payload-structure/#response-format","title":"Response format","text":"<p>JSON response payloads SHOULD adhere to the following structure:</p> <pre><code>    \u251c\u2500\u2500 meta (Object, 0..1)\n    \u251c\u2500\u2500 data (Object, 0..1)\n    \u251c\u2500\u2500 links (Object, 0..1)\n    \u2502         \u251c\u2500\u2500 href (String, 1..1)\n    \u2502         \u2514\u2500\u2500 rel (String, 1..1)\n    \u2514\u2500\u2500 errors (Object, 0..1)\n            \u251c\u2500\u2500 type (String, 1..1)\n            \u251c\u2500\u2500 title (String, 1..1)\n            \u251c\u2500\u2500 status (Number, 1..1)\n            \u251c\u2500\u2500 detail (String, 1..1)\n            \u251c\u2500\u2500 instance (String, 0..1)\n            \u2514\u2500\u2500 invalidParams (Array, 0..1)\n</code></pre> ELEMENT TYPE CARDINALITY DESCRIPTION meta Object 0..1 Contains metadata (e.g. pagination details such as offset, pageOffset, pageSize, total) data Object 0..1 Contains the primary resource or a resource collection. When returning a single resource, you MAY place the resource directly inside data without nesting. links Object 0..1 Provides links to related resources or partial results. SHOULD only identify resources in the same versioned Namespace. errors Object 0..1 Contains error details as per RFC 7807. If present no other top-level objects should be returned.. href String 1..1 The URL to a nested resource or the next set of items. rel String 1..1 Relation value. Use a standard Link Relation Type if available. type 1..1 String URL to the API's error documentation. title 1..1 String A short, human-readable summary of the error. status 1..1 Number Status code (e.g. 400 BAD REQUEST). detail 1..1 String Detailed error description for troubleshooting. instance 0..1 String URL or path to the resource that caused the error. invalidParams 0..1 Array Array of objects specifying invalid parameters and reasons."},{"location":"restful-api-standards/json-response-payload-structure/#get-operation-on-an-individual-resource","title":"Get operation on an individual resource","text":"<p>For a GET operation on an individual resource, the response SHOULD enclose the primary resource within a data object. The outer property name uses the singular form of the resource name.</p> <p>Direct:</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients/9991234566\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\": \"Appleby\"\n        }\n    }\n</code></pre> <p>Nested:</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients/9991234566\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": {\n            \"patient\": {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\": \"Appleby\",\n            // ... other patient details ...\n            }\n        }\n    }\n</code></pre>"},{"location":"restful-api-standards/json-response-payload-structure/#get-operation-on-a-collection-of-resources","title":"Get operation on a collection of resources","text":"<p>For a collection of resources, the response SHOULD enclose the resource collection within a data object, using the plural form of the resource name.</p> <p>A collection with 0 items SHOULD return HTTP 200 OK rather than 404 NOT FOUND</p> <p>Non-empty collection example:</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": {\n            \"patients\": [\n            {\n                \"NHSNumber\": \"9991234566\",\n                \"firstName\": \"Humphrey\",\n                \"lastName\": \"Appleby\",\n                // ... other patient details ...\n            },\n            {\n                \"NHSNumber\": \"9991234567\",\n                \"firstName\": \"Jim\",\n                \"lastName\": \"Hacker\",\n                // ... other patient details ...\n            },\n            // ... more patients ...\n            ]\n        }\n    }\n</code></pre> <p>Empty collection - valid example:</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": []\n    }\n</code></pre> <p>Empty collection - invalid example:</p> <p>Examples of practices to avoid</p> <pre><code>    GET /{base}/patients\n    // 404 NOT FOUND\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": []\n    }\n</code></pre>"},{"location":"restful-api-standards/json-response-payload-structure/#get-operation-on-nested-resources","title":"Get operation on nested resources","text":"<p>For nested resources, the response SHOULD either embed the nested resources or provide navigable links in the links object. See also Returning related resources using query parameters.</p> <p>Embedded resources example (using the expand parameter):</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients/9991234566?expand=practitioners,conditions\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": {\n            \"patient\": {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\": \"Appleby\",\n            // ... other patient details ...\n            \"practitioner\": {\n                \"id\": \"123\",\n                \"name\": \"Dr. Liz Asher\",\n                // ... other details of the primary care provider ...\n            },\n            \"conditions\": [\n                {\n                \"id\": \"1\",\n                \"name\": \"Hypertension\",\n                // ... other details of the condition ...\n                },\n                {\n                \"id\": \"2\",\n                \"name\": \"Diabetes\",\n                // ... other details of the condition ...\n                }\n                // ... more condition records ...\n            ]\n            }\n        }\n    }\n</code></pre> <p>Linked resources example (using the include parameter):</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients?include=conditions,practitioners\n    // 200 OK\n    {\n        \"data\": {\n            \"patient\": {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\": \"Appleby\",\n            // ... other patient details ...\n            }\n        },\n        \"links\": {\n            \"practitioner\": {\n            \"href\": \"/practitioners/123\",\n            \"rel\": \"practitioner\",\n            \"NHSNumber\": \"9991234566\"\n            },\n            \"conditions\": [\n            {\n                \"href\": \"/conditions/1\",\n                \"rel\": \"condition\",\n                \"NHSNumber\": \"9991234566\"\n            },\n            {\n                \"href\": \"/conditions/2\",\n                \"rel\": \"condition\",\n                \"NHSNumber\": \"9991234566\"\n            }\n            ]\n        }\n    }\n</code></pre> <p>Further reading and information</p> <p>Link Relations (www.iana.org)</p>"},{"location":"restful-api-standards/json-response-payload-structure/#data-operations-post-put-patch","title":"Data operations (POST, PUT &amp; PATCH)","text":"<p>For data operations such as POST, PUT, or PATCH, the request SHOULD include the primary resource data. After a successful POST operation on a collection, the server SHOULD create and return a unique resource identifier.</p> <p>Example request:</p> <p>Examples of good practice</p> <pre><code>    POST /{base}/patients\n    Host: //some host\n    Content-Type: application/json; charset=utf-8\n    {\n    \"data\": {\n        \"patient\": {\n        // ... patient details ...\n        }\n    }\n    }\n</code></pre> <p>Example response:</p> <p>Examples of good practice</p> <pre><code>    201 Created\n    Location Header: /{base}/patients/{9991234568}\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": {\n            \"patient\": {\n            \"NHSNumber\": \"9991234568\",  // The server-generated unique identifier\n            // ... other patient details ...\n            }\n        }\n    }\n</code></pre>"},{"location":"restful-api-standards/json-response-payload-structure/#returning-an-error","title":"Returning an error","text":"<p>When returning an error, the server SHOULD follow the RFC 7807 format. This ensures that error information is provided in a consistent and standardised manner. See Error reporting for more details.</p> <p>Example request:</p> <p>Examples of good practice</p> <pre><code>    POST /{base}/patients\n    Host: //some host\n    Content-Type: application/json; charset=utf-8\n    {\n        \"data\": {\n            \"patient\": {\n            \"NHSNumber\": \"9991234568\",\n            \"firstName\": \"Bernard\",\n            \"lastName\": \"Woolley\",\n            \"dateOfBirth\": \"1942-01-06\",\n            \"gender\": \"Male\",\n            // ... other patient details ...\n            }\n        }\n    }\n</code></pre> <p>Example response:</p> <p>Examples of good practice</p> <pre><code>    HTTP/1.1 400 Bad Request\n    Content-Type: application/problem+json\n    {\n        \"type\": \"https://example.com/errors/id-not-allowed\",\n        \"title\": \"ID Not Allowed\",\n        \"status\": 400,\n        \"detail\": \"Resource identifiers (IDs) are managed exclusively by the server\",\n        \"instance\": \"/api/patients\",\n        \"invalidParams\": [\n            {\n            \"name\": \"NHSNumber\",\n            \"reason\": \"NHSNumber should not be provided in the client request.\"\n            }\n        ]\n    }\n</code></pre> <p>Further reading and information</p> <p>RFC 7807 - Problem Details for HTTP APIs</p>"},{"location":"restful-api-standards/naming/","title":"Naming","text":""},{"location":"restful-api-standards/naming/#resource-names","title":"Resource names","text":"<p>Resource names SHOULD be clear, descriptive and written in lowerCamelCase. Use plural nouns in URLs and to identify resource collections in JSON payloads. Use the singular form to identify an individual resource in a JSON payload.</p> <p>Examples of good practice</p> <p><code>/{base}*/patients/{id*}</code></p> <p><code>/{base}*/Patient/{id*}</code></p> <p><code>/{base}*/getPatient/{id*}</code></p> <p>Prefer nouns to verbs, even if the noun is not immediately obvious.</p> <p>Examples of good practice</p> <p><code>/{base}*/uk-who/calculation</code></p> <p><code>/{base}*/uk-who/calculate</code></p>"},{"location":"restful-api-standards/naming/#resource-identifiers","title":"Resource identifiers","text":"<p>Resource identifiers MUST serve as unique references for resources. It is RECOMMENDED to use the field name \"id\" or to concatenate the resource name with \"Id\" when referencing these identifiers.</p> <p>Resource identifiers MUST be URL safe and not expose implementation details such as database primary keys.</p>"},{"location":"restful-api-standards/naming/#resource-fields","title":"Resource fields","text":"<p>Resource fields MUST be descriptive and use lowerCamelCase.</p> <p>Examples of good practice</p> <pre><code>    {\n    \"data\": {\n        \"patients\": [\n        {\n            \"firstName\": \"Humphrey\",\n            // ... other patient details ...\n        },\n            // ... more patients ...\n        ]\n    }\n}\n</code></pre>"},{"location":"restful-api-standards/naming/#query-parameters","title":"Query parameters","text":"<p>Query parameters SHOULD be written in lowerCamelCase.</p> <p>You SHOULD NOT define query parameters with names that differ only in case.</p> <p>The server SHOULD NOT be case sensitive when processing query parameters.</p> <p>When query parameters are treated as strings they present an opportunity for injection attacks. To minimise risk, the server SHOULD constrain the values of string filters to enumerations or regular expressions.</p>"},{"location":"restful-api-standards/naming/#reserved-names","title":"Reserved names","text":"<p>You SHOULD adhere to the defined behaviour for query parameters as described in this standard. These names are reserved for their intended purposes and MUST NOT be repurposed.</p> <p>Further reading and information</p> <p>Microsoft Graph REST API Guidelines</p>"},{"location":"restful-api-standards/open-api-specification/","title":"Open API specification","text":"<p>You SHOULD write an OpenAPI specification before generating server-side code.</p> <p>A design-first approach SHOULD be used to enable earlier testing and validation. However, you MAY adopt a code-first approach where it better suits the needs of your project. Refer to the Documentation section for further guidance.</p> <p>Practical tips</p> <p>Use the API platform team's Open API template to ensure your API includes required security schemas and essential operations like Ping and Status.</p> <p>Further reading and information</p> <p>OpenAPI Specification - Version 3.1.0 | Swagger</p> <p>OpenAPI &amp; .NET: You're Doing It Wrong - Mark Rendle - NDC London 2023</p> <p>C# ASP.NET 5 - Designing Web APIs with Swagger aka OpenAPI Specification</p>"},{"location":"restful-api-standards/owasp-top-10/","title":"OWASP top 10","text":"<p>During assurance, you MUST provide evidence of adequate mitigations against OWASP Top 10 API Security Risks -- 2023 in a Test Summary report.</p> <p>Further reading and information</p> <p>OWASP Top 10 API Security Risks -- 2023 - OWASP API Security Top 10</p>"},{"location":"restful-api-standards/paging/","title":"Paging","text":"<p>When performing a GET operation on a collection, the server MAY return a partial result. The server SHOULD apply paging to collections with an unbounded number of items.</p>"},{"location":"restful-api-standards/paging/#token-based-paging-recommended","title":"Token-based paging (recommended)","text":"<p>Token-based paging, where the server controls the paging sequence, is RECOMMENDED. Common approaches include cursor, keyset, and seek paging.</p> <p>The server SHOULD supply a continuation token in the href field of the navigation link and assign it to a query parameter named token. This token MUST be an encoded string.</p> <p>If the client omits the token, the server MUST return the first partial result, eliminating the need to include a page token in the URL of the first link.</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients?pageOffset=2&amp;pageSize=10&amp;total=true\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n    \"meta\": {\n        \"pageOffset\": 2,\n        \"pageSize\": 10,\n        \"total\": 40\n    },\n    \"data\": {\n        \"pageOffset\": 2,\n        \"pageSize\": 10,\n        \"patients\": [\n        {\n            \"NHSNumber\": \"9991234566\"\n            // ... other patient details ...\n        },\n        {\n            \"NHSNumber\": \"9991234567\"\n            // ... other patient details ...\n        }\n        // ... 8 more patient records ...\n        ]\n    },\n    \"links\": [\n        {\n        \"href\": \"/patients?page=2&amp;pageSize=10\",\n        \"rel\": \"self\"\n        },\n        {\n        \"href\": \"/patients?page=1&amp;pageSize=10\",\n        \"rel\": \"first\"\n        },\n        {\n        \"href\": \"/patients?page=1&amp;pageSize=10\",\n        \"rel\": \"prev\"\n        },\n        {\n        \"href\": \"/patients?page=3&amp;pageSize=10\",\n        \"rel\": \"next\"\n        },\n        {\n        \"href\": \"/patients?page=4&amp;pageSize=10\",\n        \"rel\": \"last\"\n        }\n    ]\n    }\n</code></pre>"},{"location":"restful-api-standards/paging/#client-driven-paging","title":"Client-driven paging","text":"<p>Allowing clients to control paging provides flexibility but may be less efficient. The server MAY allow clients to supply an offset (or pageOffset) integer value as the starting point.</p> <p>If omitted, the server MUST use default values of offset=0 or pageOffset=1. If the value is greater than or equal to the number of resources, the server MUST return an empty collection.</p> <p>If the value is invalid, the server SHOULD return a 400 BAD REQUEST HTTP status code.</p> <p>The server SHOULD include the offset values in the response --- whether explicitly provided or not --- to maintain context for the client.</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients?pageOffset=2&amp;pageSize=10&amp;total=true\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    {\n    \"meta\": {\n        \"pageOffset\": 2,\n        \"pageSize\": 10,\n        \"total\": 40\n    },\n    \"data\": {\n        \"pageOffset\": 2,\n        \"pageSize\": 10,\n        \"patients\": [\n        {\n            \"NHSNumber\": \"9991234566\",\n            // ... other patient details ...\n        },\n        {\n            \"NHSNumber\": \"9991234567\",\n            // ... other patient details ...\n        }\n        // ... 8 x more patient records ...\n        ]\n    },\n    \"links\": {\n        \"self\": {\n        \"href\": \"/patients?page=2&amp;pageSize=10\",\n        \"rel\": \"self\"\n        },\n        \"first\": {\n        \"href\": \"/patients?page=1&amp;pageSize=10\",\n        \"rel\": \"first\"\n        },\n        \"prev\": {\n        \"href\": \"/patients?page=1&amp;pageSize=10\",\n        \"rel\": \"prev\"\n        },\n        \"next\": {\n        \"href\": \"/patients?page=3&amp;pageSize=10\",\n        \"rel\": \"next\"\n        },\n        \"last\": {\n        \"href\": \"/patients?page=4&amp;pageSize=10\",\n        \"rel\": \"last\"\n        }\n    }\n    }\n</code></pre>"},{"location":"restful-api-standards/paging/#paging-stability","title":"Paging stability","text":"<p>When implementing paging, the server MUST ensure the following:</p> <ul> <li> <p>The server MUST sort on a unique value. This may require sorting     on an additional value (typically a primary key) if necessary.</p> </li> <li> <p>Sorting and filtering parameters MUST be consistent across pages     to maintain predictability.</p> </li> <li> <p>Query options MUST NOT be changed while iterating over a partial     result set.</p> </li> </ul> <p>(See the sections on Filtering, Sorting and Compound Collections for more information.)</p>"},{"location":"restful-api-standards/paging/#page-links","title":"Page links","text":"<p>The server MUST indicate a partial result by including navigation links as JSON objects within the links array. Each JSON object SHOULD contain rel and href\u00a0 fields.</p> <p>The rel field SHOULD be restricted to the following values: self, first, prev, next and last.</p> <p>The absence of a next link indicates that there are no more results.</p> <p>The absence of a prev link typically indicates the start of the result set, although it MAY be omitted if reverse paging is expensive or impractical.</p> <p>Similarly, the server MAY omit the last link if providing it is costly or impractical.</p> <p>href fields in links MUST contain a URL with any appropriate query parameters.</p>"},{"location":"restful-api-standards/paging/#page-size","title":"Page size","text":"<p>The server MAY allow clients to specify the number of items returned using the pageSize query parameter. It MUST either use this value or apply a default pageSize when none is specified.</p> <p>The server MUST set a default pageSize and an upper limit (maxPageSize) for each resource collection. These values SHOULD be determined based on reasonable estimates of default and maximum request times and payload sizes.</p> <p>Clients MAY specify an integer value for pageSize or request the maximum allowed by setting pageSize to maxPageSize.</p> <p>If pageSize is not a non-negative integer or exceeds maxPageSize, the server SHOULD return a 400 BAD REQUEST HTTP status code.</p> <p>The server MAY return fewer items than specified by the pageSize when returning the last page.</p> <p>The server SHOULD include the pageSize value in the links object within the response, regardless of whether it was explicitly provided or set by default.</p>"},{"location":"restful-api-standards/paging/#total","title":"Total","text":"<p>The server MAY allow clients to request the total number of matches by providing a total query parameter.</p> <p>If the client specifies total=true, the server SHOULD return the total number of matches in the total field at the root of the JSON response.</p> <p>By default, the total parameter MUST be set to false.</p> <p>Practical tips</p> <p>total indicates the overall number of results that match the request, not the number of resources returned in the current response..</p>"},{"location":"restful-api-standards/paging/#paging-nested-resources","title":"Paging nested resources","text":"<p>The server MAY support client paging of nested resources and SHOULD provide the necessary navigation links for such cases.</p>"},{"location":"restful-api-standards/paging/#paging-implementation","title":"Paging implementation","text":"<p>When implementing paging, the server SHOULD consider the following key aspects:</p> <ul> <li> <p>Establish a method for handling updates to maintain data consistency     and accuracy.</p> </li> <li> <p>Implement efficient data retrieval mechanisms to minimise     performance impact.</p> </li> <li> <p>Ensure secure encoding of continuation tokens to protect client     privacy and data integrity.</p> </li> </ul>"},{"location":"restful-api-standards/payload-rules/","title":"Payload rules","text":"<p>Some rules in this section align with JSON API, while others differ. You MAY follow the complete JSON API specification, but you MUST carefully consider its impact.</p>"},{"location":"restful-api-standards/payload-rules/#encoding-and-content-negotiation","title":"Encoding and content negotiation","text":"<p>For encoding, you SHOULD use \"UTF-8\".</p> <p>Unicode MUST be used as the standard encoding for all text representations of dates in APIs, and it is the default for JSON.</p> <p>The server SHOULD represent resources in JSON (RFC 8259/ECMA-404) by default, defined as application/json in the OpenAPI specification.</p> <p>You MAY add extra media types, but they MUST be described in the OpenAPI definition.</p> <p>If your API can return multiple media types, it SHOULD return the first supported type indicated in the HTTP Request's Accept header.</p> <p>If the requested media types are unsupported, the server SHOULD return an HTTP response with status 415 UNSUPPORTED MEDIA TYPE.</p>"},{"location":"restful-api-standards/payload-rules/#date-formats","title":"Date formats","text":"<p>HTTP headers containing datetime values MUST use the RFC 5322 format:</p> <ul> <li><code>ddd, dd MMM yyyy HH:mm:ss Z</code></li> </ul> <p>Dates or timestamps in the JSON payload of the response MUST conform to the RFC 3339 format:</p> <ul> <li><code>YYYY-MM-DDTHH:mm:ssZ</code></li> </ul>"},{"location":"restful-api-standards/payload-rules/#payload-size","title":"Payload size","text":"<p>For performance reasons, the server SHOULD use paging for large datasets or binary objects.</p> <p>The server SHOULD keep the total payload size below 2 MB and MUST ensure that it does not exceed 10 MB, as this is a hard limit for some platforms.</p> <p>Further reading and information</p> <p>JSON:API --- A specification for building APIs in JSON</p> <p>RFC 8259: The JavaScript Object Notation (JSON) Data Interchange Format</p> <p>ECMA-404 - Ecma International</p> <p>RFC 5322 - Internet Message Format</p> <p>RFC 3339 - Date and Time on the Internet: Timestamps</p>"},{"location":"restful-api-standards/performance-and-response-times/","title":"Performance and response times","text":"<p>You MUST define a maximum response time and specify any exceptions.</p> <p>To improve performance and minimise network traffic, you SHOULD consider the following options. Your choice depends on your use-case and user needs:</p> <ul> <li> <p>Implement a server-side cache (for example, ASP.NET output caching)     or a distributed cache (for example, Redis) for more complex     scenarios.</p> </li> <li> <p>Allow clients to cache responses (response caching) while taking     care to mitigate any potential security risks; see HTTP Messaging     caching.</p> </li> <li> <p>Avoid blocking calls. For example, ASP.NET web APIs SHOULD use     the async keyword.</p> </li> <li> <p>Take advantage of paging and filtering to     limit the amount of data returned in responses.</p> </li> <li> <p>Compress responses and minify JSON payloads.</p> </li> </ul> <p>You MUST monitor and analyse API performance and take corrective actions if your APIs do not meet the performance thresholds defined in your solutions architecture.</p> <p>Further reading and information</p> <p>ASP.NET Core Best Practices | Microsoft Learn</p>"},{"location":"restful-api-standards/retrieving-related-data/","title":"Retrieving related data","text":""},{"location":"restful-api-standards/retrieving-related-data/#using-separate-urls-for-related-resources","title":"Using separate urls for related resources","text":"<p>Endpoints SHOULD return only primary resources by default.</p> <p>To prevent overloading clients, the server MAY offer alternative endpoints to fetch related data.</p> <p>URLs SHOULD NOT exceed two levels of nesting to maintain readability and usability.</p> <p>If a resource can be independently accessed without its parent, it SHOULD have its own top-level endpoint.</p> <p>Examples of good practice</p> <p><code>{base}/appointmentsService/patients</code></p> <p><code>{base}/appointmentsService/patients/{id}</code></p> <p><code>{base}/appointmentsService/patients/{id}/conditions</code></p> <p><code>{base}/appointmentsService/patients/{id}/conditions/{id}</code></p> <p><code>{base}*/appointmentsService/patients/*{id}*/encounters/*{id}*/observations/*{id}</code></p>"},{"location":"restful-api-standards/retrieving-related-data/#returning-related-resources-using-query-parameters","title":"Returning related resources using query parameters","text":"<p>The server MAY support include and expand query parameters to optimise data retrieval.</p> <p>include MUST return navigation links for the specified related resources.</p> <p>expand MUST embed related data directly within the response.</p> <p>Examples of good practice</p> <p><code>{base}/appointmentsService/patients/{id}?include=conditions</code></p> <p><code>{base}/appointmentsService/patients/{id}?expand=practitioners,conditions</code></p> <p>Additional RECOMMENDATIONS:</p> <ul> <li> <p>Separate URLs vs Query Parameters: Use query parameters only     when they add value. For complex data retrieval, consider GraphQL.</p> </li> <li> <p>Balance Performance and Usability: Overuse of expand can degrade     performance, while excessive nesting complicates API navigation.</p> </li> </ul> <p>Further reading and information</p> <p>REST Modelling: designing a future-friendly AP | LinkedIn</p> <p>Use links, not keys, to represent relationships in APIs | Google Cloud Blog</p> <p>Organise the API design around resources | Microsoft Learn</p> <p>Extraneous Fetching antipattern - Azure Architecture Center | Microsoft Learn</p> <p>Chatty I/O antipattern - Performance antipatterns for cloud apps | Microsoft Learn</p>"},{"location":"restful-api-standards/secrets-and-certificate-management/","title":"Secrets and certificate management","text":"<p>You SHOULD NOT store secrets in clear-text storage.</p> <p>Secrets and API keys MUST be stored and encrypted in a secrets manager. Where secrets are injected from a secrets manager into a CI-CD pipeline, they MUST NOT be logged.</p>"},{"location":"restful-api-standards/security-headers/","title":"Security headers","text":"<p>Use HTTP response headers to specify security controls in HTTP communications. These serve as an extra layer of protection against common vulnerabilities and privacy risks.</p>"},{"location":"restful-api-standards/security-headers/#minimise-information-disclosure","title":"Minimise information disclosure","text":"<p>You SHOULD remove unnecessary HTTP response headers that expose details about the server and its underlying technologies. For example, consider the following response which includes headers that reveal server information:</p> <p>Examples of practices to avoid</p> <pre><code>    *HTTP/1.1 201 Created*\n\n    *Content-Type: application/json; charset=utf-8*\n\n    *Location: /api/patients/9991234568*\n\n    *Date: 2024-02-17T12:00:00Z*\n\n    *Server: Microsoft-IIS/10.0*\n\n    *X-AspNet-Version: 6.0.0*\n\n    *X-AspNetMvc-Version: 6.0.0*\n</code></pre> <p>You SHOULD remove these sensitive headers. A valid response might look like this:</p> <p>Examples of good practice</p> <pre><code>    *HTTP/1.1 201 Created*\n\n    *Content-Type: application/json; charset=utf-8*\n\n    *Location: /api/patients/9991234568*\n\n    *Date: 2024-02-17T12:00:00Z*\n</code></pre>"},{"location":"restful-api-standards/sorting/","title":"Sorting","text":"<p>The server MAY support sorting of result sets by accepting a comma\u2010separated list of expressions via the sort query parameter. The server SHOULD honour the client's preferences.</p> <p>By default the server SHOULD sort in ascending order but MAY sort in descending order if the client prefixes an expression with a dash (-).</p> <p>NULL values MUST be treated as less than non-NULL values.</p> <p>Items MUST be sorted according to the order of expressions provided. The first expression defines the primary sort order; for items with identical values in the first expression, the second expression defines the secondary order, and so on.</p> <p>Examples of good practice</p> <pre><code>    GET /{base}/patients?sort=-lastName\n    // 200 OK\n    Content-Type: application/json; charset=utf-8\n    \"data\": {\n        \"patients\": [\n        {\n            \"NHSNumber\": \"9991234568\",\n            \"firstName\": \"Bernard\",\n            \"lastName\": \"Woolley\",\n            // ... other patient details ...\n        },\n        {\n            \"NHSNumber\": \"9991234567\",\n            \"firstName\": \"Jim\",\n            \"lastName\": \"Hacker\",\n            // ... other patient details ...\n        },\n        {\n            \"NHSNumber\": \"9991234566\",\n            \"firstName\": \"Humphrey\",\n            \"lastName\": \"Appleby\",\n            // ... other patient details ...\n        }\n        // ... more patients ...\n        ]\n    }\n    }\n</code></pre>"},{"location":"restful-api-standards/testing/","title":"Testing","text":"<p>This section provides help for creating your API Test strategy and plans.</p>"},{"location":"restful-api-standards/testing/#shift-left","title":"Shift left","text":"<p>Test early in the API lifecycle and continue testing at every stage. This 'shift left' approach challenges you to develop T-shaped skills. For testers, this may involve writing code for automated tests. For developers, it means recognising that testing is a shared responsibility.</p> <p>Further reading and information</p> <p>What is Shifting Left Testing? | Shift Left Meaning in Software Testing</p>"},{"location":"restful-api-standards/testing/#automate-as-much-as-you-can","title":"Automate as much as you can","text":"<p>Test automation is crucial for shifting left and you SHOULD execute tests as part of your CI/CD pipelines. This practice helps identify and fix issues as they are introduced.</p> <p>Practical tips</p> <p>Consider automating tests for stories with frequent execution, critical functionality, stable requirements and variable data.</p>"},{"location":"restful-api-standards/testing/#validate-the-openapi-specification","title":"Validate the OpenAPI specification","text":"<p>Check the OpenAPI specification for structure and format to ensure the contract is correct. Use the out-of-the-box rules provided by linting tools like Spectral or Postman Linter to verify proper JSON and YAML formatting.</p> <p>It is RECOMMENDED you write a custom ruleset to enforce the rules described in this document.</p> <p>You SHOULD Inspect the API contract for the following, adding these checks to your CI/CD pipeline.</p> <ul> <li> <p>Endpoints are named correctly.</p> </li> <li> <p>Resources and their types are accurate.</p> </li> <li> <p>Relationships between resources are properly defined.</p> </li> <li> <p>No functionality is missing or duplicated.</p> </li> </ul> <p>Further reading and information</p> <p>API linting with Spectral | What is it and how does it work?</p>"},{"location":"restful-api-standards/testing/#unit-tests","title":"Unit tests","text":"<p>Write unit tests as you build your API to catch issues early. Start with minimal tests and expand as necessary -- do not overcomplicate matters.</p> <p>You SHOULD add these tests to your CI/CD pipeline and publish code coverage metrics in a Test Summary report.</p>"},{"location":"restful-api-standards/testing/#functional-tests","title":"Functional tests","text":"<p>Functional tests SHOULD verify that:</p> <ul> <li> <p>The correct HTTP headers and HTTP status     codes are returned.</p> </li> <li> <p>The media type and its payload are correct, with appropriate field     names, types and values.</p> </li> <li> <p>Endpoints behave according to the specified business logic and     requirements.</p> </li> </ul>"},{"location":"restful-api-standards/testing/#test-for-failure","title":"Test for failure","text":"<p>Functional testing SHOULD include negative tests and check for valid error responses. These SHOULD cover scenarios for handling transient faults.</p>"},{"location":"restful-api-standards/testing/#behaviour-driven-development-bdd","title":"Behaviour driven development (bdd)","text":"<p>Automate validation by incorporating BDD executable scenarios into your functional tests. For example:</p> <p>Examples of good practice</p> <p>Scenario: Verify Successful Patient Retrieval</p> <p>Given the API endpoint for retrieving patient data</p> <p>When a GET request is made with a valid patient ID</p> <p>Then the API should return a 200 OK status code</p> <p>And the response should include correct patient information</p>"},{"location":"restful-api-standards/testing/#security-tests","title":"Security tests","text":"<p>Plan security testing with the API platform and cyber security teams. While many tests are executed against the proxy, you SHOULD also test the backend API for common vulnerabilities.</p> <p>Refer to the Security section when planning your tests. Examples of common security tests include:</p> <ul> <li> <p>Input validation tests to prevent SQL injection attacks.</p> </li> <li> <p>Verifying that only authorised users can access patient data.</p> </li> <li> <p>Data encryption checks to confirm that data is transmitted over     HTTPS.</p> </li> <li> <p>Rate limiting tests to detect and mitigate potential brute-force     attacks.</p> </li> </ul>"},{"location":"restful-api-standards/testing/#performance-tests","title":"Performance tests","text":"<p>You MUST check the maximum response time.</p> <p>You SHOULD consider whether to conduct, baseline, load, stress, soak and scalability tests.</p> <p>Practical tips</p> <p>Keep in mind that setting up the right environment can be challenging and that repeating tests consistently may be difficult due to network variations.</p>"},{"location":"restful-api-standards/testing/#usability-tests","title":"Usability tests","text":"<p>You SHOULD test the entire API consumer journey including documentation, authentication and code examples, to ensure usability for users without prior knowledge of our systems.</p>"},{"location":"restful-api-standards/testing/#keep-tests-organised","title":"Keep tests organised","text":"<p>Tests MUST be organised and named according to our coding standards.</p> <p>Further reading and information</p> <p>How to Organise Your Software Solution</p> <p>General Coding Standards</p>"},{"location":"restful-api-standards/testing/#test-summary-report","title":"Test summary report","text":"<p>You SHOULD write a Test Summary report for every major, minor or patch version of your API. The content MAY vary depending on the version but you SHOULD consider including each of the following headings.</p> <p>Note</p> <ol> <li> <p>Static Analysis results (e.g. Spectral tests)</p> </li> <li> <p>Code Metrics (e.g. code coverage based on results from automated tests)</p> </li> <li> <p>Functional Tests</p> </li> <li> <p>Security Tests (including references to any external pen test reports)</p> </li> <li> <p>Performance Tests</p> </li> <li> <p>Usability Tests</p> </li> </ol> <p>Practical tips</p> <p>Some headings MAY be marked as \"N/A\" if not applicable for the version tested.</p> <p>Further reading and information</p> <p>How to write a Test Summary Report</p> <p>SDS-TEM-5 Test Summary Report Template</p>"},{"location":"restful-api-standards/testing/#test-environment","title":"Test environment","text":"<p>You SHOULD deploy APIs to a sandbox environment to allow client testing. Contact the platform team for further assistance.</p>"},{"location":"restful-api-standards/tooling/","title":"Tooling","text":"<p>When choosing your API toolset, you SHOULD consider open-source options (e.g. Visual Studio Code). However, you MAY choose a subscription-based alternative (e.g. Visual Studio) if the cost is justified.</p>"},{"location":"restful-api-standards/tooling/#recommended-tools","title":"Recommended tools","text":"TOOL CATEGORY Enterprise Architect with OpenAPI Plug-in SwaggerHub OpenAPI (Swagger) Editor Extension for VS Code API Design and Documentation Visual Studio Code or Visual Studio Code Editors and IDEs Firely.NET SDK xUnit SpecFlow RestSharp apickli (NPM Package) SDKs Postman / Newman ReadyAPI (formerly SoapUI) REST Client (VS Code Extension) Thunder Client VS Code Extension) API Testing and Automation Spectral Linter for VS Code Extension API Specification and Linting OWASP ZAP Burp Suite Pro BrowserStack SonarQube (Cloud, Server IDE) GitHub Advanced Security for Azure DevOps Microsoft Security DevOps Azure DevOps extension Security Testing and Quality Analysis Azure DevOps Docker Desktop Podman DevOps and Containerisation"},{"location":"restful-api-standards/url-structure/","title":"Url structure","text":"<p>You SHOULD follow the structure below to ensure API endpoints are predictable &amp; hierarchical.</p> HEADER DESCRIPTION Scheme / Protocol MUST always be https://. Host / Domain The platform team manages the domain structure, which MAY include a global API context in the fully qualified domain name (FQDN), followed by an environment and subdomain. Base path / Context Represents a grouping of resource endpoints. Sometimes referred to as a Namespace. Version Versioning requirements and URL rules are described in Versioning. Resource / Resource collection Represents the primary resource or resource collection exposed by the API. Resource identifier A placeholder for the unique identifier of a resource within a collection. ?[Query parameters] Used to filter and modify requests. Refer to the Query Parameters section for reserved names. <p>Examples of good practice</p> <p><code>https://api.test.wales.nhs.uk/appointmentsService/patients?sort=firstName</code></p> <p><code>https://api.test.wales.nhs.uk/appointmentsService/patients/{id}/conditions</code></p> <p><code>https://api.test.wales.nhs.uk/appointmentsService/GPPractices/{id}/slots/{id}</code></p> <p><code>https://api.test.wales.nhs.uk/referenceData/v2/GPPractices/{id}/Practitioners/{id}</code></p> <p><code>https://api.test.wales.nhs.uk/appointmentsService/patients?sort=firstName</code></p> <p>Practical tips</p> <p>Further examples in this document shorten the full URL structure for brevity.</p>"},{"location":"software-development-handbook/agile-delivery-using-scrum/","title":"Agile delivery using Scrum","text":"<p>We have adopted Scrum, having used a mix of project management approaches. Scrum replaces traditional staged development with Sprints and Scrum events.</p> <p>Sprint</p> <p>A fixed-length period to complete small increments of working software.</p> <p>Manage each Sprint with these Scrum events:</p> <p>Planning</p> <ul> <li>Decide what work needs to be done.</li> </ul> <p>Daily Scrum</p> <ul> <li>Review progress and address impediments.</li> </ul> <p>Review</p> <ul> <li>Assess what has been achieved and gather feedback.</li> </ul> <p>Ret rospective</p> <ul> <li>Reflect on the Sprint discuss areas for improvement.</li> </ul> <p>Practical tips</p> <p>Continually refine requirements to make planning meetings easier!</p>"},{"location":"software-development-handbook/agile-delivery-using-scrum/#cross-functional-scrum-teams","title":"Cross-functional Scrum Teams","text":"<p>Scrum replaces technical silos with cross-functional teams. It identifies 3 roles --</p> <p>Product Owner</p> <ul> <li> <p>Represents stakeholders and users.</p> </li> <li> <p>Defines, prioritises and refines backlog items.</p> </li> <li> <p>Works with the team to negotiate work during Sprint planning.</p> </li> <li> <p>Often a Clinician but can also be a Product Specialist or Business Analyst.</p> </li> </ul> <p>Scrum Master</p> <ul> <li> <p>Coaches and supports the Scrum team, helping them improve processes.</p> </li> <li> <p>Facilitates Scrum events and removes impediments.</p> </li> <li> <p>Often a Software developer but can be anyone with strong facilitation and coaching skills.</p> </li> </ul> <p>Scrum Team</p> <ul> <li> <p>Collaborates to negotiate work at Sprint planning.</p> </li> <li> <p>Delivers the work, ensuring it meets the acceptance criteria.</p> </li> <li> <p>Includes everyone needed to create the product</p> </li> </ul> <p>Practical tips</p> <p>Scrum is reliant on having people committed to carrying out its 3 key roles!</p> <p>Further reading and information</p> <p>Home | Scrum Guides</p> <p>What is Scrum? - Azure DevOps | Microsoft Learn</p> <p>Sprint and scrum best practices - Azure Boards | Microsoft Learn</p>"},{"location":"software-development-handbook/agile-delivery-using-scrum/#agile-practices-for-requirements-gathering","title":"Agile practices for requirements gathering","text":"<p>Scrum teams capture requirements in User Stories. But in some cases, a formal Software Requirements Specification may still be necessary.</p> <p>User Story</p> <p>A brief description of a need, told from a user's perspective. With acceptance criteria written in Gherkin syntax to define 'done.'</p> <p>Practical tips</p> <ul> <li> <p>Ensure everyone understands the work involved.</p> </li> <li> <p>Consider hidden tasks to manage technical debt.</p> </li> <li> <p>Share common criteria in a Definition of Done, published to your Kanban board.</p> </li> </ul> <p>Further reading and information</p> <p>Agile in Practice: Story Cards/User Stories - YouT ube</p> <p>Azure DevOps handbook</p> <p>Good and Bad Technical Debt (and how TDD helps) - Crisp's Blog</p> <p>Testing for lost updates</p>"},{"location":"software-development-handbook/agile-delivery-using-scrum/#agile-planning-with-azure-devops","title":"Agile planning with Azure DevOps","text":"<p>Azure DevOps supports agile planning from backlog management to sprint execution:</p> <p>Agile process template</p> <p>Provides essential work items like User Stories, Tasks, Bugs, and Test Scripts to support your agile workflow.</p> <p>Boards</p> <p>Kanban boards: Visualise and manage requirements across all stages, independent of sprint cycles.</p> <p>Task Boards: Track the status of tasks and their progress during sprints.</p> <p>Dashboard</p> <p>Create customised dashboards to track key metrics such as test results, build quality, code coverage, and sprint burndown. This helps you monitor overall project health and progress.</p> <p>Further reading and information</p> <p>Azure DevOps handbook</p> <p>Use agile process template artifacts - Azure Boards | Microsoft Learn</p> <p>Implement Scrum work practices in Azure Boards - Azure Boards | Microsoft Learn</p> <p>Best practices for Agile project management - Azure Boards | Microsoft Learn</p>"},{"location":"software-development-handbook/development-principles/","title":"Development principles","text":""},{"location":"software-development-handbook/development-principles/#ahdere-to-a-solutions-architecture","title":"Ahdere to a solutions architecture","text":"<p>Software SHOULD align with our API-first and Cloud-first strategies. Follow a Solutions Architecture Design, reviewed by the Technical Design Assurance Group, to meet these goals.</p> <p>Further reading and information</p> <p>RESTful API Design and Build Standards</p> <p>Architectural principles | Microsoft Learn</p>"},{"location":"software-development-handbook/development-principles/#write-modular-code","title":"Write modular code","text":"<p>Build modular code using APIs and NuGet packages.</p> <p>Further reading and information</p> <p>Azure DevOps handbook</p> <p>Practical tips</p> <p>Sharing validated, trusted code is a principle of secure coding.</p>"},{"location":"software-development-handbook/development-principles/#use-version-control","title":"Use version control","text":"<p>Effective source control is essential. Follow our guide for help.</p> <p>Using source control</p> <ul> <li> <p>Structure repositories for clarity and scalability.</p> </li> <li> <p>Use consistent branching and merging strategies.</p> </li> <li> <p>Follow versioning conventions to track releases.</p> </li> <li> <p>Write clear, conventional commit messages.</p> </li> <li> <p>Conduct constructive code reviews.</p> </li> </ul> <p>Further reading and information</p> <p>Using Source Control</p> <p>RESTful API Design and Build Standards</p> <p>Azure DevOps handbook</p> <p>What is Git? - Azure DevOps | Microsoft Learn</p> <p>Practical tips</p> <p>Apply source control to databases and application code.</p>"},{"location":"software-development-handbook/development-principles/#follow-coding-standards","title":"Follow coding standards","text":"<p>Deliver reliable, maintainable software by adhering to these guides:</p> <p>Note</p> <p>T-SQL Coding Standard</p> <p>Rules for table design, maintainable queries, procedures, and transaction handling.</p> <p>Note</p> <p>How to Organise Your Software Solution</p> <p>Guidance on project structure, folder conventions, documentation, and dependency layering.</p> <p>Note</p> <p>General Coding Standards</p> <p>Clean code, defensive coding, implementing SOLID principles and Microsoft formatting and naming standards.</p> <p>Further reading and information</p> <p>T-SQL Coding Standard</p> <p>How to Organise Your Software Solution</p> <p>General Coding Standards</p>"},{"location":"software-development-handbook/development-principles/#adopt-continuous-integration-ci-and-continuous-delivery-cd","title":"Adopt Continuous Integration (CI) and Continuous Delivery (CD)","text":"<p>All teams MUST use CI/CD to improve quality and accelerate the frequency of deployment.</p> <p>Further reading and information</p> <p>Use continuous integration - Azure DevOps | Microsoft Learn</p> <p>What is continuous delivery? - Azure DevOps | Microsoft Learn</p> <p>Continuous Delivery vs Continuous Deployment - Continuous Delivery</p> <p>What is DevOps? - Azure DevOps | Microsoft Learn</p> <p>For full guidance on how to implement CI/CD, refer to the references below:</p> <p>Further reading and information</p> <p>Using Source Control</p> <p>Azure DevOps handbook</p>"},{"location":"software-development-handbook/development-principles/#publishing-as-open-source","title":"Publishing as open source","text":"<p>The Digital Service Standard for Wales and the Welsh Technical Standards Board encourage making source code open. But this guide does not cover open-source publishing.</p> <p>If you plan to make your source code open, you SHOULD obtain the necessary approval and comply with any necessary organisational or legal requirements.</p> <p>Further reading and information</p> <p>Digital Service Standards - Digital Public Service Wales (gov.wales)</p> <p>Welsh Technical Standards Board | A statement of principles</p> <p>Public Repos \u00b7 GIGCymru/GitHub-GIG-Cymru Wiki</p> <p>Practical tips</p> <p>Access to github.com/GIGCymru/GitHub-GIG-Cymru/wiki/Public-Repos requires a DHCW GitHub Enterprise account.</p>"},{"location":"software-development-handbook/development-tools/","title":"Development tools","text":""},{"location":"software-development-handbook/development-tools/#technology-stack","title":"Technology stack","text":"<p>In recent years we have expanded our tech stack, adopting tools like GitHub Enterprise, Google Cloud Platform (GCP) and PostgreSQL and programming languages like Python. However, teams in Operations and Primary Care and Mental Health primarily use the following:</p> CATEGORY TOOLS DEVOPS - Azure DevOps DEV ENVIRONMENT - Visual Studio or Visual Studio Code (preferred) - Git - SQL Toolbelt Essentials (mandatory when writing T-SQL) - HL7Edit SERVER-SIDE DEVELOPMENT - .NET / ASP.NET with C# - Microsoft SQL Server with T-SQL - Azure FRONT-END DEVELOPMENT - ASP.NET MVC with C# - .NET MAUI - Blazor - Client-side JavaScript <p>Practical tips</p> <p>A common toolset reduces complexity and avoids additional licencing costs.</p>"},{"location":"software-development-handbook/development-tools/#activate-software-subscriptions","title":"Activate software subscriptions","text":"<p>Development tools are not preinstalled on your laptop. Your line manager typically arranges a software subscription so you can install the tools. If not, follow our guide to request and manage subscriptions.</p> <p>Further reading and information</p> <p>How to request and manage software subscriptions</p> <p>Visual Studio Subscriptions | Microsoft Learn</p>"},{"location":"software-development-handbook/development-tools/#setting-up-the-development-environment","title":"Setting up the development environment","text":"<p>Our primary tools include Visual Studio, SQL Server Management Studio and Azure DevOps. Use the links below to set up your environment. Read our Azure DevOps Handbook to support its use.</p> <p>Further reading and information</p> <p>Select a development environment - Azure DevOps | Microsoft Learn</p> <p>Azure DevOps handbook</p> <p>Client version compatibility - Azure DevOps | Microsoft Learn</p> <p>Sign in with work or school account - Visual Studio Subscription | Microsoft Learn</p> <p>Download the Visual Studio IDE - Visual Studio Subscription | Microsoft Learn</p> <p>Install Visual Studio and choose your preferred features | Microsoft Learn</p> <p>Connect to project from browser/supported client - Azure DevOps | Microsoft L earn</p> <p>Get started with Git and Visual Studio - Azure Repos | Microsoft Learn</p> <p>What is SQL Server? - SQL Server | Microsoft Learn</p> <p>Practical tips</p> <ul> <li> <p>Run Visual Studio as a standard user to follow the principle of least privilege.</p> </li> <li> <p>Use IIS Express instead of IIS.</p> </li> <li> <p>For new projects, consider SQL Server Developer Edition.</p> </li> </ul>"},{"location":"software-development-handbook/development-tools/#keep-frameworks-up-to-date","title":"Keep frameworks up to date","text":"<p>You SHOULD keep frameworks and dependencies current to minimise security risks.</p> <p>Practical tips</p> <p>CANISC cyber security concerns</p> <p>In 2018, the National Assembly Public Accounts Committee flagged CANISC, the all-Wales Cancer system, as a cyber security risk due to discontinued Microsoft security updates.</p> <p>Further reading and information</p> <p>Microsoft .NET Framework - Microsoft Lifecycle | Microsoft Learn</p> <p>.NET Framework official support policy (microsoft.com)</p> <p>.NET Official Support Policy (microsoft.com)</p>"},{"location":"software-development-handbook/development-tools/#evaluating-and-adopting-new-tools","title":"Evaluating and adopting new tools","text":"<p>If you need to use new or alternative tools you SHOULD follow these rules:</p> <ul> <li> <p>Use widely adopted frameworks: Choose those with dedicated     support, follow open standards and have good documentation.</p> </li> <li> <p>Check licencing: Ensure Terms and Conditions are suitable for     use.</p> </li> <li> <p>Learn from others: Base decisions on the experience gained by     other teams.</p> </li> </ul>"},{"location":"software-development-handbook/documentation/","title":"Documentation","text":"<p>Clear and comprehensive documentation is essential. All our guides and standards include sections on writing effective documentation. Key principles for good documentation include:</p> <ul> <li> <p>Follow company-wide writing guidelines and standards</p> </li> <li> <p>Ensure docs reflects the current software version.</p> </li> <li> <p>Automate documentation generation where possible (e.g., OpenAPI     specs).</p> </li> <li> <p>Follow Conventional Commits for clear version control.</p> </li> </ul>"},{"location":"software-development-handbook/essential-good-practice-checklists/","title":"Essential good practice checklists","text":"<p>Use these checklists to help follow our Principles &amp; Standards. We cross-reference each item to a relevant section in our standards or guides. Exceptions are noted where they may apply.</p>"},{"location":"software-development-handbook/essential-good-practice-checklists/#requirements-gathering-analysis-and-specifications","title":"Requirements gathering, analysis and specifications","text":"Item Guide or standard Exceptions 1 You have a Product Owner. \u2610 Cross-functional Scrum Teams Only applies if you follow Scrum 2 You record user needs in User Stories or other Requirements Specifications. \u2610 Agile Practices for requirements gathering 3 You record non-functional &amp; other requirements in User Stories or Requirements Specifications. \u2610 Agile Practices for requirements gathering 4 User Stories have clear acceptance criteria. \u2610 Agile Practices for requirements gathering 5 You prefix a Service request Ids to the title of the User Story \u2610 Agile Practices for requirements gathering 6 You link the service request in the User Story. \u2610 Agile Practices for requirements gathering 7 You plan your approach to mitigating security risks at the start of the project. \u2610 Security"},{"location":"software-development-handbook/essential-good-practice-checklists/#planning-estimation-and-work-tracking","title":"Planning, estimation and work tracking","text":"Item Guide or standard Exceptions 8 Scrum events are used to plan and track work. \u2610 Agile delivery using Scrum Only applies if you follow Scrum 9 You have a Scrum Master. \u2610 Cross-functional Scrum Teams Only applies if you follow Scrum 10 Your Scrum team is multi-disciplinary. \u2610 Cross-functional Scrum Teams Only applies if you follow Scrum 11 You record work items and defects using the Azure DevOps Agile process template. \u2610 Agile Planning with Azure DevOps 12 You associate Tasks with User Stories. \u2610 Agile Planning with Azure DevOps 13 You do not store Personal Identifiable Information (PII) in Azure DevOps. \u2610 Agile Planning with Azure DevOps 14 You publish test, build quality, code coverage &amp; burn down metrics in Azure DevOps dashboards. \u2610 Agile Planning with Azure DevOps"},{"location":"software-development-handbook/essential-good-practice-checklists/#source-control","title":"Source control","text":"Item Guide or standard Exceptions 15 Everything needed to build your project, including databases, is under source control. \u2610 Use Version Control 16 Sensitive data, such as API keys and passwords are stored in vaults &amp; secrets and not in source control. \u2610 Use Version Control 17 You follow the Conventional Commits specification. \u2610 Use Version Control 18 Source code is peer reviewed. \u2610 Use Version Control May not be feasible for small teams. Nor always practical for bigger teams to peer review every code change. 19 You specify a minimum number of reviewers for code reviews. \u2610 Use Version Control 20 You publish code review rules to a README or CONTRIBUTING markdown file. \u2610 Use Version Control 21 You publish your approach to branching and merging in a README or CONTRIBUTING markdown file. \u2610 Use Version Control 22 You store 3rd party dependencies in a common package feed. \u2610 Use Version Control 23 You check open-source packages for licence compliance and known vulnerabilities. \u2610 Use Version Control"},{"location":"software-development-handbook/essential-good-practice-checklists/#software-design-and-maintainability","title":"Software design and maintainability","text":"Item Guide or standard Exceptions 24 You record your approach to maintainability and reusability in a Solutions Design. \u2610 Adhere to a Solutions Architecture Design 25 You submit software designs for approval by the Technical Design Assurance Group. \u2610 Adhere to a Solutions Architecture Design 26 You link to specifications and the Solutions Architecture Document in the User Story's 'All Links' tab. \u2610 Adhere to a Solutions Architecture Design 27 You use design patterns to solve common problems. \u2610 Adhere to a Solutions Architecture Design 28 You deploy APIs via an API Management solution. \u2610 Adhere to a Solutions Architecture Design 29 You keep Software frameworks are kept up to date with long-term support. \u2610 Keep frameworks up-to-date"},{"location":"software-development-handbook/essential-good-practice-checklists/#coding-standards","title":"Coding standards","text":"Item Guide or standard Exceptions 30 Your software solution is organised according to our conventions. \u2610 Follow our coding standards This may not be feasible for some legacy codebases. 31 You provide a README.md file in the root folder. \u2610 Follow our coding standards 32 You use SOLID principles to make your code more testable. \u2610 Follow our coding standards 33 You follow our conventions for naming unit tests. \u2610 Follow our coding standards 34 You employ a common approach to logging exceptions. \u2610 Follow our coding standards 35 You use our common SQL Prompt settings files to format T-SQL. \u2610 Follow our coding standards 36 Your software meets all relevant accessibility standards. \u2610 User interface and accessibility standards 37 You mitigate application vulnerabilities. \u2610 Security 38 You perform code analysis checks \u2610 Security"},{"location":"software-development-handbook/essential-good-practice-checklists/#observing-a-definition-of-done","title":"Observing a definition of done","text":"Item Guide or standard Exceptions 39 You publish common acceptance criteria in a Definition of Done. \u2610 Agile Practices for requirements gathering 40 You automate regression testing. \u2610 Adopt Continuous Integration (CI) and Continuous Delivery (CD) Some frameworks and legacy code may make impractical to write automated unit tests. 41 Test Analysts peer review unit tests. \u2610 Testing 42 You add a commit message prior to checking code into source control. \u2610 Use Version Control 43 You test during each Sprint. \u2610 Testing Only applies if you follow Scrum 44 You issue a Test Summary Report prior to each deployment. \u2610 Testing 45 You agree opportunities for improvement at Sprint retrospectives. \u2610 Agile delivery using Scrum Only applies if you follow Scrum 46 You account for security threats and vulnerabilities. For example, by adding security risk mitigations and a corresponding testing strategy to your definition of done. \u2610 Security"},{"location":"software-development-handbook/essential-good-practice-checklists/#deployment","title":"Deployment","text":"Item Guide or standard Exceptions 47 You can identify the work items associated with each release. \u2610 Use Version Control 48 Your branching and merging strategy identifies a release branch. \u2610 Use Version Control 49 You apply rules or policies to your release branch to prevent improper use. \u2610 Use Version Control 50 You maintain permissions on your project to prevent improper access. \u2610 Use Version Control 51 Your deployments are triggered by commits to source control. \u2610 Adopt Continuous Integration (CI) and Continuous Delivery (CD) Only applies if you practice trunk-based development. 52 You maintain a deployment checklist or automated build &amp; deployment script. \u2610 Adopt Continuous Integration (CI) and Continuous Delivery (CD) 53 You publish instructions on how to build and deploy your software in a README or CONTRIBUTING markdown file. \u2610 Follow our coding standards 54 You can easily rollback to a previous release when required. \u2610 Use Version Control"},{"location":"software-development-handbook/essential-good-practice-checklists/#governance-of-technologies","title":"Governance of technologies","text":"Item Guide or standard Exceptions 55 You have the appropriate licences or subscriptions for the tools you use. \u2610 Activate software subscriptions 56 You comply with licencing terms and conditions for any 3rd party software you use, including open-source software. \u2610 Activate software subscriptions 57 You seek agreement from the Software Development Manager, Lead Developers group or Application &amp; Architecture Assurance group before choosing a new technology. \u2610 Evaluating and adopting new tools"},{"location":"software-development-handbook/exceptions/","title":"Exceptions","text":"<p>While there may be reasons to deviate from this guide, exceptions should be rare and carefully considered. As adhering to standards is crucial in meeting Welsh Government's design standards,</p> <p>Further reading and information</p> <p>Digital Service Standard for Wales | Centre for Digital Public Services</p> <p>Welsh Technical Standards Board | A statement of principles</p>"},{"location":"software-development-handbook/introduction/","title":"Introduction","text":""},{"location":"software-development-handbook/introduction/#purpose","title":"Purpose","text":"<p>A guide to managing software development projects for Digital Health and Care Wales.</p>"},{"location":"software-development-handbook/introduction/#scope","title":"Scope","text":""},{"location":"software-development-handbook/introduction/#in-scope","title":"In-scope","text":"<ul> <li> <p>Good practice for requirements gathering, building, testing, and     deploying software.</p> </li> <li> <p>Practical checklists for good     practice.</p> </li> </ul>"},{"location":"software-development-handbook/introduction/#out-of-scope","title":"Out-of-scope","text":"<ul> <li> <p>Broader lifecycle topics, including project inception, software     architecture, user acceptance testing and operations.</p> </li> <li> <p>Guidance on publishing software as open source.</p> </li> <li> <p>In-depth instructions; this guide links to other standards instead.</p> </li> </ul>"},{"location":"software-development-handbook/introduction/#roles-and-responsibilities","title":"Roles and responsibilities","text":"<p>Application and Product teams in the Operations and Primary Care and Mental Health directorates have a responsibility to follow this guide.</p>"},{"location":"software-development-handbook/introduction/#references","title":"References","text":"<ol> <li>Digital Service Standard for Wales</li> <li>Welsh Technical Standards Board Statement of Principles</li> <li>How to request and manage software subscriptions</li> <li>Using Source Control</li> <li>T-SQL Coding Standard</li> <li>RESTful API Design and Build Standards</li> <li>How to Organise Your Software Solution</li> <li>General Coding Standards</li> <li>Azure DevOps handbook</li> <li>Informatics Systems in Wales, National Assembly for Wales, Public Accounts Committee</li> <li>SOP-OSD-004 - Web Applications</li> <li>SOP-OSD-005 - Encryption in Transit</li> <li>SOP-OSD-006 - Application Programming Interfaces</li> </ol>"},{"location":"software-development-handbook/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions. If a link is missing, search for the document in the Document Management System.</p>"},{"location":"software-development-handbook/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>Developing software for healthcare needs consistent, robust practices. Following clear processes and good practice helps you deliver robust and secure solutions.</p>"},{"location":"software-development-handbook/security/","title":"Security","text":"<p>DHCW adheres to the ISO 27001 standard for Information security management. To comply with certification requirements, you MUST follow secure development practices, including:</p> <ul> <li> <p>Analysing code for quality and vulnerabilities.</p> </li> <li> <p>Applying branch policies and security controls to restrict access to     code repos.</p> </li> <li> <p>Implementing vulnerability scanning within CI and CD pipelines.</p> </li> <li> <p>Keeping systems updated with the latest security patches.</p> </li> <li> <p>Ensuring encryption of data in transit and at rest.</p> </li> </ul> <p>More detailed guidance, refer to the relevant documents below.</p> <p>Further reading and information</p> <p>General Coding Standards</p> <p>SOP-OSD-004 Web Applications</p> <p>SOP-OSD-005 Encryption in Transit</p> <p>SOP-OSD-006 Application Programming Interfaces</p> <p>Practical tips</p> <p>Security standards are not published to our document management system, iPassport. Contact the Cyber Security team to obtain the latest versions.</p>"},{"location":"software-development-handbook/testing/","title":"Testing","text":"<p>Testing MUST align with our Test Framework. Following it and producing Test Summary Reports is key to meeting our Informatics Assurance Process.</p> <p>Practical tips</p> <p>Log defects in Azure DevOps using work items like Bugs, Test Plans, and Test Cases.</p> <p>Further reading and information</p> <p>Test Framework</p> <p>Testing for lost updates</p> <p>How to write a Test Summary Report</p> <p>Test Strategy Template</p> <p>Test Plan Template</p> <p>SDS-TEM-5 Test Summary Report Template</p> <p>Azure DevOps handbook</p> <p>Shift testing left with unit tests - Azure DevOps | Microsoft Learn</p> <p>Introducing the Software Testing Cupcake (Anti-Pattern) | Thoughtworks</p>"},{"location":"software-development-handbook/user-interface-and-accessibility-standards/","title":"User interface and accessibility standards","text":"<p>Software SHOULD be intuitive and accessible. Design decisions must prioritise safety and accessibility. Keep in mind the following principles:</p> <p>User-Centred Design</p> <p>Engage end-users early and often to understand their needs. Design interfaces that align with their tasks.</p> <p>Accessibility</p> <p>Adhere to WCAG 2. Level AA standards at a minimum. Ensure all features are accessible to users with disabilities, including compatibility with assistive technologies.</p> <p>Consistency</p> <p>Provide a consistent user experience across DHCW applications. Follow the Single Record Product's UI Standard for internal clinical applications and the NHS Design System for public-facing services.</p> <p>Further reading and information</p> <p>Single Record Products UI Standard</p> <p>Design system - NHS digital service manual</p> <p>Digital Health and Care Wales Brand</p> <p>WCAG 2 Overview | Web Accessibility Initiative (WAI) | W3C</p>"},{"location":"software-subscriptions/cancelling-a-subscription/","title":"Cancelling a subscription","text":"<p>YOU MUST request the cancellation of a subscription when it is no longer needed. For example when a team member leaves their role.</p> <p>Practical tips</p> <p>Note: Azure DevOps Basic and Basic + Test Plans subscriptions may be downgraded to Stakeholder status if there has been no access for over 8 weeks.</p>"},{"location":"software-subscriptions/identify-the-subscription-you-need/","title":"Identify the subscription you need","text":"<p>Use this section to determine the common subscriptions you need.</p>"},{"location":"software-subscriptions/identify-the-subscription-you-need/#subscription-benefits","title":"Subscription benefits","text":"SUBSCRIPTION KEY BENEFITS Visual Studio Enterprise with GitHub Enterprise Visual Studio Enterprise IDE Basic access to Azure DevOps GitHub Enterprise subscription Azure personal credits \\$150 per month Visual Studio Professional with GitHub Enterprise Visual Studio Professional IDE Basic access to Azure DevOps GitHub Enterprise subscription Azure personal credits \\$50 per month Visual Studio Test Professional Access to Azure DevOps + Azure Test Plans Azure personal credits \\$50 per month MSDN Platforms Access to Azure DevOps + Azure Test Plans Azure personal credits \\$100 per month Azure DevOps Stakeholder Limited access to Azure DevOps Azure DevOps Basic Basic access to Azure DevOps Azure DevOps Basic + Test Plans Access to Azure DevOps + Azure Test Plans SQL Toolbelt Comprehensive SQL Server tools (development &amp; administration) SQL Toolbelt Essentials Essential SQL Server tools SQL Monitor SQL Server performance monitoring (alerting and reporting) dotUltimate .NET tools ReSharper Rider IDE IntelliJ IDEA Ultimate Java and Kotlin IDE Rider Rider IDE HL7 Edit Professional HL7 Edit Licence"},{"location":"software-subscriptions/identify-the-subscription-you-need/#role-requirements","title":"Role requirements","text":"<p>The table below acts as a quick rule of thumb to match your job role with suitable subscriptions.</p> ROLE SUBSCRIPTION(S) PRODUCT OWNER Azure DevOps Basic SCRUM TEAM MEMBER Azure DevOps Basic MANUAL TESTING Visual Studio Test Professional or Azure DevOps Basic + Test Plans, HL7 Edit Licence TEST AUTOMATION Visual Studio Professional with GitHub Enterprise, Visual Studio Test Professional or Azure DevOps Basic + Test Plans, GitHub CoPilot Business WEB DEVELOPER Visual Studio Professional with GitHub Enterprise MOBILE DEVELOPER Visual Studio Professional with GitHub Enterprise, dotUltimate or Rid INTEGRATION DEVELOPER Visual Studio Professional with GitHub Enterprise, Visual Studio Test Professional or Azure DevOps Basic + Test Plans, HL7 Edit Licence SQL DATABASE DEVELOPER Azure DevOps BasicSQL Toolbelt Essentials <p>Practical tips</p> <p>While Visual Studio Professional and Enterprise subscriptions licence the use of GitHub and allow you to buy extras like GitHub Copilot Business, further steps are needed on receipt of the subscription to do so. Contact the Software Development Manager for details.</p>"},{"location":"software-subscriptions/introduction/","title":"Introduction","text":""},{"location":"software-subscriptions/introduction/#purpose","title":"Purpose","text":"<ul> <li> <p>Lists the common software subscriptions used for software     development.</p> </li> <li> <p>Helps you identify the subscriptions needed.</p> </li> <li> <p>Explains how to request or cancel a subscription.</p> </li> <li> <p>Describes how to manage common subscriptions, including assignment     and removal.</p> </li> <li> <p>Describes other known subscriptions in use.</p> </li> <li> <p>Aligns with the IT Asset Management Policy.</p> </li> </ul>"},{"location":"software-subscriptions/introduction/#scope","title":"Scope","text":""},{"location":"software-subscriptions/introduction/#in-scope","title":"In-scope","text":"<ul> <li>Common software subscriptions used by teams writing DHCW software.</li> </ul>"},{"location":"software-subscriptions/introduction/#out-of-scope","title":"Out-of-scope","text":"<ul> <li> <p>Steps to add a new software subscription to the common portfolio.</p> </li> <li> <p>Managing subscription agreements, Contact Commercial Services for     help.</p> </li> <li> <p>Asset management. But it may support aspects of the Asset Management     Policy.</p> </li> </ul>"},{"location":"software-subscriptions/introduction/#roles-responsibilities","title":"Roles &amp; responsibilities","text":""},{"location":"software-subscriptions/introduction/#dhcw-staff","title":"Dhcw staff","text":"<p>Staff have a responsibility to :-</p> <ul> <li> <p>Request subscriptions needed to ensure software is licenced.</p> </li> <li> <p>Keep software up-to-date by applying updates and security patches     promptly.</p> </li> <li> <p>Request removal of subscriptions when they are no longer needed,</p> </li> </ul>"},{"location":"software-subscriptions/introduction/#software-development-manager","title":"Software development manager","text":"<p>The Software Development Manager has a responsibility to :-</p> <ul> <li> <p>Process requests for common subscriptions.</p> </li> <li> <p>Balance adequate inventory with minimising excess costs.</p> </li> <li> <p>Manage underpinning contract agreements.</p> </li> <li> <p>Provide advice and guidance on software subscriptions and related     topics.</p> </li> </ul>"},{"location":"software-subscriptions/introduction/#references","title":"References","text":"INDEX NUMBER DOCUMENT NAME N/A RFC 2119: RFC Keywords (ietf.org) DHCW-POL-2 IT Asset Management Policy"},{"location":"software-subscriptions/introduction/#how-this-guide-is-organised","title":"How this guide is organised","text":""},{"location":"software-subscriptions/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions.</p> <p>If a hyperlink is missing, search for the document in the Document Management System.</p>"},{"location":"software-subscriptions/managing-subscriptions/","title":"Managing subscriptions","text":"<p>Subscriptions are typically managed using the vendor's management portal or, in the case of Azure DevOps, via the Azure DevOps software itself. One exception is HL7 Edit licenses, which are tracked using a spreadsheet.</p> <p>The following links are used to assign subscriptions by the Software Development Manager.</p> SUBSCRIPTION LINK Visual Studio Enterprise with GitHub Enterprise https://manage.visualstudio.com/Subscribers Visual Studio Professional with GitHub Enterprise Visual Studio Test Professional MSDN Platforms Azure DevOps https://dev.azure.com/NHS-Wales-Digital/_settings/users SQL Toolbelt http://www.red-gate.com/ SQL Toolbelt Essentials SQL Monitor dotUltimate https://account.jetbrains.com/licenses IntelliJ IDEA Ultimate Rider HL7 Edit Professional HL7Edit Licences.xlsx"},{"location":"software-subscriptions/requesting-a-subscription/","title":"Requesting a subscription","text":"<p>You can request a common subscription from the Software Development Manager by logging a call to the Corporate Applications team, for the attention of the Software Development Manager.</p> <p>If you need an Azure DevOps subscription, check with the Azure DevOps Organisation owner first. As only subscriptions for the NHS-Wales-Digital Azure DevOps instance can be allocated by the Software Development Manager.</p> <p>When requesting a subscription for a new member of staff, you SHOULD do so before their start date. While we aim to process requests on the same day this isn't always possible.</p> <p>For agency staff you MUST provide a cost code along with their contract start and end dates. Ask the contract manager to supply these.</p> <p>Practical tips</p> <p>If the Software Development Manager is unavailable or the request cannot be processed, download a trial version until your request is handled.</p>"},{"location":"software-subscriptions/requesting-a-subscription/#requesting-github-copilot-business","title":"Requesting GitHub copilot business","text":"<p>Follow these steps to request GitHub Copilot Business, an AI-powered coding assistant for your development environment. Note: You'll also need a GitHub Enterprise subscription.</p> <ol> <li> <p>First, check if you already have GitHub Enterprise. VS Enterprise and     VS Professional include it by default, but VS Test Professional does not.</p> </li> <li> <p>It's often worth having a VS Professional subscription anyway.     Raise a service request to the Corporate Applications team,     addressed to the Software Development Manager. They will allocate     the subscription and forward your request for GitHub CoPilot Business.</p> </li> <li> <p>If you don't need a VS Professional subscription, raise a service     request to the GitHub GIG CYMRU team. They'll allocate     GitHub Copilot Business (and GitHub Enterprise if needed).     Note: You may need to provide extra information, such as a     cost code.</p> </li> </ol>"},{"location":"software-subscriptions/what-subscriptions-are-available/","title":"What subscriptions are available?","text":"<p>This section lists the common subscriptions available across DHCW and managed by the Software Development Manager.</p> <p>It also sets out a list of tools used by individual teams for activities like design, prototyping and planning. But details about how they are managed vary. Speak to the Software Development Manager for help. Note: This list is not intended to be exhaustive.</p>"},{"location":"software-subscriptions/what-subscriptions-are-available/#common-subscriptions","title":"Common subscriptions","text":"VENDOR SUBSCRIPTION CONTACT Microsoft Visual Studio Enterprise with GitHub Enterprise Software Development Manager Visual Studio Professional with GitHub Enterprise Visual Studio Test Professional MSDN Platforms Azure DevOps Stakeholder Azure DevOps Basic Azure DevOps Basic + Test Plans Redgate SQL Toolbelt SQL Toolbelt Essentials SQL Monitor JetBrains dotUltimate IntelliJ IDEA Ultimate Rider Real Seven HL7 Edit Professional <p>Further reading and information</p> <p>Visual Studio Subscriptions - Visual Studio</p> <p>About access levels - Azure DevOps | Microsoft Learn</p>"},{"location":"software-subscriptions/what-subscriptions-are-available/#tools-for-targeted-needs","title":"Tools for targeted needs","text":"TOOL or PRODUCT SUITE ALTOVA XML SPY Balsamiq DEVEXPRESS VCL COMPONENTS DIGITAL METAPHORS REPORT BUILDER Docker BUSINESS EMBARCADERO DELPHI FIGMA FLOAT github enterprise subscription github copilot business MIRO ORACLE DATABASE ENTERPRISE EDITION PRODUCTBOARD SKILLSOFT PERCIPIO SPARX SYSTEMS ENTERPRISE ARCHITECT SPARX SYSTEMS PROLABORATE Atlassian TRELLO UPSCENE DATABASE WORKBENCH Microsft VISIO <p>Practical tips</p> <p>It is RECOMMENDED you check plans for ongoing software assurance when requesting a subscription.</p>"},{"location":"t-sql-coding-standard/aliases/","title":"Aliases","text":"<p>You SHOULD:-</p> <ul> <li> <p>Alias ALL table names using the convention AS &lt;alias&gt;.</p> </li> <li> <p>Use meaningful alias names, following our naming conventions     (see later in this document.)</p> </li> <li> <p>Qualify each column with the parent table or alias, especially     where the parent table is part of a join or subquery.</p> </li> </ul>"},{"location":"t-sql-coding-standard/apply-code-analysis-rules/","title":"Apply code analysis rules","text":"<p>You SHOULD: -</p> <ul> <li> <p>Specify column names when using <code>INSERT</code>, even when inserting data     into all columns.</p> </li> <li> <p>Expand the asterisk wildcard to explicitly define all columns.</p> </li> <li> <p>Qualify object names. Prefix each reference to a table with its     schema (but not the database name) and each column to its parent     table (or alias) in <code>SELECT</code> statements.</p> </li> <li> <p>Terminate all statements with a semi-colon and with no leading     whitespace.</p> </li> <li> <p>Favour <code>EXISTS</code> or table joins over <code>IN</code> or <code>COUNT</code> where it's sensible to     do so.</p> </li> <li> <p>Include an <code>ELSE</code> block with each <code>CASE</code> expression.</p> </li> <li> <p>Prefer the use of <code>SCOPE_IDENTITY()</code> to <code>@@IDENTITY</code>.</p> </li> <li> <p>Use Common Table Expressions (CTEs) instead of non-correlated     subqueries. A <code>CTE</code> is easier to read than a subquery and offers the     same performance.</p> </li> <li> <p>Use functions like <code>ISNULL</code>, <code>IS NULL</code>, <code>ISNUMERIC</code>, <code>TRY_CONVERT</code>, <code>COALESCE</code> and** <code>CAST</code> correctly.</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Use <code>INSERT INTO</code> &lt;table&gt; with an <code>ORDER BY</code> clause. The order     depends on the clustered index if one is defined.</p> </li> <li> <p>Use <code>DELETE</code> without a <code>WHERE</code> or <code>INNER JOIN</code> clause</p> </li> <li> <p>Use <code>UPDATE</code> without a <code>WHERE</code> or <code>INNER JOIN</code> clause</p> </li> <li> <p>Use correlated sub-queries. (The exception to this is the use of     <code>EXISTS</code>.)</p> </li> <li> <p>Define <code>JOIN</code> conditions in the <code>WHERE</code> clause. Include the     <code>JOIN</code> condition in the <code>ON</code> clause.</p> </li> <li> <p>Include <code>WHERE</code> clauses in <code>SELECT</code> statements<sup>1</sup> to     prevent defining Cartesian joins.</p> </li> <li> <p>Use <code>ISNULL</code> in a <code>WHERE</code> or <code>JOIN</code> clause. Expressions need     to use <code>IS NOT NULL</code> and the <code>COALESCE</code> function to handle     <code>NULL</code> values appropriately.</p> </li> <li> <p>Use comparison operators against a <code>NULL</code> value.</p> </li> <li> <p>Use <code>DISTINCT</code> where it is not required. Use a <code>GROUP BY</code> clause     where possible and check <code>JOIN</code> conditions to eliminate duplicate     rows.</p> </li> <li> <p>Use wildcards (such as %) at the start of <code>LIKE</code> in <code>WHERE</code> clauses.     Indexes cannot support wildcard queries at the start of a <code>LIKE</code>     expression.</p> </li> <li> <p>Reference columns that do not have indexes in a <code>WHERE</code>, <code>JOIN</code>     or <code>ORDER BY</code> clause.</p> </li> <li> <p>Use system or user-defined scalar functions in a <code>WHERE</code> or     <code>JOIN</code> clause. Functions are evaluated for each row in the result     set. Any indexes cannot be used on the column the function is being     performed on.</p> </li> <li> <p>Use the <code>NOLOCK</code> hint. It's safer to specify the correct isolation     level instead.</p> </li> </ul> <p>Practical tips</p> <p>Use Redgate SQL Prompt to help you implement code analysis rules. See Follow our code layout rules</p> <p>Further reading and information</p> <p>Code Analysis - Product Documentation (re d-gate.com)</p> <p>How to Get NULLs Horribly Wrong in SQL Server - Simple Talk (red-gate.com)</p> <p>SQL Server Common Table Expression (CTE) Basics - Simple Talk (red -gate.com)</p> <p>Lookup Table Madness -- SQLServerCentral</p> <ol> <li> <p>If you need to perform a Cartesian join, use the newer syntax <code>CROSS APPLY</code> -- most likely when shredding XML/JSON data.\u00a0\u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/avoid-using-t-sql-to-execute-business-logic/","title":"Avoid using T-SQL to execute business logic","text":"<p>As a rule, you SHOULD NOT place business logic in the database.</p> <p>Further reading and information</p> <p>Should we use stored procedures or queries built in the app? - Brent Ozar Unlimited\u00ae</p>"},{"location":"t-sql-coding-standard/code-comments/","title":"Code comments","text":"<p>You SHOULD use the code headers provided in SQL Server Management Studio's (SSMS) default templates to comment scripts, stored procedures, functions and the like.</p>"},{"location":"t-sql-coding-standard/date-and-time/","title":"Date and time","text":"<p>You SHOULD: -</p> <ul> <li> <p>Use a suitable date / time datatype. Their precision differs and     affects the performance of your queries accordingly.</p> </li> <li> <p>Express dates in ISO format to remove ambiguity. For example,     12/04/2017 may be interpreted as 12th April or 4th December     depending on your configuration.</p> </li> </ul> <p>Examples of good practice</p> <p>Use year, month day yyyymmdd format for a date alone (e.g., 20171204)</p> <p>Use year, month, day and time format yyyy-MM-ddThh:mm:ss.xxx for a date &amp; time (e.g. 2017-12-04T14:24:30.123)</p> <ul> <li>Cast <code>DATETIME</code> or <code>SMALLDATETIME</code> fields to <code>DATE</code> if     you're interested only in the date part. SQL Server supports this.</li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Use <code>DATEDIFF</code> when searching date ranges. As with other functions,     this prevents the database engine making use of any indexes.</p> </li> <li> <p>Use <code>BETWEEN</code> for searching datetime ranges. The start and end of the     range can appear ambiguous. Use the operators &gt;, &lt;, &gt;=,     &lt;=, = instead.</p> </li> <li> <p>Use the + or -- operators on date/time fields; It is unclear     what unit is being applied. For example, it's not clear that     <code>GETDATE()+1</code> will return this time tomorrow. Newer datatypes such as     <code>DATE</code>, <code>DATETIME2</code> and <code>DATETIMEOFFSET</code> throw errors when used in this     way.</p> </li> </ul> <p>Further reading and information</p> <p>How to Get SQL Server Dates and Times Horribly Wrong - Simple Talk (red-gate.com)</p>"},{"location":"t-sql-coding-standard/examples/","title":"Examples","text":""},{"location":"t-sql-coding-standard/examples/#insert-statement","title":"Insert statement","text":"<p>In this example we make sure to</p> <ul> <li> <p>Qualify table names with the schema name.</p> </li> <li> <p>Specify <code>INSERT</code> columns.</p> </li> </ul> <p>Practices to avoid</p> <pre><code>    INSERT INTO SubscribingConsultant\n    VALUES ('7A5', 'C1234567');\n</code></pre> <p>Examples of good practice</p> <pre><code>    [INSERT INTO dbo.SubscribingConsultant(Organisation, ConsultantId)]\n    [VALUES('7A5', 'C1234567\\');]\n</code></pre>"},{"location":"t-sql-coding-standard/examples/#select-statement","title":"Select statement","text":"<p>In this example we make sure to</p> <ul> <li> <p>Qualify table names with the schema name.</p> </li> <li> <p>Add a meaningful table alias name.</p> </li> <li> <p>Use the field name in the <code>ORDER BY</code> clause rather than a constant.</p> </li> </ul> <p>Practices to avoid</p> <pre><code>    SELECT Report.Id, Report.SubjectGivenName AS FirstName, Report.SubjectFamilyName AS LastName\n    FROM Report\n    ORDER BY 1 ASC;\n</code></pre> <p>Examples of good practice</p> <pre><code>    SELECT Report.Id, Report.SubjectGivenName AS FirstName, Report.SubjectFamilyName AS LastName\n    FROM dbo.Report AS Report\n    ORDER BY Report.Id ASC;\n</code></pre>"},{"location":"t-sql-coding-standard/examples/#queries","title":"Queries","text":"<p>In this next example, we will step through a query making sure to: -</p> <ol> <li> <p>Expand wildcards searches.</p> </li> <li> <p>Qualify table names with the schema name.</p> </li> <li> <p>Add a meaningful table alias name.</p> </li> <li> <p>Qualify column names with table alias.</p> </li> <li> <p>Add a meaningful column alias name<sup>1</sup>.</p> </li> <li> <p>Alias the column name using the AS convention.</p> </li> <li> <p>Add the semi colon terminator.</p> </li> </ol> <p>Practices to avoid</p> <pre><code>    SELECT * FROM Report\n\n    SELECT Report.Id, SubjectGivenName f, Report.SubjectFamilyName\n    FROM Report\n\n    SELECT Report.Id, SubjectGivenName f, Report.SubjectFamilyName\n    FROM dbo.Report\n\n    SELECT Report.Id, SubjectGivenName f, Report.SubjectFamilyName\n    FROM dbo.Report AS Report\n\n    SELECT Report.Id, Report.SubjectGivenName f, Report.SubjectFamilyName\n    FROM dbo.Report AS Report\n\n    SELECT Report.Id, Report.SubjectGivenName FirstName, Report.SubjectFamilyName\n    FROM dbo.Report AS Report\n\n    SELECT Report.Id, Report.SubjectGivenName AS FirstName, Report.SubjectFamilyName\n    FROM dbo.Report AS Report\n</code></pre> <p>Examples of good practice</p> <pre><code>    SELECT Report.Id, Report.SubjectGivenName AS FirstName, Report.SubjectFamilyName\n    FROM dbo.Report AS Report;\n</code></pre>"},{"location":"t-sql-coding-standard/examples/#dates-1","title":"Dates #1","text":"<p>In this example, we ensure that a query against a date field can use the index.</p> <p>Practices to avoid</p> <pre><code>    SELECT ObservationRequest.ReportId FROM dbo.ObservationRequest ObservationRequest\n    WHERE CONVERT(VARCHAR(10), ObservationRequest.AuthorisedDateTime, 112) = '2018-12-12';\n</code></pre> <p>Examples of good practice</p> <pre><code>    SELECT ObservationRequest.ReportId\n    FROM dbo.ObservationRequest ObservationRequest\n    WHERE CAST(ObservationRequest.AuthorisedDateTime AS DATE) = '2018-12-12';\n</code></pre>"},{"location":"t-sql-coding-standard/examples/#dates-2","title":"Dates #2","text":"<p>We step through the next example ensuring to</p> <ol> <li> <p>Eliminate the <code>DATEDIFF</code> operator.</p> </li> <li> <p>Eliminate arithmetic operators against date fields.</p> </li> </ol> <p>Practices to avoid</p> <pre><code>    SELECT ObservationRequest.ReportId\n    FROM dbo.ObservationRequest ObservationRequest\n    WHERE &gt; DATEDIFF(DAY,Observ ationRequest.AuthorisedDateTime,GETDATE())&lt;=30;\n\n    SELECT ObservationRequest.ReportId\n    FROM dbo.ObservationRequest &gt; ObservationRequest\n    WHERE CAST(ObservationRequest.AuthorisedDateTime AS DATE) &gt; GETDATE()-30;\n</code></pre> <p>Examples of good practice</p> <pre><code>    SELECT COUNT(DISTINCT ObservationRequest.ReportId)\n    FROM dbo.ObservationRequest ObservationRequest\n    WHERE CAST(ObservationRequest.AuthorisedDateTime AS DATE) &gt;= DATEADD(DAY,-30,CAST(GETDATE() AS &gt; DATE));\n</code></pre>"},{"location":"t-sql-coding-standard/examples/#stored-procedures-1","title":"Stored procedures #1","text":"<p>In this next example, we will step through a stored procedure making sure to:</p> <ol> <li> <p>Qualify the procedure name with the schema.</p> </li> <li> <p>Add <code>BEGIN</code> and <code>END</code> statements.</p> </li> <li> <p><code>SET NOCOUNT ON</code></p> </li> <li> <p>Return a value.</p> </li> </ol> <p>Practices to avoid</p> <pre><code>    CREATE PROCEDURE prGetReportMasterId @Id BIGINT\n    AS\n        SELECT\n            Report.Id\n        , Report.MasterReportId\n        FROM\n            dbo.Report AS Report\n            WHERE Report.Id = @Id;\n\n    CREATE PROCEDURE dbo.prGetReportMasterId @Id BIGINT\n    AS\n        SELECT\n            Report.Id\n        , Report.MasterReportId\n        FROM\n            dbo.Report AS Report\n            WHERE Report.Id = @Id;\n\n    CREATE PROCEDURE dbo.prGetReportMasterId @Id BIGINT\n    AS\n    BEGIN\n        SELECT\n            Report.Id\n        , Report.MasterReportId\n        FROM\n            dbo.Report AS Report\n            WHERE Report.Id = @Id;\n    END;\n\n    CREATE PROCEDURE dbo.prGetReportMasterId @Id BIGINT\n    AS\n    BEGIN\n        SET NOCOUNT ON;\n        SELECT\n            Report.Id\n        , Report.MasterReportId\n        FROM\n            dbo.Report AS Report\n            WHERE Report.Id = @Id;\n    END;\n</code></pre> <p>Examples of good practice</p> <pre><code>    CREATE PROCEDURE dbo.prGetReportMasterId @Id BIGINT\n    AS\n    BEGIN\n        SET NOCOUNT ON;\n        SELECT\n            Report.Id\n        , Report.MasterReportId\n        FROM\n            dbo.Report AS Report\n            WHERE Report.Id = @Id;\n        RETURN 0;\n    END;\n</code></pre>"},{"location":"t-sql-coding-standard/examples/#stored-procedures-2","title":"Stored procedures #2","text":"<p>In the following example, we will step through a stored procedure making sure to:</p> <ol> <li> <p>Specify length for <code>VARCHAR</code> parameters.</p> </li> <li> <p>Specify columns for <code>INSERT</code> statements.</p> </li> <li> <p><code>SET NOCOUNT ON</code>, <code>SET XACT_ABORT ON</code></p> </li> <li> <p>Add implicit transaction using <code>BEGIN TRANSACTION</code> and <code>COMMIT</code></p> </li> <li> <p>Add Error Handling using <code>TRY ... CATCH</code> blocks.</p> </li> </ol> <p>Practices to avoid</p> <pre><code>    CREATE PROCEDURE dbo.InsertReferenceDataValue\n          @ReferenceDataDomainId INT\n        , @Code                  VARCHAR\n        , @Rubric                VARCHAR\n        , @Active                BIT\n        , @ParentId              INT = NULL\n    AS\n    BEGIN\n        INSERT dbo.ReferenceDataValue\n        VALUES\n            (\n                @ReferenceDataDomainId\n                , @Code\n                , @Rubric\n                , GETDATE()\n                , @Active\n                , @ParentId\n            );\n    RETURN 0;\n    END;\n\n    CREATE PROCEDURE dbo.InsertReferenceDataValue\n          @ReferenceDataDomainId INT\n        , @Code                  VARCHAR(50)\n        , @Rubric                VARCHAR(200)\n        , @Active                BIT\n        , @ParentId              INT = NULL\n    AS\n    BEGIN\n        INSERT dbo.ReferenceDataValue\n        VALUES\n            (\n                @ReferenceDataDomainId\n                , @Code\n                , @Rubric\n                , GETDATE()\n                , @Active\n                , @ParentId\n            );\n    RETURN 0;\n    END;\n\n    CREATE PROCEDURE dbo.InsertReferenceDataValue\n          @ReferenceDataDomainId INT\n        , @Code                  VARCHAR(50)\n        , @Rubric                VARCHAR(200)\n        , @Active                BIT\n        , @ParentId              INT = NULL\n    AS\n    BEGIN\n        INSERT dbo.ReferenceDataValue\n            (\n                Id\n            , ReferenceDataDomainId\n            , Code\n            , Rubric\n            , DateTimeCreated\n            , Active\n            , ParentId\n            )\n        VALUES\n            (\n                @ReferenceDataDomainId\n                , @Code\n                , @Rubric\n                , GETDATE()\n                , @Active\n                , @ParentId\n            );\n    RETURN 0;\n    END;\n\n    CREATE PROCEDURE dbo.InsertReferenceDataValue\n          @ReferenceDataDomainId INT\n        , @Code                  VARCHAR(50)\n        , @Rubric                VARCHAR(200)\n        , @Active                BIT\n        , @ParentId              INT = NULL\n    AS\n    BEGIN\n        SET NOCOUNT ON;\n        SET XACT_ABORT ON;\n        INSERT dbo.ReferenceDataValue\n            (\n                Id\n            , ReferenceDataDomainId\n            , Code\n            , Rubric\n            , DateTimeCreated\n            , Active\n            , ParentId\n            )\n        VALUES\n            (\n                @ReferenceDataDomainId\n                , @Code\n                , @Rubric\n                , GETDATE()\n                , @Active\n                , @ParentId\n            );\n    RETURN 0;\n    END;\n\n    CREATE PROCEDURE dbo.InsertReferenceDataValue\n          @ReferenceDataDomainId INT\n        , @Code                  VARCHAR(50)\n        , @Rubric                VARCHAR(200)\n        , @Active                BIT\n        , @ParentId              INT = NULL\n    AS\n    BEGIN\n        SET NOCOUNT ON;\n        SET XACT_ABORT ON;\n        BEGIN TRANSACTION\n        INSERT dbo.ReferenceDataValue\n            (\n                Id\n            , ReferenceDataDomainId\n            , Code\n            , Rubric\n            , DateTimeCreated\n            , Active\n            , ParentId\n            )\n        VALUES\n            (\n                @ReferenceDataDomainId\n                , @Code\n                , @Rubric\n                , GETDATE()\n                , @Active\n                , @ParentId\n            );\n        COMMIT\n    RETURN 0;\n    END;    \n</code></pre> <p>Examples of good practice</p> <pre><code>    CREATE PROCEDURE dbo.InsertReferenceDataValue\n          @ReferenceDataDomainId INT\n        , @Code                  VARCHAR(50)\n        , @Rubric                VARCHAR(200)\n        , @Active                BIT\n        , @ParentId              INT = NULL\n    AS\n    BEGIN\n        SET NOCOUNT ON;\n        SET XACT_ABORT ON;\n        BEGIN TRY\n            BEGIN TRANSACTION\n            INSERT dbo.ReferenceDataValue\n                (\n                    Id\n                , ReferenceDataDomainId\n                , Code\n                , Rubric\n                , DateTimeCreated\n                , Active\n                , ParentId\n                )\n            VALUES\n                (\n                    @ReferenceDataDomainId\n                    , @Code\n                    , @Rubric\n                    , GETDATE()\n                    , @Active\n                    , @ParentId\n                );\n            COMMIT\n        END TRY\n        BEGIN CATCH\n            DECLARE @ErrorMsg VARCHAR(4000);\n            SET @ErrorMsg = ERROR_MESSAGE();\n            -- Rollback our transaction\n            IF @@TRANCOUNT&gt;0\n                ROLLBACK;\n            --Re-raise the error to our application;\n            RAISERROR(@ErrorMsg, 16, 1);\n        END CATCH;\n    RETURN 0;\n    END;\n</code></pre>"},{"location":"t-sql-coding-standard/examples/#naming","title":"Naming","text":"<p>In our last example, we contrast a simple database query that does not conform to our rules with one that does. The conformant query assumes there is a constraint preventing any changes to the underlying database schema.</p> <p>The conformant query implements the following rules: -</p> <ul> <li> <p>Names are descriptive and singular.</p> </li> <li> <p>Pascal Casing applied.</p> </li> <li> <p>Prefixes and underscores removed.</p> </li> <li> <p>All Keywords are uppercase.</p> </li> <li> <p>Meaningful table alias name applied.</p> </li> <li> <p>Columns qualified with Table alias and meaningful column alias     applied.</p> </li> <li> <p>Meaningful column alias and name applied.</p> </li> <li> <p>SQL Prompt formatting style rule applied.</p> </li> </ul> <p>Practices to avoid</p> <pre><code>    SELECT SubjectGivenName, SubjectFamilyName, [Hospital Ward]\n    FROM tblPatients WHERE ID = @int_ID\n    AND SubjectGivenName =  @str_param2;\n</code></pre> <p>Examples of good practice</p> <pre><code>    SELECT\n        Patient.SubjectGivenName AS FirstName\n        , Patient.SubjectFamilyName AS LastName\n        , Patient.[Hospital Ward] AS HospitalWard\n    FROM\n        dbo.tblPatients AS Patient\n    WHERE\n        Patient.ID = @PatientId\n        AND Patient.SubjectGivenName = @FirstName;\n</code></pre> <ol> <li> <p>https://documentation.red-gate.com/codeanalysis/code-analysis-for-sql-server/style-rules/st010 \u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/exceptions-prove-the-rule/","title":"Exceptions prove the rule","text":"<p>As with most standards, there are occasions when it's unwise to follow \"hard and fast\" rules.</p> <p>Principal and Lead software developers have discretion to do so but this should be the exception rather than the rule.</p>"},{"location":"t-sql-coding-standard/follow-our-code-layout-rules/","title":"Follow our code layout rules","text":"<p>These rules apply to decorative changes that affect whitespace such as tabs, spaces and line breaks. Nonetheless, it's important to adhere to a standard, to help others understand the intent of code.</p> <p>So, while SQL Prompt allows us to write code in a format, we find comfortable, we must always apply our standard styling rules<sup>1</sup> before sharing code and checking it into source control.</p> <p>You SHOULD format and analyse your code using SQL Prompt before checking into source control.</p> <p>You SHOULD configure SQL Prompt with our rule. See SQL Prompt configuration for help with using our standard SQL Prompt config files.</p> <p>Further reading and information</p> <p>The Basics of Good T-SQL Coding Style - Simple Talk (red-gate.com )</p> <p>Beyond Formatting: Improving SQL Code using SQL Prompt Actions | Redgate (red-gate.com )</p> <p>The Redgate Guide to SQL Server Team-based Development | Redgate (red-gate.com)</p> <p>Using multiple custom SQL formatting styles in SQL Prompt (red-gate .com)</p> <ol> <li> <p>In this regard, SQL prompt is necessary to implement the standard\u00a0\u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/follow-our-naming-rules-see-also-table-design-rules/","title":"Follow our naming rules (see also table design rules)","text":"<p>You SHOULD:-</p> <ul> <li> <p>Use\u00a0descriptive names, favouring readability over brevity.</p> </li> <li> <p>Favour singular nouns over plurals for table names views and     scalars (columns, parameters and variables.) The use of a     collective name is best.</p> </li> <li> <p>Use a mix of verbs and nouns in the present tense for functions     and stored procedure names<sup>1</sup>.</p> </li> <li> <p>Use uppercase for all Keywords, Built-in functions, built-in     datatypes and Global Variables<sup>2</sup>.</p> </li> <li> <p>Use Pascal Casing (with the first letter and each subsequent     concatenated word capitalized)\u00a0consistently for all other     names<sup>3</sup>.</p> </li> <li> <p>Use capitalization where common abbreviations<sup>4</sup> are used.</p> </li> <li> <p>Use prefixes and underscores for the following common naming     conventions (next page).</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Rely on system generated named objects such as constraints or     indexes.</p> </li> <li> <p>Use abbreviations, spaces, or non-standard characters and reserved     words. Doing so avoids the need to use square brackets.</p> </li> <li> <p>Prefix stored procedures with sp_ Doing so impedes     performance because SQL Server searches the master database first.</p> </li> <li> <p>Use prefixes (Hungarian notation), suffixes\u00a0and underscores except     where specific naming conventions exist (see the next page.)</p> </li> </ul> Prefix Usage Example Notes pr Stored Procedure pr GetReportIDAndIdentifiers Optional, but use must be consistent within a database fn F unction fnSaveNewPassword tr Trigger trAuditChangeToNHSNumber CIX Clustered Index CIX_Report_Id Table name and indexes are also separated by an underscore. PK Primary Key PK_Report Table name IX Index IX_Report_SubjectDoBFamilyNameGivenNameId_includes Table name and indexes are also separated by an underscore. Use \"includes\" showing the index has included columns<sup>5</sup>. FK Foreign Key FK_ReferenceDataValue_ID_PlacerID Table name, referenced field(s) and referencing field(s) also separated by an underscore DF Default constraint CK Check constraint UQ Unique constraint <p>Further reading and information</p> <p>Publicly Available Standards (iso.org)</p> <p>Reserved Keywords (Transact-SQL) - SQL Server | Microsoft Learn</p> <p>The 9 Most Common Database Design Errors | Vertabelo Database Modeler (No. #4)</p> <p>Ten Common Database Design Mistakes - Simple Talk (red-gate.com)</p> <ol> <li> <p>But beware of situations where this is counterproductive. For example, having many procedures prefixed with 'Get' makes any specific stored procedure difficult to spot. See the section 'Exceptions prove the rule'.\u00a0\u21a9</p> </li> <li> <p>This rule raised the concern that we could end up with differing coding standards based on language and technology and we will. However, SQL is a set-based language -- it's acceptable that different rules apply.\u00a0\u21a9</p> </li> <li> <p>Be aware that Redgate SQL prompts adds aliases in lower case based on the leading letters in a camel case table name.\u00a0\u21a9</p> </li> <li> <p>Use abbreviations only when there can be no doubt as to their meaning.\u00a0\u21a9</p> </li> <li> <p>Included columns prevent a key-lookup in the query plan and so aid performance.\u00a0\u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/follow-our-table-rules-columns-and-datatypes/","title":"Follow our table rules: columns and datatypes","text":"<p>You SHOULD:-</p> <ul> <li> <p>Specify the nullability on columns.</p> </li> <li> <p>Define column data types (such as <code>VARCHAR</code> and <code>CHAR</code>)     appropriately.</p> </li> <li> <p>Specify the length of a character column, even if you want it to     be one. This rule applies when also declaring or casting variable     datatypes.</p> </li> <li> <p>Use fixed-length datatypes rather than declaring variables as     variable length of length 1 or 2.</p> </li> <li> <p>Include the precision and scale (when supported) when specifying     numeric types. This prevents you being bound to the default     values.</p> </li> <li> <p>Follow good database design practices. And if you consider yourself     an 'Accidental DBA' be sure to read the 'Accidental DBA guide'!</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Use the <code>CHAR</code> or <code>NCHAR</code> data type for columns that permit     <code>NULL</code> values.</p> </li> <li> <p>Use <code>VARCHAR(MAX)</code> when unnecessary.</p> </li> <li> <p>Use the <code>TEXT</code> or <code>NTEXT</code> datatypes.</p> </li> <li> <p>Declare variables without a datatype length. For example, <code>DECLARE</code> <code>@MyVar VARCHAR;</code> is to be avoided.</p> </li> <li> <p>Use inappropriate datatypes. For example, storing numbers or dates     as <code>VARCHAR</code>.</p> </li> </ul> <p>Further reading and information</p> <p>How to Get NULLs Horribly Wrong in SQL Server - Simple Talk (red-gate.com)</p> <p>Troubleshooting SQL Server: A Guide for Accidental DBAs | Redgate (red-gate.com)</p>"},{"location":"t-sql-coding-standard/follow-out-table-design-rules-schemes-and-indexes/","title":"Follow out table design rules: schemes and indexes","text":"<p>You SHOULD:-</p> <ul> <li> <p>Specify a schema when creating a table from a script.</p> </li> <li> <p>Ensure that each Primary Key comprises the column(s) that uniquely     identify each row in the table.</p> </li> <li> <p>Include the index type (clustered or non-clustered) when defining     the Primary Key.</p> </li> <li> <p>Choose the most suitable column(s) for a clustered index<sup>1</sup>.</p> </li> <li> <p>Use the Primary Key as the clustered index (it's the default and     usually the prime candidate but not always!)</p> </li> <li> <p>Include the table name and the indexed fields (ordered as specified     in the index definition) in the index name.</p> </li> <li> <p>Use the <code>INCLUDE</code> clause of non-clustered indexes to cover     columns returned in select clauses or used to join other tables.     This prevents the query optimizer having to perform key-lookup     operations.</p> </li> <li> <p>Learn how the index column order in a multi-column index affects     performance.</p> </li> <li> <p>Define any necessary Foreign Key constraints on your tables.</p> </li> <li> <p>Include the table name, referenced field(s) and referencing field(s)     in the Foreign Key name.</p> </li> <li> <p>Create an index on a foreign key's child table columns.</p> </li> <li> <p>Review index reports<sup>2</sup> with your support team. Remember that     in high availability environments, such as an Always On     Availability Group, the index usage is different on writable and     read-only nodes.</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Create tables without defining a Primary Key or Clustered Index.</p> </li> <li> <p>Use GUIDs (e.g. <code>UNIQUEIDENTIFIER</code>) for clustered keys, especially     where the primary key is defined as the clustered index. This can     result in performance problems. Rather use an alternative datatype,     for example <code>BIGINT</code>, or use the function <code>NEWSEQUENTIALID()</code> to generate     a GUID. This reduces fragmentation.</p> </li> <li> <p>Use a column that is frequently updated in a clustered index.</p> </li> <li> <p>Create duplicate indexes. Remember, column order in the <code>INCLUDE</code>     clause is not significant.</p> </li> </ul> <p>Practical tips</p> <p>WCP (Welsh Clinical Portal) -- Missing Microbiology Results</p> <p>In 2015, a database reference table allowing duplicates contributed to the problem of missing electronic microbiology results.</p> <p>Further reading and information</p> <p>SQL Server Best Practices -- Implementation of Database Object Schemas | Microsoft Learn</p> <p>Handling Constraint Violations and Errors in SQL Server - Simple Talk (red-gate.com)</p> <ol> <li> <p>Based on your queries and performance considerations\u00a0\u21a9</p> </li> <li> <p>For example Brent Ozar Blitz Index makes use of SQL Server's Missing Index Dynamic Management Views (DMVs)\u00a0\u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/follow-these-rules-when-using-an-object-relational-mapper-orm/","title":"Follow these rules when using an object relational mapper (orm)","text":"<p>You MUST consider this standard when using an Object-relational mapping (ORM) tool such as Microsoft's Entity Framework. And to achieve the best performance from your database: -</p> <ul> <li> <p>You SHOULD use stored procedures for data access. Support tools     (such as those used for SQL Migrations) cannot identify issues with     code that is not stored in the database.</p> </li> <li> <p>You SHOULD follow good practice if working with ORMS. See ORM     tips, below.</p> </li> <li> <p>You SHOULD NOT use Entity Framework's code first approach to     create and maintain database schemas.</p> </li> </ul> <p>Further reading and information</p> <p>45 Database Performance Tips for Developers | Redgate (red-gate.com) ORM Tips (pages 4 &amp; 5)</p>"},{"location":"t-sql-coding-standard/general-good-practice/","title":"General good practice","text":"<p>You MUST store T-SQL scripts and database code in source control as a 'single source of truth.'</p> <p>You SHOULD: -</p> <ul> <li> <p>Check your SQL application is performant. You may find your     support team or Database Administrator (DBA) may be able to help.</p> </li> <li> <p>Review your code to address any issues, such as performance and     security considerations.</p> </li> <li> <p>Share code using code snippets and a common repository.</p> </li> <li> <p>Conform to ANSI standards wherever possible.</p> </li> <li> <p>Prefer <code>CAST</code> to <code>CONVERT</code></p> </li> <li> <p>Prefer <code>SET</code> to <code>SELECT</code> when assigning variables.</p> </li> <li> <p>Prefer <code>COALESCE</code> to <code>ISNULL</code></p> </li> <li> <p>Format and analyse your code using SQL Prompt before checking into     source control.</p> </li> <li> <p>Configure SQL Prompt using our config files. See SQL Prompt     configuration for help.</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Use deprecated features.</p> </li> <li> <p>Use dynamic SQL. If you cannot avoid this then call it using     sp_executesql rather than the <code>EXECUTE</code> statement.</p> </li> <li> <p>Expect your DBA to performance tune your queries but do ask them for     advice. Particularly what tools to use.</p> </li> <li> <p>Use undocumented stored procedures.</p> </li> <li> <p>Create objects that flout the single responsibility pattern. Such     as: -</p> </li> <li> <p>Entity-attribute-value tables.</p> </li> <li> <p>Generic stored procedures with no specific (or multiple) use cases.</p> </li> <li> <p>Using a single table to hold all lookup values, metadata, and domain or reference data.</p> </li> </ul> <p>Practical tips</p> <p>WPRS -- Prioritisation incident</p> <p>In 2016, a failure to run SQL code analysis checks and deploy from source control prevented referrals including those for urgent suspected cancer being actioned.</p> <p>WPRS -- WPAS (Welsh Patient Administration System) delayed Urgent Suspected Cancer referral.</p> <p>In 2017, a failure to deploy the correct stored procedure led to a delay in referring a patient with urgent suspected cancer.</p> <p>Further reading and information</p> <p>How to Think Like the SQL Server Engine - Brent Ozar Unlimited\u00ae</p> <p>SQL Code Smells - Simple Talk (red-gate.com)</p> <p>Discontinued database engine functionality - SQL Server | Microsoft Learn</p>"},{"location":"t-sql-coding-standard/good-practice-checklists/","title":"Good practice checklists","text":"<p>Use this checklist to demonstrate you follow our coding standards.</p> <p>We cross-reference each checklist item to a relevant section in our standards and guides; Exceptions are noted where they may apply.</p>"},{"location":"t-sql-coding-standard/good-practice-checklists/#91-general-good-practice","title":"9.1 general good practice","text":"Item Guide or standard Exceptions 1 You avoid placing business logic in the database \u2610 T-SQL coding standard, 7.1 This is a general rule. But there may be times when there are good reasons not to follow it. 2 You follow the coding conventions described in this standard \u2610 T-SQL coding standard, All 3 You keep T-SQL scripts and database code in source control \u2610 T-SQL coding standard, 7.3 5 You analyse T-SQL against Redgate code analysis rules \u2610 T-SQL coding standard, 7.6 6 You format T-SQL using our common configuration settings \u2610 T-SQL coding standard, 7.20"},{"location":"t-sql-coding-standard/handling-exceptions/","title":"Handling exceptions","text":"<p>You SHOULD:-</p> <ul> <li> <p>Manage exceptions in each stored procedure, but you SHOULD NOT     mask the error from the calling application.</p> </li> <li> <p>Use the <code>TRY ... CATCH</code> construct to handle errors in T-SQL.</p> </li> <li> <p>Use a log table to record errors handled. It helps with support     and maintenance.</p> </li> <li> <p>Favour <code>THROW</code> over <code>RAISERROR</code> wherever possible (i.e. in database     compatibility SQL 2012 and later.)</p> </li> <li> <p>Return a result code.</p> </li> </ul>"},{"location":"t-sql-coding-standard/introduction/","title":"Introduction","text":""},{"location":"t-sql-coding-standard/introduction/#purpose","title":"Purpose","text":"<ul> <li> <p>Describes the Application Development and Support Directorate's     coding standard for writing T-SQL.</p> </li> <li> <p>Demonstrates the importance of following good practice by quoting     examples of working practices that have contributed to clinical     incidents.</p> </li> </ul>"},{"location":"t-sql-coding-standard/introduction/#scope","title":"Scope","text":"<p>Software Developers have a responsibility to follow this guide.</p> <ul> <li>Developers not using T-SQL may need to adjust to their version of     SQL or consider the need for a local coding standard.</li> </ul>"},{"location":"t-sql-coding-standard/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Redgate SQL Prompt</p> <p>Indicates that this rule can be implemented using Redgate SQL Prompt</p> <p>Further reading and information</p> <p>Note Links to SQL Server content in Microsoft Learn\u00a9 default to SQL Server 2022. Use its version selector to tailor the website for other versions.</p>"},{"location":"t-sql-coding-standard/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>Use this standard to -</p> <ul> <li> <p>write code in a consistent way. So that those who read it may draw     on previous experience to understand it more quickly.</p> </li> <li> <p>produce software that is based on good practice, is maintainable,     performant and secure.</p> </li> </ul>"},{"location":"t-sql-coding-standard/permissions/","title":"Permissions","text":"<p>You **SHOULD:-</p> <ul> <li> <p>Define database roles for the specific type of database access     required.</p> </li> <li> <p>Grant database object permissions only to database roles.</p> </li> <li> <p>Grant database access to Active Directory groups and service     accounts via membership of database roles.</p> </li> <li> <p>Record information about the accounts you create and the permissions     you assign them in each environment.</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Instinctively grant database owner (dbo) permissions.</p> </li> <li> <p>Use SQL Server logins, unless working with a 3rd party application     that specifically requires their use.</p> </li> <li> <p>Grant database access to individual user accounts.</p> </li> </ul>"},{"location":"t-sql-coding-standard/sql-prompt-configuration/","title":"SQL prompt configuration","text":""},{"location":"t-sql-coding-standard/sql-prompt-configuration/#sql-prompt-settings-file","title":"SQL prompt settings file","text":""},{"location":"t-sql-coding-standard/sql-prompt-configuration/#how-to-import-the-settings","title":"How to import the settings","text":"<ol> <li>Download the <code>NWIS_STANDARD_SQLPROMPT_SETTINGS</code> file to a local     directory.</li> </ol> <p>You can find the file from the Software Development Standards git repo under the Software Development Standards project on Application Development &amp; Support's Azure DevOps instance.</p> <ol> <li>Open SQL Server Management Studio with Redgate SQL Prompt v9 or     later installed and choose SQL Prompt &gt; Options.</li> </ol> <p>Select Import to load the <code>NWIS_STANDARD_SQLPROMPT_SETTINGS.settings</code> file.</p>"},{"location":"t-sql-coding-standard/sql-prompt-configuration/#the-settings-file-explained","title":"The settings file explained","text":"Suggestions Behaviour Uses default settings Connections Uses default settings with the following exceptions: Unchecks the Load suggestions for linked servers &amp; Load suggestions for synonyms options. Note: This is done to improve performance. Specifying the databases to  load may further improve performance, but this will vary between teams. Join Conditions Unchecks Columns with matching names (not case-sensitive). Checks Individual columns in multiple-column foreign keys Snippets Uses default settings Warnings &amp; highlighting Checks all options other than 'Show warnings for DROP statements' Inserted Code Objects and statements Uses default settings Qualification Checks all options Aliases Checks Assign aliases. Note: Custom aliases should be used to provide consistency across an application, but these cannot be defined here. Special characters Uses default settings Format Styles For formatting styles see SQL Prompt formatting style file. In addition to default settings checks. Expand wildcards, Qualify object names, Insert semicolons, Apply column alias style, Column AS alias, Add/remove square brackets, Remove unnecessary brackets, Add/remove AS keyword on alias definition for tables and views, Add AS keyword Tabs History Sets Maximum number of tabs to restore: to 5. Unchecks Automatically reconnect restored tabs Color Uses default settings. Note: Colour can be used to differentiate environments. However, separate credentials (e.g. <code>NatTd</code>, <code>GIGNWI</code>) should be used to connect to development and production environments; these accounts can support their own SQL Prompt settings."},{"location":"t-sql-coding-standard/sql-prompt-configuration/#sql-prompt-formatting-style-file","title":"SQL prompt formatting style file","text":""},{"location":"t-sql-coding-standard/sql-prompt-configuration/#how-to-import-the-style","title":"How to import the style","text":"<ol> <li>Download the <code>NWIS_STANDARD_SQLPROMPT_SETTINGS</code> file to a local     directory.</li> </ol> <p>You can find the file from the Software Development Standards git repo under the Software Development Standards project on Application Development &amp; Support's Azure DevOps instance.</p> <ol> <li> <p>You have a choice of two versions. If using SQL Prompt v10.5 or     later, choose the newer <code>.json</code> file extension. If using an earlier     version, choose the <code>.sqlpromptstylev2</code> file type.</p> </li> <li> <p>With the correct style file selected, save it to \"<code>&lt;Insert Drive Letter&gt;:\\Users\\&lt;Insert Test-Dev-NADEX-ID&gt;\\AppData\\Local\\Red Gate\\SQL Prompt &lt;Version&gt;\\StylesV2</code>\" or *     \"<code>&lt;Insert Drive Letter&gt;:\\Users\\&lt;Insert Test-Dev-NADEX-ID&gt;\\AppData\\Local\\Red Gate\\SQL Prompt &lt;Version&gt;\\Styles</code><sup>1</sup></p> </li> <li> <p>Open SQL Server Management Studio with Redgate SQL Prompt v9 or     later installed.</p> </li> <li> <p>From the menu choose SQL Prompt &gt; Active Styles &gt; Edit Formatting Styles</p> </li> <li> <p>Under Your styles (top right), select the vertical ellipsis     next to NWIS_Custom style indented, commas before and choose     Set as active.</p> </li> </ol>"},{"location":"t-sql-coding-standard/sql-prompt-configuration/#the-style-file-explained","title":"The style file explained","text":"<p>Uses Redgate's Indented defaults as its base style with the following customisations applied: -</p> GLOBAL Whitespace Wrapping: Sets Wrap lines longer than to 160 characters Lists Commas: Checks Place commas before items. Sets Comma alignment to Before item. Checks Add a space after comma Casing Sets Global variables to UPPERCASE EXPRESSIONS CASE Unchecks Place expressions on new line. WHEN: Sets Place first WHEN on new line to If there's an input expression; Sets WHEN alignment to Indented from CASE. THEN expressions: Unchecks Place THEN on new line. ELSE: Checks Place ELSE on new line; Checks Align ELSE to WHEN. END: Checks Place END on new line; Sets End alignment to To CASE. Short CASE expressions: Unchecks Collapse CASE expressions shorter than n characters"},{"location":"t-sql-coding-standard/sql-prompt-configuration/#notes-explanation","title":"Notes &amp; explanation","text":"<p>Commas before: -</p> <ul> <li> <p>clearly define a new column.</p> </li> <li> <p>help identify when a comma is missing.</p> </li> <li> <p>make it easier to comment out additional fields during development.</p> </li> </ul> <p>Indentation aids readability. However, long expressions may appear distorted when wrapped. See the section Exceptions prove the rule.</p> <ol> <li> <p>E.g. <code>D:\\\\Users\\\\NatTD_ge080206\\\\*AppData\\\\Local\\\\Red Gate\\\\SQL Prompt 9\\\\StylesV2*</code> \u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/stored-procedures/","title":"Stored procedures","text":"<p>You SHOULD: -</p> <ul> <li> <p>Use meaningful names to indicate the purpose of procedures &amp;     parameters. Be verbose if needed.</p> </li> <li> <p>Match parameter datatypes to the underlying data to avoid implicit     conversion.</p> </li> <li> <p>Include a comment header to indicate the procedure's purpose and     use. Include an example call if possible.</p> </li> <li> <p>Enclose procedures with <code>BEGIN END</code> blocks after the <code>AS</code>     keyword.</p> </li> <li> <p>Add the <code>SET NOCOUNT ON</code> statement before any Data Manipulation     Language statements unless you have good reason for not doing so.</p> </li> <li> <p>Use <code>SET XACT_ABORT ON</code>. It terminates and rollbacks the entire     transaction when a T-SQL statement raises a run-time error.</p> </li> <li> <p>Declare variables, table variables and temp tables at the start of     a procedure<sup>1</sup>.</p> </li> <li> <p>Use <code>BEGIN</code> and <code>END</code> after <code>IF</code>, even if only one statement     is covered. This makes the code clearer and avoids errors if further     statements are added to the <code>IF</code> block later.</p> </li> <li> <p>Use table variables for transitory tables with less than 1000     rows.</p> </li> <li> <p>Use temporary tables for transitory tables with more than 1000     rows.</p> </li> <li> <p>Use explicit transactions when updating data.</p> </li> <li> <p>Use SavePoints within a transaction. The use of SavePoint can     allow you to rollback a series of statements within a transaction.</p> </li> <li> <p>Pass parameters explicitly to Stored Procedures and <code>EXECUTE</code>     statements wherever possible.</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Set the <code>ANSI_NULLS</code> option. It should normally be set to <code>ON</code> and     is deprecated by Microsoft and not supported for certain indexes.</p> </li> <li> <p>Set the <code>QUOTED_IDENTIFIER</code> option. It has no effect and should     normally be set to <code>ON</code>.</p> </li> <li> <p>Declare variables you never use.</p> </li> <li> <p>Use <code>CURSOR</code> s and <code>WHILE</code> clauses.</p> </li> <li> <p>Use Table Variables, Temporary Tables, Common Table Expressions and     Subqueries without understanding their impact on performance.</p> </li> <li> <p>Use nested transactions. A <code>ROLLBACK</code> of a nested transaction     can affect more than just the statements executed.</p> </li> <li> <p>Return multiple result sets.</p> </li> <li> <p>Supply stored procedures with a wide range of data parameters. SQL     Server compiles these to a single query plan.</p> </li> </ul> <p>Further reading and information</p> <p>Discontinued database engine functionality - SQL Server | Microsoft Learn</p> <p>Temporary Tables in SQL Server - Simple Talk (red-gate.com )</p> <ol> <li> <p>Note: This is contrary to the general coding standards. But Redgate discourages interweaving Data Definition Language (e.g. <code>CREATE TABLE</code>) and Data Manipulation Language statements (e.g. <code>SELECT</code>).\u00a0\u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/top-n-and-order-by/","title":"Top (n) and order by","text":"<p>You SHOULD try to order result sets in the application layer. Because qualifying statements with <code>ORDER BY</code> are expensive in SQL!</p> <p>You SHOULD NOT:-</p> <ul> <li> <p>Use <code>SET ROWCOUNT</code>. Prefer the <code>TOP(N)</code> syntax of the <code>SELECT</code>     statement.</p> </li> <li> <p>Use <code>TOP</code> in a <code>SELECT</code> list without using <code>ORDER BY</code>      It's clear and returns consistent results.</p> </li> <li> <p>Use constants in an <code>ORDER BY</code> clause; It's deprecated and makes     code hard to read.</p> </li> </ul> <p>Further reading and information</p> <p>Avoid using constants in an ORDER BY clause | Redgate (red-gate.com)</p>"},{"location":"t-sql-coding-standard/views/","title":"Views","text":"<p>You SHOULD NOT:-</p> <ul> <li> <p>Define nested views. Views that call or join to other views can     result in complex query plans.</p> </li> <li> <p>Use wildcards in view definitions as it can result in unexpected     behaviour<sup>1</sup>.</p> </li> <li> <p>Use <code>ORDER BY</code> in views. Use the <code>ORDER BY</code> clause only in the outermost     query.</p> </li> </ul> <ol> <li> <p>This is caused because SQL Server caches the view's output metadata but doesn't update the cache when underlying objects change.\u00a0\u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/working-with-sql-server-agent/","title":"Working with SQL server agent","text":"<p>You SHOULD:-</p> <ul> <li> <p>Define job steps that call stored procedures.</p> </li> <li> <p>Make sure jobs exist across all your high-availability SQL instances     (e.g., both side of the mirror, availability group nodes.)</p> </li> <li> <p>Add an initial step to jobs on mirrors to allow the job to stop with     a warning rather than error.</p> </li> <li> <p>Make use of the job categories</p> </li> <li> <p>Use job categories or the description field to track temporarily     disabled and retired jobs.</p> </li> </ul> <p>You SHOULD NOT define job steps with ad-hoc SQL; It hides application logic, and you are unable to manage it using SQL Source Control.</p>"},{"location":"t-sql-coding-standard/working-with-transactions/","title":"Working with transactions","text":"<p>You SHOULD pair each <code>BEGIN</code> <code>TRANSACTION</code> with a <code>COMMIT</code> or <code>ROLLBACK</code> <code>TRANSACTION</code> (and vice versa.) Open transactions can cause applications to fail if left unchecked.</p> <p>You SHOULD NOT:-</p> <ul> <li> <p>Perform cross database transactions even where SQL Server supports     them.</p> </li> <li> <p>Perform cross server queries (using linked servers or <code>OPENQUERY</code><sup>1</sup>.)</p> </li> <li> <p>Perform cross database queries in mirrored environments. They will     fail should database failover occur<sup>2</sup>.</p> </li> </ul> <p>Further reading and information</p> <p>Transactions: availability groups &amp; database mirroring - SQL Server Always On | Microsoft Learn</p> <ol> <li> <p>This should be resolved in the application design.\u00a0\u21a9</p> </li> <li> <p>Although you may consider this an acceptable risk.\u00a0\u21a9</p> </li> </ol>"},{"location":"t-sql-coding-standard/working-with-triggers/","title":"Working with triggers","text":"<p>You SHOULD NOT:-</p> <ul> <li> <p>Use triggers. They can affect performance and hide business logic.     Consider moving the required logic to another part of the     application. It makes support and maintenance easier!</p> </li> <li> <p>Return data from a trigger using either <code>SELECT</code> or <code>PRINT</code>.</p> </li> </ul> <p>Further reading and information</p> <p>Triggers: Threat or Menace? - Simple Talk (red-gate.com)</p>"},{"location":"t-sql-coding-standard/working-with-user-defined-functions-udf/","title":"Working with user defined functions (UDF)","text":"<p>You SHOULD:-</p> <ul> <li> <p>Use inline table valued functions instead of scalar functions     where possible.</p> </li> <li> <p>Use WITH SCHEMABINDING for non-data accessing scalar user     defined functions. It forces SQL server to check data access is     occurring at design time. Thus, preventing the need to do so during     execution.</p> </li> </ul> <p>You SHOULD NOT:-</p> <ul> <li> <p>Use multi-statement table valued functions; these can impede     performance.</p> </li> <li> <p>Use side-effecting operators within a user defined function, for     example <code>SELECT</code>, <code>PRINT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>TRY</code>, <code>CATCH</code></p> </li> </ul> <p>Further reading and information</p> <p>TSQL User-Defined Functions: Ten Questions You Were Too Shy to Ask - Simple Talk (red-gate.com)</p>"},{"location":"t-sql-coding-standard/xml-and-json/","title":"XML and JSON","text":"<p>You SHOULD use SQL Server XML and JSON functions &amp; methods<sup>1</sup> to build and consume XML and JSON data.</p> <p>You SHOULD NOT:-</p> <ul> <li> <p>Build XML or JSON by concatenating strings. The loop construct     hinders performance and can provide data in an invalid data format.</p> </li> <li> <p>Use XML or JSON data type methods and functions in a <code>WHERE</code>     or <code>JOIN</code> clause, except when working with small result sets in     a temporary table or table variable.</p> </li> </ul> <ol> <li> <p>Available in SQL Server 2016 onwards\u00a0\u21a9</p> </li> </ol>"},{"location":"test-summary-report/characteristics-of-a-good-test-summary-report/","title":"Characteristics of a good test summary report","text":"<p>A Test Summary Report SHOULD have the following characteristics: -</p> SHORT: As a rule of thumb, aim for no more than 8 -- 11 pages. CLEAR: Information should be clear. Read DHCW's writing checklist for tips. PRECISE: The information, though concise, should not be abstract as this will not help the reader draw clear conclusions from it. CONSISTENT: While content will differ, each report SHOULD use the same template. <p>The remainder of this guide provides rules for drafting a report, using the template.</p> <p>Practical tips</p> <p>SDS-TEM-5 replaces the previous Test Summary Report and Test Certificate templates.</p> <p>The Test Certificate has been retired with this guide's publication, and Test Certificates SHOULD no longer be produced.</p>"},{"location":"test-summary-report/cover-page/","title":"Cover page","text":"<p>The report's cover page MUST contain the following elements: -</p>"},{"location":"test-summary-report/cover-page/#heading-1-digital-health-and-care-wales","title":"Heading #1: \"digital health and care wales\"","text":""},{"location":"test-summary-report/cover-page/#heading-2-name-and-version-of-the-system-under-test","title":"Heading #2: name and version of the system under test","text":"<p>You SHOULD include: -</p> <ul> <li> <p>The acronym (in parentheses) if you intend to use it in the report.</p> </li> <li> <p>The version number, if applicable, prefixed with a 'v' for version     or 'b' for build number.</p> </li> </ul>"},{"location":"test-summary-report/cover-page/#heading-3-name-of-module-or-component","title":"Heading #3: name of module or component","text":"<p>Where appropriate you SHOULD include the name of the module or component.</p>"},{"location":"test-summary-report/cover-page/#heading-4-test-summary-report","title":"Heading #4: \"test summary report\"","text":""},{"location":"test-summary-report/cover-page/#heading-5-test-phase","title":"Heading #5: test phase","text":"<p>You SHOULD choose an appropriate value from those listed on pages 26 -- 30 of the Test Framework.</p>"},{"location":"test-summary-report/cover-page/#heading-6-status","title":"Heading #6: status","text":"<p>This reflects the status of the document and MUST be 'Draft', 'Draft-Update' or 'Issued'.</p> <p>Examples of good practice</p> <p>Welsh Immunisation System (WIS) v4.3.0.0</p> <p>Spring Boosters Campaign</p> <p>Test Summary Report</p> <p>Systems Integration Testing</p> <p>Draft</p> <p>6th March 2024</p>"},{"location":"test-summary-report/cover-page/#footer-filename","title":"Footer: filename","text":"<p>The Template's footer was inserted as Quick Parts -&gt; Fields -&gt; FileName. When you save the first copy of the report, right-click the footer and choose 'Update Field' to update the filename.</p>"},{"location":"test-summary-report/document-location/","title":"Document location","text":"<p>Document Location MUST be a hyperlink to the original document.</p>"},{"location":"test-summary-report/example-reports/","title":"Example reports","text":"<p>You can find example reports from Guides and standards (sharepoint.com) There might be slight variations in content and format compared to this template, but they are a helpful starting point.</p>"},{"location":"test-summary-report/exceptions-prove-the-rule/","title":"Exceptions prove the rule","text":"<p>While this Test Summary Report template is designed to be suitable for most situations, there may be cases where altering the format is necessary and justifiable. These changes should be made only when they add significant value for the reader.</p> <p>However, it is important to maintain the integrity of the template, and changes SHOULD NOT be made casually.</p>"},{"location":"test-summary-report/filename/","title":"Filename","text":"<p>The filename SHOULD be in the following format: -</p> <p>Test Summary Report-&lt;Name of System Under Test&gt;-&lt;Module or Component Name&gt;-&lt;Version or Build number&gt;</p> <p>Examples of good practice</p> <p>Test Summary Report-Welsh Immunisation System WIS-Spring Boosters Campaign 2024-v4.3.0.0.docx</p> <p>Test Summary Report-NHS Wales App-Public Beta-v1.0.0.docx</p>"},{"location":"test-summary-report/further-metrics/","title":"Further metrics","text":"<p>You MAY include additional metrics from sources like Extent Reports or Azure DevOps dashboards to provide a more comprehensive perspective on the testing process.</p>"},{"location":"test-summary-report/introduction/","title":"Introduction","text":""},{"location":"test-summary-report/introduction/#purpose","title":"Purpose","text":"<p>A Test Summary Report tells readers whether your software needs corrective action, can proceed to the next stage or is ready for release. So it SHOULD provide a clear summary of the test process, results, and key metrics.</p> <p>This document instructs you on how to write a Test Summary Report. It is guided by the ISO 29119-3:2013[^1] standard for writing a Test Completion Report, although the headings used in the Test Summary Report template vary.</p> <p>When you are ready to start, base your report on the SDS-TEM-5 Test Summary Report template.</p>"},{"location":"test-summary-report/introduction/#scope","title":"Scope","text":""},{"location":"test-summary-report/introduction/#in-scope","title":"In-scope","text":"<ul> <li>This guide SHOULD be followed by anyone asked to submit a Test     Summary Report to the Welsh Informatics Assurance Group.</li> </ul>"},{"location":"test-summary-report/introduction/#out-of-scope","title":"Out-of-scope","text":"<ul> <li>Other reports such as Test Progress and Test Defect reports are     out-of-scope.</li> </ul>"},{"location":"test-summary-report/introduction/#roles-responsibilities","title":"Roles &amp; responsibilities","text":"<p>A Test Summary Report: -</p> <ul> <li> <p>SHOULD be written and signed by a Test Analyst or person with     equivalent knowledge, skills and experience. If your circumstances     differ, please contact the document author.</p> </li> <li> <p>MUST be acknowledged as reviewed and signed as approved by a     Lead Test Analyst, Test Team Principal or person with equivalent     knowledge, skills and experience.</p> </li> <li> <p>MUST be signed as approved by at least one of the following: -</p> </li> <li> <p>Product Specialist or person acting in that capacity.</p> </li> <li> <p>Application or Product Manager.</p> </li> <li> <p>A representative of a suitable Assurance Group or Project/Programme Board.</p> </li> </ul>"},{"location":"test-summary-report/introduction/#references","title":"References","text":"INDEX NUMBER DOCUMENT NAME N/A RFC 2119: RFC Keywords (ietf.org) N/A DHCW Brand Guidelines Nov 2023.pdf N/A Test framework N/A BS ISO/IEC/IEEE 29119-3:2013 Software and systems engineering --- Software testing Part 3: Test documentation SDS-TEM-5 Test Summary Report WIA-SOP-71 Wales Informatics Assurance Group (WIAG) Process N/A Writing checklist (sharepoint.com)"},{"location":"test-summary-report/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions.</p> <p>If a hyperlink is missing, search for the document in the Document Management System.</p> <p>[^1] And later versions.</p>"},{"location":"test-summary-report/layout-and-formatting/","title":"Layout and formatting","text":"<p>For brevity, formatting rules such as, font, line spacing &amp; paragraph settings, headers and footers are omitted. You SHOULD keep to those used in the blank template.</p> <p>if you need to insert document references in the footer you MAY remove the footer image to ensure the text is clearly visible.</p> <p>You SHOULD strive to ensure the report displays well in Microsoft Word on desktop and online.</p>"},{"location":"test-summary-report/relevant-documents/","title":"Relevant documents","text":"<p>You SHOULD include links to the Test Strategy, Test Plan and Solutions Architecture Design document. And reference the Assurance Quality Plan and Safety Case and Readiness Report where they exist. You SHOULD NOT embed documents.</p> <p>Practical tips</p> <p>Use external links cautiously as they may become outdated or broken over time.</p>"},{"location":"test-summary-report/reviews-and-approvals/","title":"Reviews and approvals","text":"<p>Recording reviewers and approvers using electronic signatures is RECOMMENDED, but you MAY instead record the name and date of the reviewer and approver. See also Roles &amp; Responsibilities.</p>"},{"location":"test-summary-report/summary-of-testing/","title":"Summary of testing","text":"<p>The Testing summary MUST contain the following headings: -</p> RECOMMENDATION: Your recommendation based on the findings. Written in bold font. Observations and Variances: Any noteworthy findings, deviations from expected results, and any observed variations. It is essential to capture anything left untested together with an associated reason, for example, limitations on availability of test devices. Background: A brief overview of the application, the features and components under test and any relevant context. Approach: The testing strategy employed, including automation, manual testing, or any specific methodologies. Entry Criteria: Entry criteria are the specific conditions that must be met before testing can begin. Including these criteria is useful, especially if you need to explain any exceptions when proceeding. Test Phase: Specify the phase of testing covered in this report. Be guided by 'Test Phases' in the 'Test Framework' (pages 26 - 30). Test Types: Enumerate the distinct types of testing conducted. Be guided by 'Appendix 4' of the 'Test Framework' (pages 52 - 56) but you MAY include others. Test Environment: The technical setup and configurations used for testing. Dates: Specify the duration of the testing period and key milestones. Test Tools: The tools used for testing purposes. In-Scope: The features, components and interfaces considered during testing. Out-of-scope: What was explicitly excluded from the testing scope. Exit criteria: The predetermined conditions that must be met for testing to be considered complete and successful."},{"location":"test-summary-report/table-of-contents/","title":"Table of contents","text":"<p>You MUST include a Table of Contents.</p>"},{"location":"test-summary-report/test-metrics/","title":"Test metrics","text":"<p>The Testing summary SHOULD contain the following headings :-</p> Execution Metrics: A snapshot of the test script execution, including pass, fail, completion status, and any deferred or not applicable scripts. Defect Metrics: Summarises the initial defects, total raised, closed, and currently open defects, categorised by severity. Open Defects: Describes the currently open defects, with their Azure DevOps ID and severity."},{"location":"test-summary-report/version-control/","title":"Version control","text":"<p>You SHOULD include the present version and any predecessor versions with brief accompanying notes describing changes and reasons for the change.</p> <p>Revision History statuses SHOULD be limited to Draft, Draft-Update or Issued.</p>"},{"location":"test-summary-report/when-to-create-a-test-summary-report/","title":"When to create a test summary report","text":"<p>You SHOULD draft a report at the end of a project, but you MAY do so for the end of each testing cycle.\u00a0 Typically, it will be written for any new service, major change or new developments in existing services, releases, procurements, proof of concepts and innovation products<sup>1</sup>.</p> <ol> <li> <p>WIA-SOP-71 Wales Informatics Assurance GROUP (WIAG) Process, section 2 Scope.\u00a0\u21a9</p> </li> </ol>"},{"location":"testing-lost-updates/concurrency-controls/","title":"Concurrency controls","text":"<p>The table shown below describes common approaches to concurrency control.</p> Pessimistic or Optimistic? Coarse grained or Fine grained? Locking Pessimistic - locks on View/Edit. Optimistic - Blocks on save - not really a lock. Coarse grained -- locks the entire record. Fine grained -- locks the active field(s). Validation checks Users may unknowingly overwrite changes with their own, but validity is assured. No control The specification limits access to a single user per record at a time."},{"location":"testing-lost-updates/example-test-scripts/","title":"Example test scripts","text":"ID TEST CASE 9045 Lock 01 Test Requesting 9046 Lock 02 - Medicines 9047 Lock 03 Editing DAL 9667 Lock 04 - Referrals 9049 Lock 05 - Accessing and editing the orbeon forms from external applications 10486 Lock 06 - User having multiple sessions of WCP using different machines 16647 Lock 07 - Multiple Users Accessing Various Patient Records Simultaneously 35763 Lock 08 - User tries to open multiple WCP sessions on same machine 64131 Lock 09 - Radiology Test Requesting 78270 GENERIC - Neonatal Details Screen - Record locking test case 83414 DM+12c: Child Consents Screen - locking test"},{"location":"testing-lost-updates/follow-a-risk-based-approach/","title":"Follow a risk based approach","text":"<p>When preparing your tests, identify when and where failure is most likely to occur and where impact will be most severe. The system under test will have some potential for concurrency conflicts it must manage. But what else should you consider?</p> <p>While not an exhaustive list, nor a replacement for your own expertise, this table sets out questions and tasks to consider.</p> Considerations Tasks Is the code multi-threaded? Most applications rely on multi-threading even before the developer starts coding. But code that creates its own threads, poses a particular risk. Especially when writing an automated process that creates high numbers of transactions. Ask the developers to walk you through their stress tests How many users and concurrent users do you expect? The potential for concurrency conflicts grows with the number of users, particularly concurrent users. Ask Business Analysts to walk you through the non-functional requirements. Make sure to record acceptance criteria in user stories, requirements specifications or the team's definition of done. How complicated is the approach? We call the design to handle concurrency conflicts concurrency control. While there are common ways to approach this, some are more difficult to reason about and put in place. Ask the developer or architect to walk you through the solution architecture. How mature is the implementation? You may have already implemented concurrency control. If so, there may be less risk of it failing for a new feature.<sup>1</sup> Ask the developers to walk you through their tests. Check the team's definition of done. How much support does the development framework provide? Some frameworks provide much of the heavy lifting to deal with concurrency conflicts. Oracle Forms, although now deprecated, is a good example. Entity Framework's optimistic locking another. These frameworks are tried and tested and can reduce the amount of testing required. Ask developers how much bespoke code they have written and which framework they use. <ol> <li> <p>For example, you may follow the implicit lock pattern, making it easier to add locks to new features.\u00a0\u21a9</p> </li> </ol>"},{"location":"testing-lost-updates/further-reading/","title":"Further reading","text":"<ol> <li> <p>Defensive Database Programming with SQL Server, Chapter 10: Alex Kuznetsov, Simple Talk Publishing (2010)</p> </li> <li> <p>Patterns of Enterprise Application Architecture, Chapter 5: Martin Fowler, Addison-Wesley (2002)</p> </li> </ol>"},{"location":"testing-lost-updates/how-do-you-test-for-lost-updates/","title":"How do you test for lost updates","text":"<p>Rick and Liz call for a review into the application's safety. This leads to a software change to prevent lost updates. How would you test it?</p> <p>In a web app, you might mimic each user by opening a new browser tab. Using Google Chrome's incognito mode for example. Or you might run the application on two machines. How robust would these tests be?</p> <p>And what if the users were software threads rather than people. Triggered to send almost simultaneous database updates? You would need a different test.</p> <p>Use this guide to test such scenarios. It is a response to recommendations found in a 2018 report.</p> <p>Practical tips</p> <p>Welsh Admin Portal -- Root Cause Analysis</p> <p>An investigation into why some patients were not assigned to waiting lists in the Welsh Patient Administration System concluded that;</p> <p>'The design and implementation did not account for (or handle) the potential for concurrency conflicts...Routine testing did not identify the issue'</p> <p>Further reading and information</p> <p>RPT-231026APRIL18 -WAP Redirect RCA.docx</p>"},{"location":"testing-lost-updates/introduction/","title":"Introduction","text":""},{"location":"testing-lost-updates/introduction/#purpose","title":"Purpose","text":"<p>To help you test for lost updates and other database concurrency bugs. You will learn -</p> <ul> <li> <p>How collaboration improves testing and why developers should also     write test scripts.</p> </li> <li> <p>How to follow our Test Framework and apply a risk-based approach.</p> </li> <li> <p>Common patterns, architects and developers use to solve concurrency     conflicts.</p> </li> <li> <p>The types of tests you will need and examples of authentic test     scripts.</p> </li> </ul>"},{"location":"testing-lost-updates/introduction/#scope","title":"Scope","text":""},{"location":"testing-lost-updates/introduction/#in-scope","title":"In-scope","text":"<ul> <li>This guide helps you to test software and follow our Test Framework.</li> </ul>"},{"location":"testing-lost-updates/introduction/#out-of-scope","title":"Out-of-scope","text":"<ul> <li>Post-deployment surveillance tests are not included in scope.</li> </ul>"},{"location":"testing-lost-updates/introduction/#roles-responsibilities","title":"Roles &amp; responsibilities","text":"<p>We write this for Test Analysts. But everyone has a part to play :-</p> <ul> <li> <p>Business analysts determine the need for concurrency in the     requirements.</p> </li> <li> <p>Architects and developers build concurrency control into the     designs.</p> </li> <li> <p>Developers and testers verify these designs beyond the user     interface.</p> </li> <li> <p>Support run surveillance scripts to continue testing after     deployment.</p> </li> <li> <p>Everyone takes part in sprint ceremonies. Because these interactions     refine your approach, ensuring it's fit for purpose.</p> </li> </ul> <p>Only by doing this, will you have confidence to test for lost updates and concurrency bugs.</p>"},{"location":"testing-lost-updates/introduction/#references","title":"References","text":"<ol> <li> <p>Software development handbook</p> </li> <li> <p>Test framework</p> </li> </ol>"},{"location":"testing-lost-updates/introduction/#how-this-guide-is-organised","title":"How this guide is organised","text":"<p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions.</p> <p>If a hyperlink is missing, search for the document in the Document Management System.</p>"},{"location":"testing-lost-updates/locking/","title":"Locking","text":"<p>Locking prevents concurrency conflict, eliminating the potential for lost updates. Locking designs take into consideration the chance of a conflict occurring and the scope to which we should apply the lock.</p>"},{"location":"testing-lost-updates/locking/#pessimistic-or-optimistic","title":"Pessimistic or optimistic","text":"<p>Pessimistic locks expect conflict, so they block access to one user at a time. Whether you apply the lock on View or Edit depends on the requirements. But other users must wait for the lock to release.</p> <p>Applying pessimistic locking in our example means Liz must wait for Rik to save changes before she can edit.</p> <p>By contrast, Optimistic locking does not block access because it does not expect a conflict to occur. But it does stop a user from saving changes if the data has changed.</p> <p>Applying this to our example, Rik is forced to reload the data (with Liz's changes) and start again.</p>"},{"location":"testing-lost-updates/locking/#coarse-or-fine-grained","title":"Coarse or fine grained","text":"<p>Based on requirements, locks may apply to the entire patient record - spanning many data entry forms. Or they may apply to a specific field or fields<sup>1</sup> - on an active part of a form for example.</p> <p>Any locking strategy must also ensure data integrity. A locking strategy that allows users to assign an invalid combination of GP and GP Practice is still wrong!</p>"},{"location":"testing-lost-updates/locking/#no-locking-but-validation-checks","title":"No locking, but validation checks","text":"<p>Rather than locking, applications may check updates are consistent with existing data. Serializing database access and updating only the fields that change is one approach.</p>"},{"location":"testing-lost-updates/locking/#no-concurrency-controls","title":"No concurrency controls","text":"<p>Typically the system under test will need to manage concurrency conflicts. But it may not always be necessary. Make sure to find out!</p> <p>Practical tips</p> <p>Even if a requirements specification omits concurrency control it does not necessarily mean it is not needed. Encourage your business analysts, architects and developers to record it in their documentation!</p> <ol> <li> <p>Although locking at field level is unlikely to be practical for Pessimistic locking.\u00a0\u21a9</p> </li> </ol>"},{"location":"testing-lost-updates/whats-a-lost-update/","title":"What's a lost update","text":"<p>A lost update can occur when two or more users change a shared piece of data at the same time. A user is a person or automated process. Consider this hypothetical example:</p> <ol> <li> <p>Dr Rick Dagless loads patient X's data onto a web form, to record     their allergy to penicillin.</p> </li> <li> <p>Meanwhile, Dr Liz Asher also loads patient X's data. She clicks a     checkbox to record that the patient lives alone and immediately     saves her changes.</p> </li> <li> <p>Rick saves his changes with lives alone unchecked. In doing so he     unknowingly overwrites Liz's change.</p> </li> </ol> <p>We call the action of loading and saving changes to data a transaction. When the result of one transaction is dependent on the sequence or timing of another, it's called a concurrency conflict or race condition.</p> <p>In our example, the result is the loss of a lasting record that the patient lives alone. And this is a patient safety concern - imagine if the checkbox indicated the need to refer the patient for urgent treatment!</p>"},{"location":"testing-lost-updates/write-and-execute-tests/","title":"Write and execute tests","text":"<p>Use the table below, together with your own expertise, to determine the types of tests you need.</p> TEST TYPE TYPE OF WORK PERFORMED Functional GUI testing Often manual tests. For example, to check locking behaviour or determine what happens when a user logs in many times. The next page lists some authentic examples. Functional Data testing Using tools like SQL Server Management Studio, to check for accuracy as we load and save data in the GUI. For example, some tests on the next page check a table called FunctionLock to verify the lock requested in the user interface exists in the database. Combined with functional GUI testing, functional data testing is highly effective. But it has limitations. Consider the first 10 steps of 9045 Test Requesting What happens if both User A and User B choose the same patient at the same time? Can you be sure who gets the lock? Both? How do you guarantee the database commands execute concurrently to make sure both users are not allowed to lock the same patient record? For fine grained control you execute your functional data tests with code walk-throughs, debugging and unit tests. Code walk-throughs and debugging Ask developers to walk you through their tests and include these in your strategy and plans. Non-functional stress tests The techniques above go a long way to providing confidence. But also consider using stress tests, particularly when writing an automated software process. They need not be too involved. Developers can write simple tests using T-SQL -- see FURTHER READING. Again, include them in your strategy and plans. Monitoring and surveillance Post deployment monitoring and surveillance is beyond the scope of this guide. But teams should continue to test for lost updates and deadlocks after deployment."},{"location":"using-source-control/adopt-trunk-based-development-and-continuous-integration/","title":"Adopt trunk-based development and continuous integration","text":"<p>Trunk-Based Development simplifies source control by deploying directly from the trunk branch (e.g., main or master). You SHOULD adopt this approach where feasible, as it minimises the complexity of managing long-lived branches.</p> <p>RECOMMENDATIONS:</p> <ul> <li> <p>Write a comprehensive suite of automated tests to keep branches     deployable.</p> </li> <li> <p>Aim for continuous integration and frequent deployments from the     trunk.</p> </li> </ul> <p>When to Consider Alternatives:</p> <p>If your project requires extensive experimentation or long-term feature development, ensure robust practices for merging changes from feature branches.</p> <p>Further reading and information</p> <p>It's Not Continuous Delivery If You Can't Deploy Right Now - YouTube</p> <p>Git patterns and anti-patterns for successful developers - YouTube</p>"},{"location":"using-source-control/always-deploy-from-source-control/","title":"Always deploy from source control","text":"<p>You MUST ensure all deployments originate from source control to maintain traceability. Use Git tags or branches to track and manage deployments.</p> <p>You MUST NOT manually copy changes between environments.</p> <p>Practical tips</p> <p>WPRS -- Prioritisation incident</p> <p>In 2016, a clinical incident review (ref. 58337) found a missing table alias in a SQL Select statement as the root cause of certain referrals which had been missed for assessment.</p> <p>It found that had the code been deployed from source control, the risk of not spotting the error before going live would have reduced.</p>"},{"location":"using-source-control/commit-changes-early-and-often/","title":"Commit changes early and often","text":"<p>Committing code early and often provides several benefits:</p> <ul> <li> <p>It reduces the risk of losing code, e.g., due to local disk failure.</p> </li> <li> <p>It encourages building smaller, modular components, simplifying     rollback.</p> </li> <li> <p>It makes integrating changes into the main or master branch easier.</p> </li> </ul> <p>You MUST commit changes to your main codebase as soon as possible, regardless of whether you are using trunk-based development or feature branches.</p> <p>You SHOULD commit related changes together and keep commits as small as possible. Smaller commits make rollback easier and minimise disruptions.</p> <p>You SHOULD NOT commit large batches of unrelated work. It complicates code reviews and rollbacks.</p>"},{"location":"using-source-control/essential-good-practice-checklist/","title":"Essential good practice checklist","text":"No. Checklist Item Guide or Standard Exceptions 1 You store program code in our source control systems. \u2610 Use our source control systems 2 You have planned a clear repo structure. \u2610 Establish a clear repo structure 3 You follow a documented, well-understood branching strategy. \u2610 Follow a branching strategy 4 You have a versioning strategy that clearly indicates breaking changes in updated versions. \u2610 Implement a versioning strategy 5 Your write clear commit messages following the conventional commits specification. \u2610 Write clear commit messages 6 You use an automated build and deployment pipeline that builds all components and includes validation checks, such as unit tests, linting, and schema validation. \u2610 Always deploy from source control 7 You have an automated build and deployment pipeline (or re-runnable and source-controlled scripts) for relevant environments, such as - System Integration Testing (sometimes called Test or QA) User Acceptance Testing (if applicable) Production \u2610 Always deploy from source control 8 You manage deployments to each environment using Git's branch and tag commands. \u2610 Always deploy from source control"},{"location":"using-source-control/establish-a-clear-repo-structure/","title":"Establish a clear repo structure","text":""},{"location":"using-source-control/establish-a-clear-repo-structure/#before-creating-your-repo","title":"Before creating your repo","text":"<p>You MUST have a clear plan for how to organise your repos. You have three main options:</p> REPO TYPE Description MONOREPO A single repo for all our organisation's source code. We do not use this approach and it is NOT RECOMMENDED to have all teams share one Azure DevOps project. SINGLE REPO Each team stores its code in the same repo. This is the RECOMMENDED approach for most cases but requires automation to manage the process effectively. MULTIREPO Each application has its own repo. This may be necessary if you have specific constraints that make this approach better for your team."},{"location":"using-source-control/establish-a-clear-repo-structure/#managing-multiple-applications-in-the-same-repo","title":"Managing multiple applications in the same repo","text":"<p>Your repos MUST NOT become a confusing mess. To keep them organised you MUST:</p> <ul> <li> <p>Deploy applications only when code changes are made to that specific     application.</p> </li> <li> <p>Restrict access to distinct parts of your codebase when needed.</p> </li> </ul> <p>For example, the Single Record Product team might face these scenarios:</p> PROBLEM SOLUTION The Welsh Clinical Portal mobile and web apps share common libraries in the same repo, but changes to one app should not trigger deployments of the other. Set up build pipelines to trigger only when code changes occur in specific directories. Contractors working on the Welsh Nursing Care Record form should not be able to modify the Welsh Clinical Portal apps. Use branch policies or security settings to limit access."},{"location":"using-source-control/establish-a-clear-repo-structure/#choosing-between-single-and-multirepos","title":"Choosing between single and multirepos?","text":"<p>Using a Single Repo is RECOMMENDED for apps that share a release cadence, like a desktop app and its back-end API. This approach is also good for components that are deployed together.</p> <p>If you choose a single repo, you MUST automate builds and deployments and follow the folder structure outlined in How to Organise Your Software Solution.</p> <p>If your apps are each tied to their own Visual Studio .sln file, Multirepo may be a better fit.</p> <p>Practical tips</p> <p>Even when using a single repo for common libraries, you SHOULD use package management to publish binaries.</p> <p>Repos and branches serve a different purpose. See the Azure DevOps handbook for details.</p> <p>Further reading and information</p> <p>How to Organise Your Software Solution</p> <p>Azure DevOps handbook</p> <p>Structure your Git Repo - Training | Microsoft Learn</p> <p>Working with a Monorepo - CSE Developer Blog (microsoft.com)</p> <p>Monorepos in Git | Atlassian Git Tutorial</p> <p>Misconceptions about Monorepos: Monorepo != Monolith</p> <p>The Big Ball of Mud and Other Architectural Disasters (codinghorror.com)</p>"},{"location":"using-source-control/exceptions/","title":"Exceptions","text":"<p>While there may be reasons to deviate from this guide, exceptions should be rare and carefully considered.</p>"},{"location":"using-source-control/follow-a-branching-strategy/","title":"Follow a branching strategy","text":"<p>You MUST implement a branching strategy that fits your team's needs. A clear strategy helps minimise risks like introducing bugs or conflicts. While Trunk-Based Development is RECOMMENDED, select the approach best suited to your project.</p> <p>Your branching strategy MUST:</p> <ul> <li> <p>Define a consistent branch naming convention. See the Azure DevOps     handbook for details.</p> </li> <li> <p>Be documented in the project's README.md and CONTRIBUTING.md file or team wiki.</p> </li> </ul> <p>Practical tips</p> <p>Use tools like Jakob Ehn's GitFlow for Visual Studio if they simplify branch management for your team.</p> <p>Further reading and information</p> <p>Azure DevOps handbook</p> <p>Patterns for Managing Source Code Branches (martinfowler.com)</p> <p>A successful Git branching model \u00bb nvie.com</p> <p>Introducing GitFlow for Visual Studio - blog.ehn.nu</p> <p>GitFlow | Visual Studio, Visual Studio Marketplace</p>"},{"location":"using-source-control/implement-a-versioning-strategy/","title":"Implement a versioning strategy","text":"<p>A versioning strategy MUST define how you assign, increment, and publish version numbers. It SHOULD integrate with your branching strategy to streamline builds and deployments.</p>"},{"location":"using-source-control/implement-a-versioning-strategy/#use-semantic-versioning","title":"Use semantic versioning","text":"<p>The Semantic Versioning (SemVer 2.0.0) specification is RECOMMENDED and MUST be used for public APIs and NuGet packages. SemVer makes it easier for consumers to understand breaking, additive, or patch-level changes.</p>"},{"location":"using-source-control/implement-a-versioning-strategy/#automate-version-numbering","title":"Automate version numbering","text":"<p>Use tools like Nerdbank.GitVersioning to generate SemVer compliant versions during builds.</p> <p>Practical tips</p> <p>For .NET projects, NuGet 4.3.0+ supports SemVer 2.0.0.</p> <p>For APIs, include version numbers only if updates are expected; omit them for static APIs.</p> <p>For C# projects, use the obsolete attribute to warn about upcoming deprecations.</p> <p>Don't confuse semantic versioning, which reflects technical compatibility, with product versions which often align with release schedules.</p> <p>Further reading and information</p> <p>RESTful API Design and Build Standards</p> <p>Azure DevOps handbook</p> <p>Semantic Versioning 2.0.0 | Semantic Versioning</p> <p>NuGet Package Version Reference | Microsoft Learn</p> <p>Versioning and .NET libraries - .NET | Microsoft Learn</p> <p>API Versioning Options \u00b7 dotnet/aspnet-api-versioning Wiki</p> <p>API versioning misconceptions: When you need it and when you don't | Google Cloud Blog</p> <p>apigee-web-api- design-the-missing-link-ebook.pdf (page 56)</p> <p>Breaking changes and .NET libraries - .NET | Microsoft Learn</p> <p>Attributes interpreted by the compiler: Miscellaneous - C# reference | Microsoft Learn</p> <p>https://github.com/dotnet/Nerdbank.GitVersioning</p> <p>Versioning limitations in .NET | Jon Skeet's coding blog</p> <p>Semantic Versioning and Patch 2.1.2 | Alan Kent's Blog</p> <p>API Versioning Explained | Lightboard Series</p>"},{"location":"using-source-control/introduction/","title":"Introduction","text":""},{"location":"using-source-control/introduction/#purpose","title":"Purpose","text":"<p>A guide to working with source control. Following it helps you meet our requirements for developing software described in our Software development handbook.</p> <p>Further reading and information</p> <p>Software development handbook</p>"},{"location":"using-source-control/introduction/#scope","title":"Scope","text":""},{"location":"using-source-control/introduction/#in-scope","title":"In-scope","text":"<ul> <li> <p>Good practices for using source control and conducting code reviews.</p> </li> <li> <p>Strategies for organising Git repositories.</p> </li> <li> <p>Strategies for branching and merging.</p> </li> <li> <p>Good practice checklist.</p> </li> </ul>"},{"location":"using-source-control/introduction/#out-of-scope","title":"Out-of-scope","text":"<ul> <li> <p>In depth guidance for creating and configuring Git repos. See our     Azure DevOps handbook for details.</p> </li> <li> <p>This guide is for Azure DevOps users, specifically those using Azure     Repos. GitHub users may find it helpful, but it is not tailored for     them.</p> </li> </ul> <p>Practical tips</p> <p>Some links in this handbook now point to GitHub resources - as Microsoft increasingly promotes GitHub in marketing and training.</p>"},{"location":"using-source-control/introduction/#references","title":"References","text":"<ol> <li> <p>Software development handbook</p> </li> <li> <p>RESTful API Design and Build Standards</p> </li> <li> <p>How to Organise Your Software Solution</p> </li> <li> <p>Azure DevOps handbook</p> </li> </ol>"},{"location":"using-source-control/introduction/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in RFC 2119.</p> <p>Practical tips</p> <p>Practical tips</p> <p>Examples of good practice</p> <p>Examples of good practice...</p> <p>Practices to avoid</p> <p>...and practices to avoid</p> <p>Further reading and information</p> <p>Links to further guides, information and work instructions. If a hyperlink is missing, search for the document in our Document Management System.</p>"},{"location":"using-source-control/introduction/#the-need-for-guidance","title":"The need for guidance","text":"<p>Source control, or version control, helps you stay organised by tracking changes to your files as you fix bugs or add features. It lets you easily revert to earlier versions when needed,</p> <p>Using our source control systems helps you comply with company Disaster Recovery policies.</p>"},{"location":"using-source-control/keep-your-repo-organised/","title":"Keep your repo organised","text":"<p>You SHOULD maintain clean, organised repositories by:</p> <ul> <li> <p>Removing stale or unused projects.</p> </li> <li> <p>Reviewing &amp; revoking unnecessary permissions with Windows Groups for     access control.</p> </li> </ul> <p>Where possible, projects SHOULD be open for others to read and contribute.</p> <p>Further reading and information</p> <p>Azure DevOps handbook</p>"},{"location":"using-source-control/review-your-code/","title":"Review your code","text":"<p>Code reviews help improve code quality, increase team knowledge, and develop coding skills, particularly for new team members. While it is not always possible to have your code reviewed before committing to the main branch, it is RECOMMENDED.</p> <p>When implementing code reviews, you MUST ensure the following are clearly documented in the project's README.md and CONTRIBUTING.md file. or team wiki:</p> <ul> <li> <p>The purpose of code reviews and the coding standards your code must     adhere to.</p> </li> <li> <p>The minimum number of reviewers required to approve a commit. Two     reviewers are RECOMMENDED.</p> </li> </ul> <p>Additional RECOMMENDATIONS:</p> <ul> <li> <p>Consider using pair programming for real-time code review and     feedback.</p> </li> <li> <p>Use Pull Requests to facilitate and track your code reviews.</p> </li> </ul> <p>Practical tips</p> <p>ISO 9001:2015 Audit Recommendation</p> <p>An external ISO 9001:2015 audit in 2020 recommended that teams define a minimum number of code reviewers rather than inviting the entire team to review a commit.</p>"},{"location":"using-source-control/select-and-configure-git-clients/","title":"Select and configure Git clients","text":"<p>There are many Git clients available. However, Visual Studio is RECOMMENDED, which includes a built-in Git client. Regardless of the Git client, you MUST:</p> <ul> <li> <p>Ensure it is properly licenced.</p> </li> <li> <p>Regularly apply the latest security patches.</p> </li> <li> <p>Verify that your Git settings, both local and remote, reflect your     NHS Wales identity.</p> </li> </ul> <p>Further reading and information</p> <p>Git - GUI clients</p>"},{"location":"using-source-control/use-git/","title":"Use Git","text":"<p>Visual Studio and Azure DevOps offer two source control tools through Azure Repos: Team Foundation Version Control and Git (the default). You SHOULD use Git. While it has a steeper learning curve, it is better suited to help you follow these standards.</p> <p>Further reading and information</p> <p>Manage source control - Training | Microsoft Learn</p> <p>Git Book</p> <p>Get started with Git and Visual Studio - Azure Repos | Microsoft Learn</p> <p>Azure Repos Git Documentation | Microsoft Learn</p> <p>About Git in Visual Studio | Microsoft Learn</p> <p>Git and TFVC version control - Azure Repos | Microsoft Learn</p> <p>Map TFVC actions to Git - Azure Repos | Microsoft Learn</p> <p>Change the Work Items page experience - Azure Boards | Microsoft Learn</p>"},{"location":"using-source-control/use-our-source-control-systems/","title":"Use our source control systems","text":"<p>Any code not in source control is considered outside your project. You MUST commit all code to our source control systems. You can find more details from our Azure DevOps handbook.</p> <p>Further reading and information</p> <p>Azure DevOps handbook</p>"},{"location":"using-source-control/what-to-include-in-source-control/","title":"What to include in source control","text":"<p>You MUST include:</p> <ul> <li> <p>Everything needed to build your project, including the database.</p> </li> <li> <p>A README.md and CONTRIBUTING.md file. Other documentation MAY be     kept outside source control.</p> </li> </ul> <p>You MUST NOT include:</p> <ul> <li> <p>Sensitive information, such as API keys, passwords, or server names.     Instead, use environment variables or key stores.</p> </li> <li> <p>Personal Identifiable Information (PII).</p> </li> </ul> <p>You SHOULD exclude:</p> <ul> <li>Compilation output and user settings files. Use a .gitignore file     (e.g., for Visual Studio) to manage exclusions.</li> </ul> <p>Additional RECOMMENDATIONS:</p> <ul> <li> <p>Use Redgate Source Control to manage your database.</p> </li> <li> <p>Use package management to avoid storing dependencies in source     control.</p> </li> </ul> <p>Practical tips</p> <p>Disaster Recovery</p> <p>In 2017, a disaster recovery test revealed weaknesses in our source control system, risking longer recovery times and data loss. These issues HAVE since been resolved.</p> <p>Further reading and information</p> <p>How to Organise Your Software Solution</p> <p>gitignore/VisualStudio.gitignore at main \u00b7 github/gitignore</p>"},{"location":"using-source-control/write-clear-commit-messages/","title":"Write clear commit messages","text":"<p>Commit messages are essential for understanding the history, context, and purpose of code changes. Following these standards will:</p> <ul> <li> <p>Improve collaboration and communication across teams.</p> </li> <li> <p>Make it easier to debug, trace changes and manage the codebase     effectively.</p> </li> <li> <p>Ensure consistency and professionalism in your projects.</p> </li> </ul> <p>You MUST write a commit message for every change.</p> <p>Commit messages MUST be clear, concise, and follow a consistent format.</p> <p>You SHOULD:</p> <ul> <li> <p>Use the Conventional Commits specification to structure your     messages.</p> </li> <li> <p>Link commits to work items, bugs, or tasks using identifiers.</p> </li> </ul> <p>Practical tips</p> <p>In Visual Studio, include the work item ID, e.g., #123 , in your commit message. Visual Studio will automatically link the commit to the corresponding work item.</p> <p>Additional RECOMMENDATIONS:</p> <ul> <li> <p>Consider tools like VsCommitizen or commitlint to help enforce     standards.</p> </li> <li> <p>Use branch policies to ensure commit messages comply with     requirements.</p> </li> <li> <p>Use \"because\" in your message to clarify the reasoning behind     changes.</p> </li> </ul> <p>Further reading and information</p> <p>Conventional Commits</p> <p>VsCommitizen - Visual Studio Marketplace</p>"},{"location":"using-source-control/write-clear-commit-messages/#commit-message-standard","title":"Commit message standard","text":"<p>Each commit message MUST follow this template:</p> <p>Examples of good practice</p> <p>&lt;type&gt;[optional scope]: description</p> <p>[optional body]</p> <p>[optional footers]</p> <p>&lt;type&gt;: describes the purpose of the commit. You MUST append a ! to &lt;type&gt; if the commit introduces a breaking change (e.g. <code>feat</code>!).</p> TYPE DESCRIPTION <code>feat</code>: A new feature. <code>fix</code>: A bug fix. <code>build</code>: Changes to the build system or dependencies. <code>chore</code>: Maintenance tasks that do not affect application functionality. <code>ci</code>: Changes to CI/CD pipelines or configuration. <code>docs</code>: Documentation updates. <code>style</code>: Code formatting changes (e.g., indentation, spacing) without functional impact. <code>refactor</code>: Code changes that improve structure &amp; clarity without changing behaviour. <code>perf</code>: Performance improvements. <code>test</code>: Adding or modifying tests <p>The &lt;summary&gt; MUST:</p> <ul> <li> <p>Be 50 characters or fewer.</p> </li> <li> <p>Use the imperative mood (e.g. \"Add login validation\").</p> </li> </ul> <p>The &lt;body&gt; SHOULD:</p> <ul> <li> <p>Provide additional context (e.g. why a change was made).</p> </li> <li> <p>Be wrapped at 72 characters per line for readability.</p> </li> </ul> <p>Additional RECOMMENDATIONS:</p> <ul> <li>Avoid ending with punctuation.</li> </ul> <p>Examples of good practice</p> <p>feat: Add support for user authentication</p> <p>Introduced OAuth-based login for secure access. Closes Task#1234</p> <p>Examples of good practice</p> <p>fix: Resolve API timeout issue on large datasets</p> <p>Adjusted query execution to improve performance. Resolves Bug#5678</p> <p>Examples of good practice</p> <p>docs: Update README with deployment instructions</p> <p>Added steps for configuring environment variables and services</p> <p>Practices to avoid</p> <p>Changeset 12345</p> <p>The best version EVER again!</p> <p>Second update</p> <p>Further reading and information</p> <p>Conventional Commits</p> <p>commitlint/@commitlint/config-conventional at master \u00b7 conventional-changelog/commitlint \u00b7 GitHub</p> <p>A Note About Git Commit Messages</p> <p>How to Write a Git Commit Message (cbea.ms)</p> <p>How to Write Good Commit Messages: A Practical Git Guide (freecodecamp.org)</p> <p>Writing Meaningful Commit Messages --- Beanstalk (beanstalkapp.com)</p>"}]}